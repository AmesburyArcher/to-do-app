(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>f});const t="task.list",n="task.selectedFolder";let r=localStorage.getItem(n),o=JSON.parse(localStorage.getItem(t))||[];const l=()=>{i(),a()},i=()=>{localStorage.setItem(t,JSON.stringify(o)),localStorage.setItem(n,r)},a=()=>{const e=document.querySelector(".directory");s(e),o.forEach((t=>{const n=f("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===r&&n.classList.add("directory-active"),e.appendChild(n);const o=f("span",null,["directory-folder-icons"],null);o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',n.classList.contains("directory-active")&&n.appendChild(o)}))},s=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},d=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const r=y(n);t.value=null,o.push(r),l()},c=e=>{"li"===e.target.tagName.toLowerCase()&&(r=e.target.dataset.listId,l())},u=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.dataset.listId===r&&(o=o.filter((e=>e.id!==r)),r=null,l())},m=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.dataset.listId===r){document.querySelector(".directory-modal-container").style.display="block";const e=document.querySelector("#directory-edit-form"),t=n=>{n.preventDefault();const i=document.querySelector("#text-dir"),a=i.value;null!=a&&""!==a&&(o.forEach((e=>{e.id===r&&(e.name=a)})),i.value=null,l(),document.querySelector(".directory-modal-container").style.display="none",e.removeEventListener("submit",t))};e.addEventListener("submit",t)}},y=e=>({id:Date.now().toString(),name:e,tasks:[]});function f(e,t,n,r){const o=document.createElement(e);return t&&(o.id=t),n&&n.forEach((e=>o.classList.add(e))),r&&(o.textContent=r),o}document.querySelector("#header"),document.querySelector("#sidebar"),document.querySelector("#main"),document.querySelector("#footer"),l(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",d),t.addEventListener("click",c),t.addEventListener("click",u),t.addEventListener("click",m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUFJbUMsS0FBS0MsTUFBTUMsV0FBWXhDLEtBQU1tQyxFQUFLTSxNQUFPLEtDakh6RCxTQUFTMUMsRUFBa0IyQyxFQUFNdkMsRUFBSXdDLEVBQVNDLEdBQzFDLE1BQU1DLEVBQVVwRCxTQUFTcUQsY0FBY0osR0FRdkMsT0FOR3ZDLElBQUkwQyxFQUFRMUMsR0FBS0EsR0FDakJ3QyxHQUNDQSxFQUFRL0MsU0FBU21ELEdBQVlGLEVBQVF6QyxVQUFVQyxJQUFJMEMsS0FFcERILElBQVNDLEVBQVFHLFlBQWNKLEdBRTNCQyxFQWRJcEQsU0FBU0MsY0FBYyxXQUN0QkQsU0FBU0MsY0FBYyxZQUMxQkQsU0FBU0MsY0FBYyxTQUNyQkQsU0FBU0MsY0FBYyxXQWV0Q1AsSUQ4QjBCLE1BQ3RCLE1BQU04RCxFQUFVeEQsU0FBU0MsY0FBYyxpQkFDakN3RCxFQUFlekQsU0FBU0MsY0FBYyxjQUU1Q3VELEVBQVFaLGlCQUFpQixTQUFVeEIsR0FDbkNxQyxFQUFhYixpQkFBaUIsUUFBU2hCLEdBQ3ZDNkIsRUFBYWIsaUJBQWlCLFFBQVNaLEdBQ3ZDeUIsRUFBYWIsaUJBQWlCLFFBQVNULElDcEMzQ3VCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvZGlyZWN0b3J5LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0RJUl9LRVkgPSAndGFzay5saXN0JztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSA9ICd0YXNrLnNlbGVjdGVkRm9sZGVyJztcblxuLy9sb2NhbCBzdG9yYWdlIGtleXMgKyBhcnJheVxubGV0IHNlbGVjdGVkRm9sZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZKVxubGV0IGRpcmVjdG9yeUFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZKSkgfHwgW107IFxuXG5jb25zdCBzYXZlQW5kUmVuZGVyTGlzdCA9ICgpID0+IHtcbiAgICBzYXZlKCk7XG4gICAgcmVuZGVyTGlzdHMoKTtcbn1cblxuLy9zYXZlcyB0byBsb2NhbCBzdG9yYWdlXG5jb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5QXJyKSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZLCBzZWxlY3RlZEZvbGRlcik7XG59XG5cbi8vcmVuZGVycyB0aGUgZGlyZWN0b3J5IGxpc3RcbmNvbnN0IHJlbmRlckxpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdG9yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGNsZWFyTGlzdChkaXJlY3RvcnlDb250YWluZXIpO1xuICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpcmVjdG9yeSA9PiB7XG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVyID0gY3JlYXRlSFRNTEVsZW1lbnQoJ2xpJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyJ10sIGRpcmVjdG9yeS5uYW1lKVxuICAgICAgIGRpcmVjdG9yeUZvbGRlci5kYXRhc2V0Lmxpc3RJZCA9IGRpcmVjdG9yeS5pZDtcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIG1ha2UgaXQgYWN0aXZlIGZvbGRlclxuICAgICAgIGlmKGRpcmVjdG9yeS5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdG9yeS1hY3RpdmUnKTtcbiAgICAgICB9O1xuICAgICAgIGRpcmVjdG9yeUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXIpOyBcblxuICAgICAgIGNvbnN0IGRpcmVjdG9yeUZvbGRlckljb25zID0gY3JlYXRlSFRNTEVsZW1lbnQoJ3NwYW4nLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXItaWNvbnMnXSwgbnVsbCk7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVySWNvbnMuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLWVkaXRcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk00IDIwaDRsMTAuNSAtMTAuNWExLjUgMS41IDAgMCAwIC00IC00bC0xMC41IDEwLjV2NFwiIC8+PGxpbmUgeDE9XCIxMy41XCIgeTE9XCI2LjVcIiB4Mj1cIjE3LjVcIiB5Mj1cIjEwLjVcIiAvPjwvc3ZnPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRyYXNoXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiNmZmZmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxsaW5lIHgxPVwiNFwiIHkxPVwiN1wiIHgyPVwiMjBcIiB5Mj1cIjdcIiAvPjxsaW5lIHgxPVwiMTBcIiB5MT1cIjExXCIgeDI9XCIxMFwiIHkyPVwiMTdcIiAvPjxsaW5lIHgxPVwiMTRcIiB5MT1cIjExXCIgeDI9XCIxNFwiIHkyPVwiMTdcIiAvPjxwYXRoIGQ9XCJNNSA3bDEgMTJhMiAyIDAgMCAwIDIgMmg4YTIgMiAwIDAgMCAyIC0ybDEgLTEyXCIgLz48cGF0aCBkPVwiTTkgN3YtM2ExIDEgMCAwIDEgMSAtMWg0YTEgMSAwIDAgMSAxIDF2M1wiIC8+PC9zdmc+JztcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIGFkZCB0aGUgaWNvbnNcbiAgICAgICBpZihkaXJlY3RvcnlGb2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXJlY3RvcnktYWN0aXZlJykpIHtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXIuYXBwZW5kQ2hpbGQoZGlyZWN0b3J5Rm9sZGVySWNvbnMpO1xuICAgICAgIH07XG4gICAgfSlcbn07XG5cbi8vY2xlYXJzIHRoZSBkaXJlY3RvcnkgbGlzdCB0byBiZSByZS1yZW5kZXJlZCBpbiByZW5kZXJMaXN0c1xuY29uc3QgY2xlYXJMaXN0ID0gKGxpc3QpID0+IHtcbiAgICB3aGlsZShsaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbGlzdC5yZW1vdmVDaGlsZChsaXN0LmZpcnN0Q2hpbGQpXG4gICAgfVxufTtcblxuLy9hZGRzIGV2ZW50bGlzdGVuZXJzIGZvciB0aGUgZGlyZWN0b3J5XG5jb25zdCBjcmVhdGVEaXJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICBjb25zdCBkaXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1kaXItZm9ybScpO1xuICAgIGNvbnN0IGRpckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGRpckZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgY3JlYXRlRGlyZWN0b3J5KVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlRGlyKVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXREaXIpXG59XG5cbi8vY3JlYXRlcyBhIG5ldyBkaXJlY3RvcnkgZm9sZGVyXG5jb25zdCBjcmVhdGVEaXJlY3RvcnkgPSAoZSkgPT4ge1xuICAgIGNvbnN0IGRpclRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWRpci1idG4tdGV4dCcpO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGRpck5hbWUgPSBkaXJUZXh0LnZhbHVlO1xuICAgIGlmKGRpck5hbWUgPT0gbnVsbCB8fCBkaXJOYW1lID09PSAnJykgcmV0dXJuO1xuICAgIGNvbnN0IGRpcmVjdG9yeSA9IGNyZWF0ZU5ld0RpcihkaXJOYW1lKTtcbiAgICBkaXJUZXh0LnZhbHVlID0gbnVsbDtcbiAgICBkaXJlY3RvcnlBcnIucHVzaChkaXJlY3RvcnkpO1xuICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG59XG5cbi8vZnVuY3Rpb24gZm9yIHRoZSBzZWxlY3RlZCBkaXJlY3RvcnkgbGlzdGVuZXJcbmNvbnN0IHNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2xpJykge1xuICAgICAgICBzZWxlY3RlZEZvbGRlciA9IGUudGFyZ2V0LmRhdGFzZXQubGlzdElkO1xuICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgIH1cbn1cblxuLy9mdW5jdGlvbiBmb3IgdGhlIGRlbGV0ZWRpciBsaXN0ZW5lciBcbmNvbnN0IGRlbGV0ZURpciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLXRyYXNoJykgJiYgZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBkaXJlY3RvcnlBcnIgPSBkaXJlY3RvcnlBcnIuZmlsdGVyKGRpcmVjdG9yeSA9PiBkaXJlY3RvcnkuaWQgIT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBudWxsO1xuICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgIH1cbn1cbi8vRWRpdGluZyB0aGUgZGlyZWN0b3J5IGZvbGRlciB0aXRsZSBhbmQgdXBkYXRpbmcgdGhlIGFycmF5ICsgRE9NXG5jb25zdCBlZGl0RGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tZWRpdCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICBkaXJlY3RvcnlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY29uc3QgZWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXJlY3RvcnktZWRpdC1mb3JtJyk7XG5cbiAgICAgICAgY29uc3QgZWRpdERpckZvcm0gPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RleHQtZGlyJyk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlSZU5hbWUgPSBkaXJlY3RvcnlNb2RhbFRleHQudmFsdWU7XG4gICAgICAgICAgICBpZihkaXJlY3RvcnlSZU5hbWUgPT0gbnVsbCB8fCBkaXJlY3RvcnlSZU5hbWUgPT09ICcnKSByZXR1cm47XG4gICAgICAgICAgICBkaXJlY3RvcnlBcnIuZm9yRWFjaChkaXIgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGRpci5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyLm5hbWUgPSBkaXJlY3RvcnlSZU5hbWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZGlyZWN0b3J5TW9kYWxUZXh0LnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnktbW9kYWwtY29udGFpbmVyJyk7XG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBlZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKVxuICAgIH1cblxufVxuXG4vL2NyZWF0ZXMgYSBkaXJlY3RvcnkgZm9sZGVyIG9iamVjdCB0byBiZSBwdXNoZWQgaW50byBkaXJlY3RvcnkgYXJyYXlcbmNvbnN0IGNyZWF0ZU5ld0RpciA9IChkaXIpID0+IHtcbiAgIHJldHVybiB7IGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IGRpciwgdGFza3M6IFtdIH1cbn1cblxuZXhwb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IiwiaW1wb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5cblxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlcicpO1xuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyJyk7XG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4nKTtcbmNvbnN0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXInKTtcblxuZnVuY3Rpb24gY3JlYXRlSFRNTEVsZW1lbnQodHlwZSwgaWQsIGNsYXNzZXMsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgIGlmKGlkKSBlbGVtZW50LmlkID0gaWQ7XG4gICAgaWYoY2xhc3Nlcykge1xuICAgICAgICBjbGFzc2VzLmZvckVhY2goKG15Q2xhc3MpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChteUNsYXNzKSk7XG4gICAgfTtcbiAgICBpZihjb250ZW50KSBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcblxuICAgIHJldHVybiBlbGVtZW50O1xufTtcblxuXG5zYXZlQW5kUmVuZGVyTGlzdCgpO1xuY3JlYXRlRGlyTGlzdGVuZXIoKTtcblxuZXhwb3J0IHtcbiAgICBjcmVhdGVIVE1MRWxlbWVudFxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkxPQ0FMX1NUT1JBR0VfRElSX0tFWSIsIkxPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSIsInNlbGVjdGVkRm9sZGVyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRpcmVjdG9yeUFyciIsIkpTT04iLCJwYXJzZSIsInNhdmVBbmRSZW5kZXJMaXN0Iiwic2F2ZSIsInJlbmRlckxpc3RzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRpcmVjdG9yeUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFyTGlzdCIsImZvckVhY2giLCJkaXJlY3RvcnkiLCJkaXJlY3RvcnlGb2xkZXIiLCJjcmVhdGVIVE1MRWxlbWVudCIsIm5hbWUiLCJkYXRhc2V0IiwibGlzdElkIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImRpcmVjdG9yeUZvbGRlckljb25zIiwiaW5uZXJIVE1MIiwiY29udGFpbnMiLCJsaXN0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY3JlYXRlRGlyZWN0b3J5IiwiZSIsImRpclRleHQiLCJwcmV2ZW50RGVmYXVsdCIsImRpck5hbWUiLCJ2YWx1ZSIsImNyZWF0ZU5ld0RpciIsInB1c2giLCJzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiZGVsZXRlRGlyIiwicGFyZW50RWxlbWVudCIsImZpbHRlciIsImVkaXREaXIiLCJzdHlsZSIsImRpc3BsYXkiLCJlZGl0RGlyQnRuIiwiZWRpdERpckZvcm0iLCJkaXJlY3RvcnlNb2RhbFRleHQiLCJkaXJlY3RvcnlSZU5hbWUiLCJkaXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRhc2tzIiwidHlwZSIsImNsYXNzZXMiLCJjb250ZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwidGV4dENvbnRlbnQiLCJkaXJGb3JtIiwiZGlyQ29udGFpbmVyIiwiY3JlYXRlRGlyTGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9