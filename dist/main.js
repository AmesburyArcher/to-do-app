(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>x,s:()=>E});const t=document.querySelector("#to-do-list"),n=document.querySelector(".to-do-title"),o=document.querySelector(".task-count"),r=document.querySelector(".tasks"),c=document.querySelector("#task-template"),s=()=>{const e=v.find((e=>e.id===m));null==m?t.style.display="none":(t.style.display="",n.textContent=e.name,(e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";o.textContent=`${t} ${n} remaining`})(e),h(r),e.tasks.forEach((e=>{const t=document.importNode(c.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete,t.querySelector(".task-name").textContent=e.name;const o=t.querySelector(".task-desc");e.desc?o.textContent=` Description: ${e.desc}`:o.textContent="No Description.",t.querySelector(".task-date").textContent=` Complete by: ${e.date}`,r.appendChild(t)})))},l=()=>{document.querySelector(".modal-container").classList.add("active")},a=e=>{e.preventDefault();const t=document.querySelector(".modal-container"),n=document.querySelector("#task"),o=document.querySelector("#description"),r=document.querySelector("#date"),c=n.value;if(null==c||""===c)return;const s=o.value,l=r.value,a=i(c,s,l);n.value=null,o.value=null,v.find((e=>e.id===m)).tasks.push(a),t.classList.remove("active"),E()},i=(e,t,n)=>({id:Date.now().toString(),name:e,desc:t,date:n,complete:!1}),d="task.list",u="task.selectedFolder";let m=localStorage.getItem(u),v=JSON.parse(localStorage.getItem(d))||[];const y=()=>{p(),f()},p=()=>{localStorage.setItem(d,JSON.stringify(v)),localStorage.setItem(u,m)},f=()=>{const e=document.querySelector(".directory");h(e),v.forEach((t=>{const n=x("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===m&&n.classList.add("directory-active"),e.appendChild(n);const o=x("span",null,["directory-folder-icons"],null);o.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(o)}))},h=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},g=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const o=q(n);t.value=null,v.push(o),y()},k=e=>{"li"===e.target.tagName.toLowerCase()&&(m=e.target.dataset.listId,y(),s())},S=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.parentElement.dataset.listId===m&&(v=v.filter((e=>e.id!==m)),m=null,E())},L=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.parentElement.dataset.listId===m){const e=document.querySelector(".directory-modal-container");e.classList.toggle("active");const t=document.querySelector("#directory-edit-form"),n=document.querySelector(".icon-tabler-square-x");console.log("click");const o=n=>{n.preventDefault();const r=document.querySelector("#text-dir"),c=r.value;null!=c&&""!==c&&(v.forEach((e=>{e.id===m&&(e.name=c)})),r.value=null,y(),e.classList.remove("active"),t.removeEventListener("submit",o))},r=()=>{e.classList.remove("active"),t.removeEventListener("submit",o),n.removeEventListener("click",r)};n.addEventListener("click",r),t.addEventListener("submit",o)}},q=e=>({id:Date.now().toString(),name:e,tasks:[]});function x(e,t,n,o){const r=document.createElement(e);return t&&(r.id=t),n&&n.forEach((e=>r.classList.add(e))),o&&(r.textContent=o),r}const E=()=>{y(),s()};(()=>{const e=document.querySelector(".light-dark-mode");e.addEventListener("click",(function(){document.body.classList.toggle("active"),e.classList.toggle("active");const t=document.querySelector(".current-theme");e.classList.contains("active")?t.textContent="Dark Mode":t.textContent="Light Mode"}))})(),E(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",g),t.addEventListener("click",k),t.addEventListener("click",S),t.addEventListener("click",L)})(),document.querySelector(".create-task-btn").addEventListener("click",l),document.querySelector("#add-task").addEventListener("submit",a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxJQUFTMkUsRUFBUTFGLFlBQWNlLEdBRTNCMkUsRUFHWCxNQUFNcEQsRUFBUyxLQUNYVSxJQUNBekQsS0NsQmdCLE1BRXBCLE1BQU1xRixFQUFTM0YsU0FBU0MsY0FBYyxvQkFDdEMwRixFQUFPVyxpQkFBaUIsU0FFeEIsV0FDSXRHLFNBQVM0RyxLQUFLdEUsVUFBVXFELE9BQU8sVUFDL0JBLEVBQU9yRCxVQUFVcUQsT0FBTyxVQUV4QixNQUFNa0IsRUFBZTdHLFNBQVNDLGNBQWMsa0JBRXpDMEYsRUFBT3JELFVBQVVzQyxTQUFTLFVBQ3pCaUMsRUFBYTlGLFlBQWMsWUFFM0I4RixFQUFhOUYsWUFBYyxpQkRPbkMrRixHQUNBekQsSUQ4QjBCLE1BQ3RCLE1BQU0wRCxFQUFVL0csU0FBU0MsY0FBYyxpQkFDakMrRyxFQUFlaEgsU0FBU0MsY0FBYyxjQUU1QzhHLEVBQVFULGlCQUFpQixTQUFVdkIsR0FDbkNpQyxFQUFhVixpQkFBaUIsUUFBU25CLEdBQ3ZDNkIsRUFBYVYsaUJBQWlCLFFBQVNmLEdBQ3ZDeUIsRUFBYVYsaUJBQWlCLFFBQVNiLElDcEMzQ3dCLEdGWjBCakgsU0FBU0MsY0FBYyxvQkFDL0JxRyxpQkFBaUIsUUFBU2pFLEdBRXJCckMsU0FBU0MsY0FBYyxhQUMvQnFHLGlCQUFpQixTQUFVOUQsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9saXN0LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2RpcmVjdG9yeS1jcmVhdG9yLmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvdG9nZ2xlVGhlbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBjcmVhdGVIVE1MRWxlbWVudCwgcmVuZGVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IHJlbmRlckxpc3RzLCBjcmVhdGVEaXJMaXN0ZW5lciwgc2F2ZUFuZFJlbmRlckxpc3QsIGRpcmVjdG9yeUFyciwgc2VsZWN0ZWRGb2xkZXIsIGNsZWFyTGlzdCB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5cbmNvbnN0IGZvbGRlckRpc3BsYXlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG8tZG8tbGlzdCcpO1xuY29uc3QgZm9sZGVyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG8tZG8tdGl0bGUnKTtcbmNvbnN0IHRhc2tDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNvdW50Jyk7XG5jb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG5jb25zdCB0YXNrVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay10ZW1wbGF0ZScpO1xuXG5cbmNvbnN0IGxpc3RMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtdGFzay1idG4nKTtcbiAgICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVGFza01vZGFsKVxuXG4gICAgY29uc3Qgc3VibWl0VGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtdGFzaycpO1xuICAgIHN1Ym1pdFRhc2suYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybSk7XG5cbiAgICBcbn1cblxuY29uc3QgcmVuZGVyVGFza051bSA9IChzZWxlY3RlZFRhc2tOdW0pID0+IHtcbiAgICBjb25zdCBpbmNvbXBsZXRlID0gc2VsZWN0ZWRUYXNrTnVtLnRhc2tzLmZpbHRlcih0YXNrID0+ICF0YXNrLmNvbXBsZXRlKS5sZW5ndGg7XG4gICAgY29uc3QgdGFza3NTdHJpbmcgPSBpbmNvbXBsZXRlID09PSAxID8gXCJ0YXNrXCIgOiBcInRhc2tzXCI7XG4gICAgdGFza0NvdW50LnRleHRDb250ZW50ID0gYCR7aW5jb21wbGV0ZX0gJHt0YXNrc1N0cmluZ30gcmVtYWluaW5nYDtcbn1cblxuY29uc3QgcmVuZGVyVGFza0xpc3QgPSAoc2VsZWN0ZWRUYXNrTGlzdCkgPT4ge1xuICAgIHNlbGVjdGVkVGFza0xpc3QudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgY29uc3QgdGFza0RPTSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGFza1RlbXBsYXRlLmNvbnRlbnQsIHRydWUpXG4gICAgICAgIGNvbnN0IGNoZWNrQm94ID0gdGFza0RPTS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICBjaGVja0JveC5pZCA9IHRhc2suaWQ7XG4gICAgICAgIGNoZWNrQm94LmNoZWNrZWQgPSB0YXNrLmNvbXBsZXRlO1xuICAgICAgICBjb25zdCB0YXNrTmFtZSA9ICB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLW5hbWUnKTtcbiAgICAgICAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0YXNrLm5hbWU7XG5cbiAgICAgICAgY29uc3QgdGFza0Rlc2MgPSB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWRlc2MnKVxuICAgICAgICB0YXNrLmRlc2MgPyB0YXNrRGVzYy50ZXh0Q29udGVudCA9IGAgRGVzY3JpcHRpb246ICR7dGFzay5kZXNjfWAgOiB0YXNrRGVzYy50ZXh0Q29udGVudCA9ICdObyBEZXNjcmlwdGlvbi4nO1xuICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignLnRhc2stZGF0ZScpO1xuICAgICAgICB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGAgQ29tcGxldGUgYnk6ICR7dGFzay5kYXRlfWA7XG5cbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRE9NKTtcbiAgICB9KVxuICAgIFxufVxuXG5cbmNvbnN0IHJlbmRlclRhc2tzID0gKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGRpcmVjdG9yeUFyci5maW5kKGxpc3QgPT4gbGlzdC5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpO1xuXG4gICAgaWYoc2VsZWN0ZWRGb2xkZXIgPT0gbnVsbCkge1xuICAgICAgICBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvbGRlckRpc3BsYXlDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBmb2xkZXJUaXRsZS50ZXh0Q29udGVudCA9IHNlbGVjdGVkTGlzdC5uYW1lO1xuICAgICAgICByZW5kZXJUYXNrTnVtKHNlbGVjdGVkTGlzdCk7XG4gICAgICAgIGNsZWFyTGlzdCh0YXNrQ29udGFpbmVyKTtcbiAgICAgICAgcmVuZGVyVGFza0xpc3Qoc2VsZWN0ZWRMaXN0KTtcbiAgICB9XG59XG5cbi8vWU9VIFdFUkUgTEFTVCBIRVJFIFdPUktJTkcgT04gVEhJUyBORUVEIFRPIFRPR0dMRSBDTEFTUyBUTyBESVNQTEFZIE1PREFMIFRPIElOUFVUIE5FVyBUQVNLKioqKioqKlxuY29uc3QgY3JlYXRlVGFza01vZGFsID0gKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXInKVxuICAgIGxpc3RNb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn1cblxuY29uc3Qgc3VibWl0Rm9ybSA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGxpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXInKVxuICAgIGNvbnN0IHRhc2tJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzaycpO1xuICAgIGNvbnN0IHRhc2tJbnB1dERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbiAgICBjb25zdCB0YXNrSW5wdXREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKTtcbiAgICBcbiAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tJbnB1dE5hbWUudmFsdWU7XG4gICAgaWYodGFza05hbWUgPT0gbnVsbCB8fCB0YXNrTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICBjb25zdCB0YXNrRGVzYyA9IHRhc2tJbnB1dERlc2MudmFsdWU7XG4gICAgY29uc3QgdGFza0RhdGUgPSB0YXNrSW5wdXREYXRlLnZhbHVlXG4gICAgY29uc3QgdGFzayA9IGNyZWF0ZVRhc2sodGFza05hbWUsIHRhc2tEZXNjLCB0YXNrRGF0ZSk7XG4gICAgdGFza0lucHV0TmFtZS52YWx1ZSA9IG51bGw7XG4gICAgdGFza0lucHV0RGVzYy52YWx1ZSA9IG51bGw7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG4gICAgc2VsZWN0ZWRMaXN0LnRhc2tzLnB1c2godGFzayk7XG4gICAgbGlzdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHJlbmRlcigpO1xufVxuXG5jb25zdCBjcmVhdGVUYXNrID0gKHRhc2ssIGRlc2MsIGRhdGUpID0+IHtcbiAgICByZXR1cm4geyAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogdGFzaywgZGVzYzogZGVzYywgZGF0ZTogZGF0ZSwgY29tcGxldGU6IGZhbHNlLCAgfVxufVxuXG5cbmV4cG9ydCB7IHJlbmRlclRhc2tzLCBsaXN0TGlzdGVuZXJzIH0iLCJpbXBvcnQgeyBjcmVhdGVIVE1MRWxlbWVudCwgcmVuZGVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IHJlbmRlclRhc2tzIH0gZnJvbSBcIi4vbGlzdC1jcmVhdG9yXCI7XG5cbmNvbnN0IExPQ0FMX1NUT1JBR0VfRElSX0tFWSA9ICd0YXNrLmxpc3QnO1xuY29uc3QgTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZID0gJ3Rhc2suc2VsZWN0ZWRGb2xkZXInO1xuXG4vL2xvY2FsIHN0b3JhZ2Uga2V5cyArIGFycmF5XG5sZXQgc2VsZWN0ZWRGb2xkZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVkpXG5sZXQgZGlyZWN0b3J5QXJyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0RJUl9LRVkpKSB8fCBbXTsgXG5cbmNvbnN0IHNhdmVBbmRSZW5kZXJMaXN0ID0gKCkgPT4ge1xuICAgIHNhdmUoKTtcbiAgICByZW5kZXJMaXN0cygpO1xufVxuXG4vL3NhdmVzIHRvIGxvY2FsIHN0b3JhZ2VcbmNvbnN0IHNhdmUgPSAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZLCBKU09OLnN0cmluZ2lmeShkaXJlY3RvcnlBcnIpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVksIHNlbGVjdGVkRm9sZGVyKTtcbn1cblxuLy9yZW5kZXJzIHRoZSBkaXJlY3RvcnkgbGlzdFxuY29uc3QgcmVuZGVyTGlzdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0b3J5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeScpO1xuXG4gICAgY2xlYXJMaXN0KGRpcmVjdG9yeUNvbnRhaW5lcik7XG4gICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyZWN0b3J5ID0+IHtcbiAgICAgICBjb25zdCBkaXJlY3RvcnlGb2xkZXIgPSBjcmVhdGVIVE1MRWxlbWVudCgnbGknLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXInXSwgZGlyZWN0b3J5Lm5hbWUpXG4gICAgICAgZGlyZWN0b3J5Rm9sZGVyLmRhdGFzZXQubGlzdElkID0gZGlyZWN0b3J5LmlkO1xuICAgICAgIC8vaWYgdGhlIGZvbGRlciBpcyBzZWxlY3RlZCwgbWFrZSBpdCBhY3RpdmUgZm9sZGVyXG4gICAgICAgaWYoZGlyZWN0b3J5LmlkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICAgICBkaXJlY3RvcnlGb2xkZXIuY2xhc3NMaXN0LmFkZCgnZGlyZWN0b3J5LWFjdGl2ZScpO1xuICAgICAgIH07XG4gICAgICAgZGlyZWN0b3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlcik7IFxuXG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVySWNvbnMgPSBjcmVhdGVIVE1MRWxlbWVudCgnc3BhbicsIG51bGwsIFsnZGlyZWN0b3J5LWZvbGRlci1pY29ucyddLCBudWxsKTtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXJJY29ucy5pbm5lckhUTUwgPSAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi1lZGl0XCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tZWRpdFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTQgMjBoNGwxMC41IC0xMC41YTEuNSAxLjUgMCAwIDAgLTQgLTRsLTEwLjUgMTAuNXY0XCIgLz48bGluZSB4MT1cIjEzLjVcIiB5MT1cIjYuNVwiIHgyPVwiMTcuNVwiIHkyPVwiMTAuNVwiIC8+PC9zdmc+PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi10cmFzaFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRyYXNoXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiNmZmZmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxsaW5lIHgxPVwiNFwiIHkxPVwiN1wiIHgyPVwiMjBcIiB5Mj1cIjdcIiAvPjxsaW5lIHgxPVwiMTBcIiB5MT1cIjExXCIgeDI9XCIxMFwiIHkyPVwiMTdcIiAvPjxsaW5lIHgxPVwiMTRcIiB5MT1cIjExXCIgeDI9XCIxNFwiIHkyPVwiMTdcIiAvPjxwYXRoIGQ9XCJNNSA3bDEgMTJhMiAyIDAgMCAwIDIgMmg4YTIgMiAwIDAgMCAyIC0ybDEgLTEyXCIgLz48cGF0aCBkPVwiTTkgN3YtM2ExIDEgMCAwIDEgMSAtMWg0YTEgMSAwIDAgMSAxIDF2M1wiIC8+PC9zdmc+PC9idXR0b24+JztcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIGFkZCB0aGUgaWNvbnNcbiAgICAgICBpZihkaXJlY3RvcnlGb2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXJlY3RvcnktYWN0aXZlJykpIHtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXIuYXBwZW5kQ2hpbGQoZGlyZWN0b3J5Rm9sZGVySWNvbnMpO1xuICAgICAgIH07XG4gICAgfSlcbn07XG5cbi8vY2xlYXJzIHRoZSBkaXJlY3RvcnkgbGlzdCB0byBiZSByZS1yZW5kZXJlZCBpbiByZW5kZXJMaXN0c1xuY29uc3QgY2xlYXJMaXN0ID0gKGxpc3QpID0+IHtcbiAgICB3aGlsZShsaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbGlzdC5yZW1vdmVDaGlsZChsaXN0LmZpcnN0Q2hpbGQpXG4gICAgfVxufTtcblxuLy9hZGRzIGV2ZW50bGlzdGVuZXJzIGZvciB0aGUgZGlyZWN0b3J5XG5jb25zdCBjcmVhdGVEaXJMaXN0ZW5lciA9ICgpID0+IHtcbiAgICBjb25zdCBkaXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1kaXItZm9ybScpO1xuICAgIGNvbnN0IGRpckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGRpckZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgY3JlYXRlRGlyZWN0b3J5KVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlRGlyKVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXREaXIpXG59XG5cbi8vY3JlYXRlcyBhIG5ldyBkaXJlY3RvcnkgZm9sZGVyXG5jb25zdCBjcmVhdGVEaXJlY3RvcnkgPSAoZSkgPT4ge1xuICAgIGNvbnN0IGRpclRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWRpci1idG4tdGV4dCcpO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGRpck5hbWUgPSBkaXJUZXh0LnZhbHVlO1xuICAgIGlmKGRpck5hbWUgPT0gbnVsbCB8fCBkaXJOYW1lID09PSAnJykgcmV0dXJuO1xuICAgIGNvbnN0IGRpcmVjdG9yeSA9IGNyZWF0ZU5ld0RpcihkaXJOYW1lKTtcbiAgICBkaXJUZXh0LnZhbHVlID0gbnVsbDtcbiAgICBkaXJlY3RvcnlBcnIucHVzaChkaXJlY3RvcnkpO1xuICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG59XG5cbi8vZnVuY3Rpb24gZm9yIHRoZSBzZWxlY3RlZCBkaXJlY3RvcnkgbGlzdGVuZXJcbmNvbnN0IHNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2xpJykge1xuICAgICAgICBzZWxlY3RlZEZvbGRlciA9IGUudGFyZ2V0LmRhdGFzZXQubGlzdElkO1xuICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICByZW5kZXJUYXNrcygpO1xuICAgIH1cbn1cblxuLy9mdW5jdGlvbiBmb3IgdGhlIGRlbGV0ZWRpciBsaXN0ZW5lciBcbmNvbnN0IGRlbGV0ZURpciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLXRyYXNoJykgJiYgZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5saXN0SWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgIGRpcmVjdG9yeUFyciA9IGRpcmVjdG9yeUFyci5maWx0ZXIoZGlyZWN0b3J5ID0+IGRpcmVjdG9yeS5pZCAhPT0gc2VsZWN0ZWRGb2xkZXIpO1xuICAgICAgICBzZWxlY3RlZEZvbGRlciA9IG51bGw7XG4gICAgICAgIC8vIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgICAgIC8vIHJlbmRlclRhc2tzKCk7XG4gICAgICAgIHJlbmRlcigpO1xuICAgIH1cbn1cbi8vRWRpdGluZyB0aGUgZGlyZWN0b3J5IGZvbGRlciB0aXRsZSBhbmQgdXBkYXRpbmcgdGhlIGFycmF5ICsgRE9NXG5jb25zdCBlZGl0RGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tZWRpdCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnktbW9kYWwtY29udGFpbmVyJyk7XG4gICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICBjb25zdCBlZGl0RGlyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RpcmVjdG9yeS1lZGl0LWZvcm0nKTtcbiAgICAgICAgY29uc3QgY2xvc2VFZGl0RGlyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljb24tdGFibGVyLXNxdWFyZS14Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xuXG4gICAgICAgIGNvbnN0IGVkaXREaXJGb3JtID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZXh0LWRpcicpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5UmVOYW1lID0gZGlyZWN0b3J5TW9kYWxUZXh0LnZhbHVlO1xuICAgICAgICAgICAgaWYoZGlyZWN0b3J5UmVOYW1lID09IG51bGwgfHwgZGlyZWN0b3J5UmVOYW1lID09PSAnJykgcmV0dXJuO1xuICAgICAgICAgICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyID0+IHtcbiAgICAgICAgICAgICAgICBpZihkaXIuaWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpci5uYW1lID0gZGlyZWN0b3J5UmVOYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAgICAgZGlyZWN0b3J5TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlZGl0RGlyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpciA9ICgpID0+IHtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgICAgICBjbG9zZUVkaXREaXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXREaXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VFZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VFZGl0RGlyKTtcbiAgICAgICAgZWRpdERpckJ0bi5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgfVxuICAgIFxuXG59XG5cbi8vY3JlYXRlcyBhIGRpcmVjdG9yeSBmb2xkZXIgb2JqZWN0IHRvIGJlIHB1c2hlZCBpbnRvIGRpcmVjdG9yeSBhcnJheVxuY29uc3QgY3JlYXRlTmV3RGlyID0gKGRpcikgPT4ge1xuICAgcmV0dXJuIHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogZGlyLCB0YXNrczogW10gfVxufVxuXG5leHBvcnQgeyByZW5kZXJMaXN0cywgY3JlYXRlRGlyTGlzdGVuZXIsIHNhdmVBbmRSZW5kZXJMaXN0LCBkaXJlY3RvcnlBcnIsIHNlbGVjdGVkRm9sZGVyLCBjbGVhckxpc3QgfSIsImltcG9ydCB7IGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCwgcmVuZGVyTGlzdHMsIGRpcmVjdG9yeUFyciwgc2VsZWN0ZWRGb2xkZXIgfSBmcm9tIFwiLi9kaXJlY3RvcnktY3JlYXRvclwiO1xuaW1wb3J0IHsgdG9nZ2xlVGhlbWUgfSBmcm9tIFwiLi90b2dnbGVUaGVtZVwiO1xuaW1wb3J0IHsgcmVuZGVyVGFza3MsIGxpc3RMaXN0ZW5lcnMgfSBmcm9tIFwiLi9saXN0LWNyZWF0b3JcIlxuXG5mdW5jdGlvbiBjcmVhdGVIVE1MRWxlbWVudCh0eXBlLCBpZCwgY2xhc3NlcywgY29udGVudCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuXG4gICAgaWYoaWQpIGVsZW1lbnQuaWQgPSBpZDtcbiAgICBpZihjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgobXlDbGFzcykgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKG15Q2xhc3MpKTtcbiAgICB9O1xuICAgIGlmKGNvbnRlbnQpIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5jb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICByZW5kZXJUYXNrcygpO1xufVxuXG50b2dnbGVUaGVtZSgpO1xucmVuZGVyKCk7XG5jcmVhdGVEaXJMaXN0ZW5lcigpO1xubGlzdExpc3RlbmVycygpO1xuXG5leHBvcnQge1xuICAgIGNyZWF0ZUhUTUxFbGVtZW50LCByZW5kZXJcbn0iLCJjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHtcblxuY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpZ2h0LWRhcmstbW9kZScpO1xudG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTW9kZSk7XG5cbmZ1bmN0aW9uIHRvZ2dsZU1vZGUoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG5cbiAgICBjb25zdCBjdXJyZW50VGhlbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC10aGVtZScpO1xuXG4gICAgaWYodG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsgXG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdEYXJrIE1vZGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdMaWdodCBNb2RlJztcbiAgICB9O1xufVxufVxuXG5leHBvcnQgeyB0b2dnbGVUaGVtZSB9Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZm9sZGVyRGlzcGxheUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvbGRlclRpdGxlIiwidGFza0NvdW50IiwidGFza0NvbnRhaW5lciIsInRhc2tUZW1wbGF0ZSIsInJlbmRlclRhc2tzIiwic2VsZWN0ZWRMaXN0IiwiZGlyZWN0b3J5QXJyIiwiZmluZCIsImxpc3QiLCJpZCIsInNlbGVjdGVkRm9sZGVyIiwic3R5bGUiLCJkaXNwbGF5IiwidGV4dENvbnRlbnQiLCJuYW1lIiwic2VsZWN0ZWRUYXNrTnVtIiwiaW5jb21wbGV0ZSIsInRhc2tzIiwiZmlsdGVyIiwidGFzayIsImNvbXBsZXRlIiwibGVuZ3RoIiwidGFza3NTdHJpbmciLCJyZW5kZXJUYXNrTnVtIiwiY2xlYXJMaXN0IiwiZm9yRWFjaCIsInRhc2tET00iLCJpbXBvcnROb2RlIiwiY29udGVudCIsImNoZWNrQm94IiwiY2hlY2tlZCIsInRhc2tEZXNjIiwiZGVzYyIsImRhdGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRhc2tNb2RhbCIsImNsYXNzTGlzdCIsImFkZCIsInN1Ym1pdEZvcm0iLCJlIiwicHJldmVudERlZmF1bHQiLCJsaXN0TW9kYWwiLCJ0YXNrSW5wdXROYW1lIiwidGFza0lucHV0RGVzYyIsInRhc2tJbnB1dERhdGUiLCJ0YXNrTmFtZSIsInZhbHVlIiwidGFza0RhdGUiLCJjcmVhdGVUYXNrIiwicHVzaCIsInJlbW92ZSIsInJlbmRlciIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsIkxPQ0FMX1NUT1JBR0VfRElSX0tFWSIsIkxPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzYXZlQW5kUmVuZGVyTGlzdCIsInNhdmUiLCJyZW5kZXJMaXN0cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkaXJlY3RvcnlDb250YWluZXIiLCJkaXJlY3RvcnkiLCJkaXJlY3RvcnlGb2xkZXIiLCJjcmVhdGVIVE1MRWxlbWVudCIsImRhdGFzZXQiLCJsaXN0SWQiLCJkaXJlY3RvcnlGb2xkZXJJY29ucyIsImlubmVySFRNTCIsImNvbnRhaW5zIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY3JlYXRlRGlyZWN0b3J5IiwiZGlyVGV4dCIsImRpck5hbWUiLCJjcmVhdGVOZXdEaXIiLCJzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiZGVsZXRlRGlyIiwicGFyZW50RWxlbWVudCIsImVkaXREaXIiLCJkaXJlY3RvcnlNb2RhbCIsInRvZ2dsZSIsImVkaXREaXJCdG4iLCJjbG9zZUVkaXREaXJCdG4iLCJjb25zb2xlIiwibG9nIiwiZWRpdERpckZvcm0iLCJkaXJlY3RvcnlNb2RhbFRleHQiLCJkaXJlY3RvcnlSZU5hbWUiLCJkaXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VFZGl0RGlyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJjbGFzc2VzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwiYm9keSIsImN1cnJlbnRUaGVtZSIsInRvZ2dsZVRoZW1lIiwiZGlyRm9ybSIsImRpckNvbnRhaW5lciIsImNyZWF0ZURpckxpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==