(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>h});const t="task.list",n="task.selectedFolder";let o=localStorage.getItem(n),r=JSON.parse(localStorage.getItem(t))||[];const l=()=>{a(),i()},a=()=>{localStorage.setItem(t,JSON.stringify(r)),localStorage.setItem(n,o)},i=()=>{const e=document.querySelector(".directory");s(e),r.forEach((t=>{const n=h("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===o&&n.classList.add("directory-active"),e.appendChild(n);const r=h("span",null,["directory-folder-icons"],null);r.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(r)}))},s=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},c=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const o=f(n);t.value=null,r.push(o),l()},d=e=>{"li"===e.target.tagName.toLowerCase()&&(o=e.target.dataset.listId,l())},u=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.parentElement.dataset.listId===o&&(r=r.filter((e=>e.id!==o)),o=null,l())},m=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.parentElement.dataset.listId===o){document.querySelector(".directory-modal-container").classList.toggle("active");const e=document.querySelector("#directory-edit-form"),t=n=>{n.preventDefault();const a=document.querySelector("#text-dir"),i=a.value;null!=i&&""!==i&&(r.forEach((e=>{e.id===o&&(e.name=i)})),a.value=null,l(),document.querySelector(".directory-modal-container").classList.toggle("active"),e.removeEventListener("submit",t))};e.addEventListener("submit",t)}},f=e=>({id:Date.now().toString(),name:e,tasks:[]});function h(e,t,n,o){const r=document.createElement(e);return t&&(r.id=t),n&&n.forEach((e=>r.classList.add(e))),o&&(r.textContent=o),r}document.querySelector("#header"),document.querySelector("#sidebar"),document.querySelector("#main"),document.querySelector("#footer"),l(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",c),t.addEventListener("click",d),t.addEventListener("click",u),t.addEventListener("click",m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDWixDQUFFL0IsR0FBSWtDLEtBQUtDLE1BQU1DLFdBQVl2QyxLQUFNa0MsRUFBS00sTUFBTyxLQ2xIekQsU0FBU3pDLEVBQWtCMEMsRUFBTXRDLEVBQUl1QyxFQUFTQyxHQUMxQyxNQUFNQyxFQUFVbkQsU0FBU29ELGNBQWNKLEdBUXZDLE9BTkd0QyxJQUFJeUMsRUFBUXpDLEdBQUtBLEdBQ2pCdUMsR0FDQ0EsRUFBUTlDLFNBQVNrRCxHQUFZRixFQUFReEMsVUFBVUMsSUFBSXlDLEtBRXBESCxJQUFTQyxFQUFRRyxZQUFjSixHQUUzQkMsRUFkSW5ELFNBQVNDLGNBQWMsV0FDdEJELFNBQVNDLGNBQWMsWUFDMUJELFNBQVNDLGNBQWMsU0FDckJELFNBQVNDLGNBQWMsV0FldENQLElEOEIwQixNQUN0QixNQUFNNkQsRUFBVXZELFNBQVNDLGNBQWMsaUJBQ2pDdUQsRUFBZXhELFNBQVNDLGNBQWMsY0FFNUNzRCxFQUFRWixpQkFBaUIsU0FBVXZCLEdBQ25Db0MsRUFBYWIsaUJBQWlCLFFBQVNmLEdBQ3ZDNEIsRUFBYWIsaUJBQWlCLFFBQVNYLEdBQ3ZDd0IsRUFBYWIsaUJBQWlCLFFBQVNSLElDcEMzQ3NCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvZGlyZWN0b3J5LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0RJUl9LRVkgPSAndGFzay5saXN0JztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSA9ICd0YXNrLnNlbGVjdGVkRm9sZGVyJztcblxuLy9sb2NhbCBzdG9yYWdlIGtleXMgKyBhcnJheVxubGV0IHNlbGVjdGVkRm9sZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZKVxubGV0IGRpcmVjdG9yeUFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZKSkgfHwgW107IFxuXG5jb25zdCBzYXZlQW5kUmVuZGVyTGlzdCA9ICgpID0+IHtcbiAgICBzYXZlKCk7XG4gICAgcmVuZGVyTGlzdHMoKTtcbn1cblxuLy9zYXZlcyB0byBsb2NhbCBzdG9yYWdlXG5jb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5QXJyKSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZLCBzZWxlY3RlZEZvbGRlcik7XG59XG5cbi8vcmVuZGVycyB0aGUgZGlyZWN0b3J5IGxpc3RcbmNvbnN0IHJlbmRlckxpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdG9yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGNsZWFyTGlzdChkaXJlY3RvcnlDb250YWluZXIpO1xuICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpcmVjdG9yeSA9PiB7XG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVyID0gY3JlYXRlSFRNTEVsZW1lbnQoJ2xpJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyJ10sIGRpcmVjdG9yeS5uYW1lKVxuICAgICAgIGRpcmVjdG9yeUZvbGRlci5kYXRhc2V0Lmxpc3RJZCA9IGRpcmVjdG9yeS5pZDtcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIG1ha2UgaXQgYWN0aXZlIGZvbGRlclxuICAgICAgIGlmKGRpcmVjdG9yeS5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdG9yeS1hY3RpdmUnKTtcbiAgICAgICB9O1xuICAgICAgIGRpcmVjdG9yeUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXIpOyBcblxuICAgICAgIGNvbnN0IGRpcmVjdG9yeUZvbGRlckljb25zID0gY3JlYXRlSFRNTEVsZW1lbnQoJ3NwYW4nLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXItaWNvbnMnXSwgbnVsbCk7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVySWNvbnMuaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9XCJidXR0b24tZWRpdFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLWVkaXRcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk00IDIwaDRsMTAuNSAtMTAuNWExLjUgMS41IDAgMCAwIC00IC00bC0xMC41IDEwLjV2NFwiIC8+PGxpbmUgeDE9XCIxMy41XCIgeTE9XCI2LjVcIiB4Mj1cIjE3LjVcIiB5Mj1cIjEwLjVcIiAvPjwvc3ZnPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJidXR0b24tdHJhc2hcIj48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi10cmFzaFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48bGluZSB4MT1cIjRcIiB5MT1cIjdcIiB4Mj1cIjIwXCIgeTI9XCI3XCIgLz48bGluZSB4MT1cIjEwXCIgeTE9XCIxMVwiIHgyPVwiMTBcIiB5Mj1cIjE3XCIgLz48bGluZSB4MT1cIjE0XCIgeTE9XCIxMVwiIHgyPVwiMTRcIiB5Mj1cIjE3XCIgLz48cGF0aCBkPVwiTTUgN2wxIDEyYTIgMiAwIDAgMCAyIDJoOGEyIDIgMCAwIDAgMiAtMmwxIC0xMlwiIC8+PHBhdGggZD1cIk05IDd2LTNhMSAxIDAgMCAxIDEgLTFoNGExIDEgMCAwIDEgMSAxdjNcIiAvPjwvc3ZnPjwvYnV0dG9uPic7XG4gICAgICAgLy9pZiB0aGUgZm9sZGVyIGlzIHNlbGVjdGVkLCBhZGQgdGhlIGljb25zXG4gICAgICAgaWYoZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5jb250YWlucygnZGlyZWN0b3J5LWFjdGl2ZScpKSB7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlckljb25zKTtcbiAgICAgICB9O1xuICAgIH0pXG59O1xuXG4vL2NsZWFycyB0aGUgZGlyZWN0b3J5IGxpc3QgdG8gYmUgcmUtcmVuZGVyZWQgaW4gcmVuZGVyTGlzdHNcbmNvbnN0IGNsZWFyTGlzdCA9IChsaXN0KSA9PiB7XG4gICAgd2hpbGUobGlzdC5maXJzdENoaWxkKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKVxuICAgIH1cbn07XG5cbi8vYWRkcyBldmVudGxpc3RlbmVycyBmb3IgdGhlIGRpcmVjdG9yeVxuY29uc3QgY3JlYXRlRGlyTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZGlyLWZvcm0nKTtcbiAgICBjb25zdCBkaXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5Jyk7XG5cbiAgICBkaXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGNyZWF0ZURpcmVjdG9yeSlcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyKVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZURpcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0RGlyKVxufVxuXG4vL2NyZWF0ZXMgYSBuZXcgZGlyZWN0b3J5IGZvbGRlclxuY29uc3QgY3JlYXRlRGlyZWN0b3J5ID0gKGUpID0+IHtcbiAgICBjb25zdCBkaXJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1kaXItYnRuLXRleHQnKTtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBkaXJOYW1lID0gZGlyVGV4dC52YWx1ZTtcbiAgICBpZihkaXJOYW1lID09IG51bGwgfHwgZGlyTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICBjb25zdCBkaXJlY3RvcnkgPSBjcmVhdGVOZXdEaXIoZGlyTmFtZSk7XG4gICAgZGlyVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgZGlyZWN0b3J5QXJyLnB1c2goZGlyZWN0b3J5KTtcbiAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgc2VsZWN0ZWQgZGlyZWN0b3J5IGxpc3RlbmVyXG5jb25zdCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdsaScpIHtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBlLnRhcmdldC5kYXRhc2V0Lmxpc3RJZDtcbiAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICB9XG59XG5cbi8vZnVuY3Rpb24gZm9yIHRoZSBkZWxldGVkaXIgbGlzdGVuZXIgXG5jb25zdCBkZWxldGVEaXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWNvbi10cmFzaCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBkaXJlY3RvcnlBcnIgPSBkaXJlY3RvcnlBcnIuZmlsdGVyKGRpcmVjdG9yeSA9PiBkaXJlY3RvcnkuaWQgIT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBudWxsO1xuICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgIH1cbn1cbi8vRWRpdGluZyB0aGUgZGlyZWN0b3J5IGZvbGRlciB0aXRsZSBhbmQgdXBkYXRpbmcgdGhlIGFycmF5ICsgRE9NXG5jb25zdCBlZGl0RGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tZWRpdCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnktbW9kYWwtY29udGFpbmVyJyk7XG4gICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICBjb25zdCBlZGl0RGlyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RpcmVjdG9yeS1lZGl0LWZvcm0nKTtcblxuICAgICAgICBjb25zdCBlZGl0RGlyRm9ybSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGV4dC1kaXInKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeVJlTmFtZSA9IGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZTtcbiAgICAgICAgICAgIGlmKGRpcmVjdG9yeVJlTmFtZSA9PSBudWxsIHx8IGRpcmVjdG9yeVJlTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICAgICAgICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpciA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZGlyLmlkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBkaXIubmFtZSA9IGRpcmVjdG9yeVJlTmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbFRleHQudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeS1tb2RhbC1jb250YWluZXInKTtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBlZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKVxuICAgIH1cbiAgICBcblxufVxuXG4vL2NyZWF0ZXMgYSBkaXJlY3RvcnkgZm9sZGVyIG9iamVjdCB0byBiZSBwdXNoZWQgaW50byBkaXJlY3RvcnkgYXJyYXlcbmNvbnN0IGNyZWF0ZU5ld0RpciA9IChkaXIpID0+IHtcbiAgIHJldHVybiB7IGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IGRpciwgdGFza3M6IFtdIH1cbn1cblxuZXhwb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IiwiaW1wb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5cblxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlcicpO1xuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyJyk7XG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4nKTtcbmNvbnN0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXInKTtcblxuZnVuY3Rpb24gY3JlYXRlSFRNTEVsZW1lbnQodHlwZSwgaWQsIGNsYXNzZXMsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgIGlmKGlkKSBlbGVtZW50LmlkID0gaWQ7XG4gICAgaWYoY2xhc3Nlcykge1xuICAgICAgICBjbGFzc2VzLmZvckVhY2goKG15Q2xhc3MpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChteUNsYXNzKSk7XG4gICAgfTtcbiAgICBpZihjb250ZW50KSBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcblxuICAgIHJldHVybiBlbGVtZW50O1xufTtcblxuXG5zYXZlQW5kUmVuZGVyTGlzdCgpO1xuY3JlYXRlRGlyTGlzdGVuZXIoKTtcblxuZXhwb3J0IHtcbiAgICBjcmVhdGVIVE1MRWxlbWVudFxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkxPQ0FMX1NUT1JBR0VfRElSX0tFWSIsIkxPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSIsInNlbGVjdGVkRm9sZGVyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRpcmVjdG9yeUFyciIsIkpTT04iLCJwYXJzZSIsInNhdmVBbmRSZW5kZXJMaXN0Iiwic2F2ZSIsInJlbmRlckxpc3RzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRpcmVjdG9yeUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFyTGlzdCIsImZvckVhY2giLCJkaXJlY3RvcnkiLCJkaXJlY3RvcnlGb2xkZXIiLCJjcmVhdGVIVE1MRWxlbWVudCIsIm5hbWUiLCJkYXRhc2V0IiwibGlzdElkIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImRpcmVjdG9yeUZvbGRlckljb25zIiwiaW5uZXJIVE1MIiwiY29udGFpbnMiLCJsaXN0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY3JlYXRlRGlyZWN0b3J5IiwiZSIsImRpclRleHQiLCJwcmV2ZW50RGVmYXVsdCIsImRpck5hbWUiLCJ2YWx1ZSIsImNyZWF0ZU5ld0RpciIsInB1c2giLCJzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiZGVsZXRlRGlyIiwicGFyZW50RWxlbWVudCIsImZpbHRlciIsImVkaXREaXIiLCJ0b2dnbGUiLCJlZGl0RGlyQnRuIiwiZWRpdERpckZvcm0iLCJkaXJlY3RvcnlNb2RhbFRleHQiLCJkaXJlY3RvcnlSZU5hbWUiLCJkaXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRhc2tzIiwidHlwZSIsImNsYXNzZXMiLCJjb250ZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwidGV4dENvbnRlbnQiLCJkaXJGb3JtIiwiZGlyQ29udGFpbmVyIiwiY3JlYXRlRGlyTGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9