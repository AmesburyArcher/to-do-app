(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>I,s:()=>M});const t=()=>{document.querySelector(".current-date").textContent=n()};function n(){const e=new Date;let t=1==e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),n=1==e.getHours().toString().length?"0"+e.getHours():e.getHours(),o=e.getHours()>=12?"pm":"am";return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()+" "+e.getFullYear()+" "+n+":"+t+o}const o=document.querySelector("#to-do-list"),a=document.querySelector(".to-do-title"),r=document.querySelector(".task-count"),s=document.querySelector(".tasks"),d=document.querySelector("#task-template"),i=e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";r.textContent=`${t} ${n} remaining`},l=e=>{const t=k.find((e=>e.id===p)),n=e.target.parentNode.parentNode,o=Array.from(n.parentNode.children).indexOf(n),a=document.querySelector(".task-edit"),r=document.querySelector(".description-edit"),s=document.querySelector(".date-edit");let d=t.tasks[o];const i=document.querySelector(".modal-container-edit"),l=document.querySelector("#add-task-edit");if(e.target.classList.contains("edit-task-icon")||e.target.classList.contains("edit-task")){a.value=d.name,d.desc?r.value=d.desc:r.value="",d.date?s.value=d.date:s.value="",i.classList.add("active");const e=t=>{t.preventDefault(),d.name=a.value,d.desc=r.value,d.date=s.value,d="",i.classList.remove("active"),l.removeEventListener("submit",e),c(),S()},t=()=>{l.removeEventListener("submit",e),i.classList.remove("active"),n.removeEventListener("click",t)},n=document.querySelector(".close-task-modal-edit");n.addEventListener("click",t),l.addEventListener("submit",e)}},c=()=>{const e=k.find((e=>e.id===p));null==e?o.style.display="none":(o.style.display="",a.textContent=e.name,i(e),h(s),e.tasks.forEach((e=>{const t=document.importNode(d.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete,t.querySelector(".task-name").textContent=e.name;const o=t.querySelector(".task-desc");e.desc?o.textContent=` Description: ${e.desc}`:o.textContent="No Description";const a=t.querySelector(".task-date");e.date?a.textContent=` Complete by: ${e.date}`:a.textContent="No Completion Date",t.querySelector(".task-posted").textContent=`Posted on: ${e.posted}`,t.querySelector(".edit-task").innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="edit-task-icon" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg>',s.appendChild(t)})))},u=e=>{e.preventDefault();const t=document.querySelector(".modal-container"),o=document.querySelector("#task"),a=document.querySelector("#description"),r=document.querySelector("#date"),s=n(),d=o.value;if(null==d||""===d)return;const i=a.value,l=r.value,c=m(d,i,l,s);o.value=null,a.value=null,r.value=null,k.find((e=>e.id===p)).tasks.push(c),t.classList.remove("active"),M()},m=(e,t,n,o)=>({id:Date.now().toString(),name:e,desc:t,date:n,posted:o,complete:!1}),v="task.list",y="task.selectedFolder";let p=localStorage.getItem(y),k=JSON.parse(localStorage.getItem(v))||[];const g=()=>{S(),f()},S=()=>{localStorage.setItem(v,JSON.stringify(k)),localStorage.setItem(y,p)},f=()=>{const e=document.querySelector(".directory");h(e),k.forEach((t=>{const n=I("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===p&&n.classList.add("directory-active"),e.appendChild(n);const o=I("span",null,["directory-folder-icons"],null);o.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(o)}))},h=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},L=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const o=x(n);t.value=null,k.push(o),g()},q=e=>{"li"===e.target.tagName.toLowerCase()&&(p=e.target.dataset.listId,g(),c())},E=e=>{(e.target.classList.contains("icon-trash")||e.target.classList.contains("button-trash"))&&(e.target.parentElement.parentElement.parentElement.dataset.listId!==p&&e.target.parentElement.parentElement.dataset.listId!==p||(k=k.filter((e=>e.id!==p)),p=null,M()))},b=e=>{if((e.target.classList.contains("icon-edit")||e.target.classList.contains("button-edit"))&&(e.target.parentElement.parentElement.parentElement.dataset.listId===p||e.target.parentElement.parentElement.dataset.listId===p)){const e=document.querySelector(".directory-modal-container");e.classList.toggle("active");const t=document.querySelector("#directory-edit-form"),n=document.querySelector(".icon-tabler-square-x"),o=n=>{n.preventDefault();const a=document.querySelector("#text-dir"),r=a.value;null!=r&&""!==r&&(k.forEach((e=>{e.id===p&&(e.name=r)})),a.value=null,g(),c(),e.classList.remove("active"),t.removeEventListener("submit",o))},a=()=>{e.classList.remove("active"),t.removeEventListener("submit",o),n.removeEventListener("click",a)};n.addEventListener("click",a),t.addEventListener("submit",o)}},x=e=>({id:Date.now().toString(),name:e,tasks:[]}),w=()=>{const e=document.querySelector("#date"),t=document.querySelector("#add-task");let n=(new Date).toISOString().slice(0,10).split("-"),o=e.value;return o=o.split("-"),n=parseInt(n.join("")),o=parseInt(o.join("")),n-o<=1?(e.setCustomValidity(""),t.addEventListener("submit",u),!1):(e.setCustomValidity("Inputted date must be equal to current date or beyond"),e.reportValidity(),t.removeEventListener("submit",u),!0)},C=()=>{const e=document.querySelector(".date-edit"),t=document.querySelector("#add-task-edit");let n=(new Date).toISOString().slice(0,10).split("-"),o=e.value;return o=o.split("-"),n=parseInt(n.join("")),o=parseInt(o.join("")),n-o<=1?(e.setCustomValidity(""),t.addEventListener("submit",l),!1):(e.setCustomValidity("Inputted date must be equal to current date or beyond"),e.reportValidity(),t.removeEventListener("submit",l),!0)};function I(e,t,n,o){const a=document.createElement(e);return t&&(a.id=t),n&&n.forEach((e=>a.classList.add(e))),o&&(a.textContent=o),a}const M=()=>{g(),c()};setInterval(t,1e3),(()=>{const e=document.querySelector(".light-dark-mode");e.addEventListener("click",(function(){t=localStorage.getItem("darkMode"),"enabled"!==t?(localStorage.setItem("darkMode","enabled"),document.body.classList.add("active"),e.classList.add("active")):(localStorage.setItem("darkMode",null),document.body.classList.remove("active"),e.classList.remove("active")),e.classList.contains("active")?n.textContent="Dark Mode":n.textContent="Light Mode"}));let t=localStorage.getItem("darkMode");const n=document.querySelector(".current-theme");"enabled"===t&&(localStorage.setItem("darkMode","enabled"),document.body.classList.add("active"),e.classList.add("active"),n.textContent="Dark Mode")})(),M(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",L),t.addEventListener("click",q),t.addEventListener("click",E),t.addEventListener("click",b)})(),document.querySelector(".create-task-btn").addEventListener("click",(()=>{document.querySelector(".modal-container").classList.add("active")})),document.querySelector("#add-task").addEventListener("submit",u),s.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=k.find((e=>e.id===p));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,S(),i(t)}})),s.addEventListener("click",l),document.querySelector(".delete-tasks").addEventListener("click",(()=>{const e=k.find((e=>e.id===p));e.tasks=e.tasks.filter((e=>!e.complete)),M()})),document.querySelector(".close-task-modal").addEventListener("click",(()=>{document.querySelector(".modal-container").classList.remove("active")})),t(),document.querySelector("#date").addEventListener("input",w),document.querySelector("#add-task").addEventListener("submit",(e=>{const t=document.querySelector("#task"),n=document.querySelector("#date");t.validity.valid||(e.preventDefault(),t.setCustomValidity("You must enter a task name"),t.reportValidity()),n.value.length>1&&(n.required=!0,!0===w()?(e.preventDefault(),w()):n.required=!1)})),document.querySelector(".date-edit").addEventListener("input",C),document.querySelector("#add-task").addEventListener("submit",(e=>{const t=document.querySelector(".task-edit"),n=document.querySelector(".date-edit");t.validity.valid||(e.preventDefault(),t.setCustomValidity("You must enter a task name"),t.reportValidity()),n.value.length>1&&(n.required=!0,!0===C()?(e.preventDefault(),C()):n.required=!1)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8tYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2RhdGUuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2xpc3QtY3JlYXRvci5qcyIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvZGlyZWN0b3J5LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy90b2dnbGVUaGVtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IGRpc3BsYXlEYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGRhdGVET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC1kYXRlJyk7XG4gICAgZGF0ZURPTS50ZXh0Q29udGVudCA9IGZvcm1hdEFNUE0oKVxufVxuXG5cbi8vIGNyZWF0ZXMgdGhlIGN1cnJlbnQgZGF0ZSBhdCB0aW1lIG9mIGV4ZWN1dGlvblxuZnVuY3Rpb24gZm9ybWF0QU1QTSgpIHtcbiAgICBjb25zdCBkID0gbmV3IERhdGUoKVxuICAgIGxldCBtaW51dGVzID0gZC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT0gMSA/ICcwJytkLmdldE1pbnV0ZXMoKSA6IGQuZ2V0TWludXRlcygpO1xuICAgIGxldCBob3VycyA9IGQuZ2V0SG91cnMoKS50b1N0cmluZygpLmxlbmd0aCA9PSAxID8gJzAnK2QuZ2V0SG91cnMoKSA6IGQuZ2V0SG91cnMoKTtcbiAgICBsZXQgYW1wbSA9IGQuZ2V0SG91cnMoKSA+PSAxMiA/ICdwbScgOiAnYW0nO1xuICAgIGxldCBtb250aHMgPSBbJ0phbicsJ0ZlYicsJ01hcicsJ0FwcicsJ01heScsJ0p1bicsJ0p1bCcsJ0F1ZycsJ1NlcCcsJ09jdCcsJ05vdicsJ0RlYyddO1xuICAgIGxldCBkYXlzID0gWydTdW4nLCdNb24nLCdUdWUnLCdXZWQnLCdUaHUnLCdGcmknLCdTYXQnXTtcbiAgICByZXR1cm4gZGF5c1tkLmdldERheSgpXSsnICcrbW9udGhzW2QuZ2V0TW9udGgoKV0rJyAnK2QuZ2V0RGF0ZSgpKycgJytkLmdldEZ1bGxZZWFyKCkrJyAnK2hvdXJzKyc6JyttaW51dGVzK2FtcG07XG4gICAgfVxuXG5leHBvcnQgeyBkaXNwbGF5RGF0ZSwgZm9ybWF0QU1QTSB9IiwiaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IGRpcmVjdG9yeUFyciwgc2VsZWN0ZWRGb2xkZXIsIGNsZWFyTGlzdCwgc2F2ZSB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5pbXBvcnQgeyBmb3JtYXRBTVBNIH0gZnJvbSBcIi4vZGF0ZVwiO1xuXG5cbmNvbnN0IGZvbGRlckRpc3BsYXlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG8tZG8tbGlzdCcpO1xuY29uc3QgZm9sZGVyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG8tZG8tdGl0bGUnKTtcbmNvbnN0IHRhc2tDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNvdW50Jyk7XG5jb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG5jb25zdCB0YXNrVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay10ZW1wbGF0ZScpO1xuXG4vLyBjcmVhdGVzIGxpc3RlbmVycyBmb3IgdGFza3NcbmNvbnN0IGxpc3RMaXN0ZW5lcnMgPSAoKSA9PiB7XG5cbiAgICAvLyBjcmVhdGUgbmV3IHRhc2sgYnV0dG9uXG4gICAgY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtdGFzay1idG4nKTtcbiAgICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVGFza01vZGFsKVxuXG4gICAgLy8gc3VibWl0IG5ldyB0YXNrIGJ1dHRvblxuICAgIGNvbnN0IHN1Ym1pdFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2snKTtcbiAgICBzdWJtaXRUYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pO1xuXG4gICAgLy9jaGVjayBpZiBjb21wbGV0ZVxuICAgIHRhc2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0YXNrQ2hlY2spO1xuXG4gICAgLy9lZGl0IHRhc2tcbiAgICB0YXNrQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdFRhc2tEZXRhaWxzKTtcblxuICAgIC8vIGRlbGV0ZSBzZWxlY3RlZCB0YXNrcyBidXR0b25cbiAgICBjb25zdCBkZWxldGVUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtdGFza3MnKTtcbiAgICBkZWxldGVUYXNrcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZVNlbGVjdGVkVGFza3MpXG5cbiAgICAvLyBjbG9zZSB0YXNrIG1vZGFsXG4gICAgY29uc3QgY2xvc2VUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlLXRhc2stbW9kYWwnKTtcbiAgICBjbG9zZVRhc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVRhc2tNb2RhbCk7XG4gICAgXG59XG5cbi8vIGRlbGV0ZXMgc2VsZWN0ZWQgdGFza3NcbmNvbnN0IGRlbGV0ZVNlbGVjdGVkVGFza3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG4gICAgc2VsZWN0ZWRMaXN0LnRhc2tzID0gc2VsZWN0ZWRMaXN0LnRhc2tzLmZpbHRlcih0YXNrID0+ICF0YXNrLmNvbXBsZXRlKTtcbiAgICByZW5kZXIoKTtcbn1cblxuLy8gY2hlY2tzIGlmIHRhc2sgaXMgbWFya2VkIGNvbXBsZXRlXG5jb25zdCB0YXNrQ2hlY2sgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYXNrID0gc2VsZWN0ZWRMaXN0LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSBlLnRhcmdldC5pZCkgXG4gICAgICAgIHNlbGVjdGVkVGFzay5jb21wbGV0ZSA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgcmVuZGVyVGFza051bShzZWxlY3RlZExpc3QpO1xuICAgIH1cbn1cblxuLy8gcmVuZGVycyBhbmQgZGlzcGxheXMgdG8gRE9NIG51bWJlciBvZiB0YXNrcyByZW1haW5pbmcgdG8gY29tcGxldGVcbmNvbnN0IHJlbmRlclRhc2tOdW0gPSAoc2VsZWN0ZWRUYXNrTnVtKSA9PiB7XG4gICAgY29uc3QgaW5jb21wbGV0ZSA9IHNlbGVjdGVkVGFza051bS50YXNrcy5maWx0ZXIodGFzayA9PiAhdGFzay5jb21wbGV0ZSkubGVuZ3RoO1xuICAgIGNvbnN0IHRhc2tzU3RyaW5nID0gaW5jb21wbGV0ZSA9PT0gMSA/IFwidGFza1wiIDogXCJ0YXNrc1wiO1xuICAgIHRhc2tDb3VudC50ZXh0Q29udGVudCA9IGAke2luY29tcGxldGV9ICR7dGFza3NTdHJpbmd9IHJlbWFpbmluZ2A7XG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgdG8gY3JlYXRlIHRoZSB0YXNrIGVsZW1lbnQgZm9yIHRoZSBET01cbmNvbnN0IHJlbmRlclRhc2tMaXN0ID0gKHNlbGVjdGVkVGFza0xpc3QpID0+IHtcbiAgICBzZWxlY3RlZFRhc2tMaXN0LnRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tET00gPSBkb2N1bWVudC5pbXBvcnROb2RlKHRhc2tUZW1wbGF0ZS5jb250ZW50LCB0cnVlKVxuICAgICAgICBjb25zdCBjaGVja0JveCA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcbiAgICAgICAgY2hlY2tCb3guaWQgPSB0YXNrLmlkO1xuICAgICAgICBjaGVja0JveC5jaGVja2VkID0gdGFzay5jb21wbGV0ZTtcbiAgICAgICAgY29uc3QgdGFza05hbWUgPSAgdGFza0RPTS5xdWVyeVNlbGVjdG9yKCcudGFzay1uYW1lJyk7XG4gICAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGFzay5uYW1lO1xuXG4gICAgICAgIGNvbnN0IHRhc2tEZXNjID0gdGFza0RPTS5xdWVyeVNlbGVjdG9yKCcudGFzay1kZXNjJylcbiAgICAgICAgdGFzay5kZXNjID8gdGFza0Rlc2MudGV4dENvbnRlbnQgPSBgIERlc2NyaXB0aW9uOiAke3Rhc2suZGVzY31gIDogdGFza0Rlc2MudGV4dENvbnRlbnQgPSAnTm8gRGVzY3JpcHRpb24nO1xuICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignLnRhc2stZGF0ZScpO1xuICAgICAgICB0YXNrLmRhdGUgPyB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGAgQ29tcGxldGUgYnk6ICR7dGFzay5kYXRlfWAgOiB0YXNrRGF0ZS50ZXh0Q29udGVudCA9ICdObyBDb21wbGV0aW9uIERhdGUnO1xuXG4gICAgICAgIGNvbnN0IHRhc2tQb3N0ZWQgPSB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLXBvc3RlZCcpO1xuICAgICAgICB0YXNrUG9zdGVkLnRleHRDb250ZW50ID0gYFBvc3RlZCBvbjogJHt0YXNrLnBvc3RlZH1gO1xuXG4gICAgICAgIGNvbnN0IGVkaXRUYXNrID0gdGFza0RPTS5xdWVyeVNlbGVjdG9yKCcuZWRpdC10YXNrJyk7XG4gICAgICAgIGVkaXRUYXNrLmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImVkaXQtdGFzay1pY29uXCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiMwMDAwMDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNCAyMGg0bDEwLjUgLTEwLjVhMS41IDEuNSAwIDAgMCAtNCAtNGwtMTAuNSAxMC41djRcIiAvPjxsaW5lIHgxPVwiMTMuNVwiIHkxPVwiNi41XCIgeDI9XCIxNy41XCIgeTI9XCIxMC41XCIgLz48L3N2Zz4nXG5cbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRE9NKTtcbiAgICB9KVxuICAgIFxufVxuXG4vLyBmdW5jdGlvbiB0byBlZGl0IHRhc2sgZGV0YWlsc1xuY29uc3QgZWRpdFRhc2tEZXRhaWxzID0gKGUpID0+IHtcblxuICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGRpcmVjdG9yeUFyci5maW5kKGxpc3QgPT4gbGlzdC5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpOyBcbiAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYXNrID0gQXJyYXkuZnJvbShzZWxlY3RlZEVsZW1lbnQucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZihzZWxlY3RlZEVsZW1lbnQpXG5cbiAgICBjb25zdCB0YXNrSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2stZWRpdCcpO1xuICAgIGNvbnN0IHRhc2tJbnB1dERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVzY3JpcHRpb24tZWRpdCcpO1xuICAgIGNvbnN0IHRhc2tJbnB1dERhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1lZGl0Jyk7XG5cbiAgICBsZXQgaXRlbXMgPSBzZWxlY3RlZExpc3QudGFza3Nbc2VsZWN0ZWRUYXNrXTtcbiAgICBjb25zdCB0YXNrRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lci1lZGl0Jyk7XG4gICAgY29uc3QgdGFza0VkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC10YXNrLWVkaXQnKTtcblxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC10YXNrLWljb24nKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQtdGFzaycpKSB7XG4gICAgICAgdGFza0lucHV0TmFtZS52YWx1ZSA9IGl0ZW1zLm5hbWU7XG4gICAgICAgaXRlbXMuZGVzYyA/IHRhc2tJbnB1dERlc2MudmFsdWUgPSBpdGVtcy5kZXNjIDogdGFza0lucHV0RGVzYy52YWx1ZSA9ICcnO1xuICAgICAgIGl0ZW1zLmRhdGUgPyB0YXNrSW5wdXREYXRlLnZhbHVlID0gaXRlbXMuZGF0ZSA6IHRhc2tJbnB1dERhdGUudmFsdWUgPSAnJztcbiAgICAgICBcbiAgICAgICB0YXNrRWRpdE1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgIFxuICAgICAgIC8vIGZ1bmN0aW9uIHRvIHN1Ym1pdCB0YXNrIGVkaXQgZm9ybVxuICAgICAgICBjb25zdCBzdWJtaXRUYXNrRWRpdCA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpdGVtcy5uYW1lID0gdGFza0lucHV0TmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGl0ZW1zLmRlc2MgPSB0YXNrSW5wdXREZXNjLnZhbHVlO1xuICAgICAgICAgICAgaXRlbXMuZGF0ZSA9IHRhc2tJbnB1dERhdGUudmFsdWU7XG4gICAgICAgICAgICBpdGVtcyA9ICcnO1xuICAgICAgICAgICAgdGFza0VkaXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRhc2tFZGl0Rm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRUYXNrRWRpdCk7XG4gICAgICAgICAgICByZW5kZXJUYXNrcygpO1xuICAgICAgICAgICAgc2F2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZnVuY3Rpb24gdG8gY2xvc2UgdGFzayBlZGl0IG1vZGFsXG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdFRhc2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0YXNrRWRpdEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0VGFza0VkaXQpO1xuICAgICAgICAgICAgdGFza0VkaXRNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGNsb3NlRWRpdFRhc2tNb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlRWRpdFRhc2spO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xvc2VFZGl0VGFza01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlLXRhc2stbW9kYWwtZWRpdCcpO1xuICAgICAgICBjbG9zZUVkaXRUYXNrTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXRUYXNrKVxuXG4gICAgICAgdGFza0VkaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdFRhc2tFZGl0KVxuICAgIH1cblxufVxuXG4vLyByZW5kZXJzIHRoZSB0YXNrcyBmcm9tIHRoZSBzZWxlY3RlZCBmb2xkZXIgb24gdGhlIHNjcmVlblxuY29uc3QgcmVuZGVyVGFza3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG5cbiAgICBpZihzZWxlY3RlZExpc3QgPT0gbnVsbCkge1xuICAgICAgICBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9sZGVyRGlzcGxheUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGZvbGRlclRpdGxlLnRleHRDb250ZW50ID0gc2VsZWN0ZWRMaXN0Lm5hbWU7XG4gICAgICAgIHJlbmRlclRhc2tOdW0oc2VsZWN0ZWRMaXN0KTtcbiAgICAgICAgY2xlYXJMaXN0KHRhc2tDb250YWluZXIpO1xuICAgICAgICByZW5kZXJUYXNrTGlzdChzZWxlY3RlZExpc3QpO1xuICAgIH1cbn1cblxuLy8gY2xvc2VzIHRoZSB0YXNrIG1vZGFsIHdpdGggY2xpY2sgb2YgYnV0dG9uXG5jb25zdCBjbG9zZVRhc2tNb2RhbCA9ICgpID0+IHtcbiAgICBjb25zdCBsaXN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyJylcbiAgICBsaXN0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG59XG5cbi8vIGZ1bmN0aW9uIHRoYXQgZGlzcGxheXMgbW9kYWwgdG8gYWRkIG5ldyB0YXNrXG5jb25zdCBjcmVhdGVUYXNrTW9kYWwgPSAoKSA9PiB7XG4gICAgY29uc3QgbGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lcicpXG4gICAgbGlzdE1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG4vLyBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyB0aGUgaW5wdXQgZnJvbSB0aGUgY3JlYXRlIHRhc2sgbW9kYWwgYW5kIHN1Ym1pdHMgaXQgZm9yIHN0b3JhZ2UgYW5kIGRpc3BsYXlcbmNvbnN0IHN1Ym1pdEZvcm0gPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBsaXN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyJylcbiAgICBjb25zdCB0YXNrSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2snKTtcbiAgICBjb25zdCB0YXNrSW5wdXREZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJyk7XG4gICAgY29uc3QgdGFza0lucHV0RGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJyk7XG4gICAgY29uc3QgdGFza1Bvc3RlZCA9IGZvcm1hdEFNUE0oKTtcbiAgICBcbiAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tJbnB1dE5hbWUudmFsdWU7XG4gICAgaWYodGFza05hbWUgPT0gbnVsbCB8fCB0YXNrTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICBjb25zdCB0YXNrRGVzYyA9IHRhc2tJbnB1dERlc2MudmFsdWU7XG4gICAgY29uc3QgdGFza0RhdGUgPSB0YXNrSW5wdXREYXRlLnZhbHVlXG4gICAgY29uc3QgdGFzayA9IGNyZWF0ZVRhc2sodGFza05hbWUsIHRhc2tEZXNjLCB0YXNrRGF0ZSwgdGFza1Bvc3RlZCk7XG4gICAgdGFza0lucHV0TmFtZS52YWx1ZSA9IG51bGw7XG4gICAgdGFza0lucHV0RGVzYy52YWx1ZSA9IG51bGw7XG4gICAgdGFza0lucHV0RGF0ZS52YWx1ZSA9IG51bGw7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG4gICAgc2VsZWN0ZWRMaXN0LnRhc2tzLnB1c2godGFzayk7XG4gICAgbGlzdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHJlbmRlcigpO1xufVxuXG4vLyB0aGlzIGZ1bmN0aW9uIGNyZWF0ZXMgdGhlIHRhc2sgb2JqZWN0IHRvIGJlIHB1c2hlZCBpbnRvIHRoZSBkaXJlY3RvcnlBcnIudGFza3MgYXJyYXlcbmNvbnN0IGNyZWF0ZVRhc2sgPSAodGFzaywgZGVzYywgZGF0ZSwgcG9zdGVkKSA9PiB7XG4gICAgcmV0dXJuIHsgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IHRhc2ssIGRlc2M6IGRlc2MsIGRhdGU6IGRhdGUsIHBvc3RlZDogcG9zdGVkLCBjb21wbGV0ZTogZmFsc2UsICB9XG59XG5cblxuZXhwb3J0IHsgcmVuZGVyVGFza3MsIGxpc3RMaXN0ZW5lcnMsIHN1Ym1pdEZvcm0sIGVkaXRUYXNrRGV0YWlscyB9IiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQsIHJlbmRlciB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyByZW5kZXJUYXNrcyB9IGZyb20gXCIuL2xpc3QtY3JlYXRvclwiO1xuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0RJUl9LRVkgPSAndGFzay5saXN0JztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSA9ICd0YXNrLnNlbGVjdGVkRm9sZGVyJztcblxuLy9sb2NhbCBzdG9yYWdlIGtleXMgKyBhcnJheVxubGV0IHNlbGVjdGVkRm9sZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZKVxubGV0IGRpcmVjdG9yeUFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZKSkgfHwgW107IFxuXG5jb25zdCBzYXZlQW5kUmVuZGVyTGlzdCA9ICgpID0+IHtcbiAgICBzYXZlKCk7XG4gICAgcmVuZGVyTGlzdHMoKTtcbn1cblxuLy9zYXZlcyB0byBsb2NhbCBzdG9yYWdlXG5jb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5QXJyKSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZLCBzZWxlY3RlZEZvbGRlcik7XG59XG5cbi8vcmVuZGVycyB0aGUgZGlyZWN0b3J5IGxpc3RcbmNvbnN0IHJlbmRlckxpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdG9yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGNsZWFyTGlzdChkaXJlY3RvcnlDb250YWluZXIpO1xuICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpcmVjdG9yeSA9PiB7XG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVyID0gY3JlYXRlSFRNTEVsZW1lbnQoJ2xpJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyJ10sIGRpcmVjdG9yeS5uYW1lKVxuICAgICAgIGRpcmVjdG9yeUZvbGRlci5kYXRhc2V0Lmxpc3RJZCA9IGRpcmVjdG9yeS5pZDtcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIG1ha2UgaXQgYWN0aXZlIGZvbGRlclxuICAgICAgIGlmKGRpcmVjdG9yeS5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdG9yeS1hY3RpdmUnKTtcbiAgICAgICB9XG4gICAgICAgZGlyZWN0b3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlcik7IFxuXG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVySWNvbnMgPSBjcmVhdGVIVE1MRWxlbWVudCgnc3BhbicsIG51bGwsIFsnZGlyZWN0b3J5LWZvbGRlci1pY29ucyddLCBudWxsKTtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXJJY29ucy5pbm5lckhUTUwgPSAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi1lZGl0XCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tZWRpdFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTQgMjBoNGwxMC41IC0xMC41YTEuNSAxLjUgMCAwIDAgLTQgLTRsLTEwLjUgMTAuNXY0XCIgLz48bGluZSB4MT1cIjEzLjVcIiB5MT1cIjYuNVwiIHgyPVwiMTcuNVwiIHkyPVwiMTAuNVwiIC8+PC9zdmc+PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi10cmFzaFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRyYXNoXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiNmZmZmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxsaW5lIHgxPVwiNFwiIHkxPVwiN1wiIHgyPVwiMjBcIiB5Mj1cIjdcIiAvPjxsaW5lIHgxPVwiMTBcIiB5MT1cIjExXCIgeDI9XCIxMFwiIHkyPVwiMTdcIiAvPjxsaW5lIHgxPVwiMTRcIiB5MT1cIjExXCIgeDI9XCIxNFwiIHkyPVwiMTdcIiAvPjxwYXRoIGQ9XCJNNSA3bDEgMTJhMiAyIDAgMCAwIDIgMmg4YTIgMiAwIDAgMCAyIC0ybDEgLTEyXCIgLz48cGF0aCBkPVwiTTkgN3YtM2ExIDEgMCAwIDEgMSAtMWg0YTEgMSAwIDAgMSAxIDF2M1wiIC8+PC9zdmc+PC9idXR0b24+JztcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIGFkZCB0aGUgaWNvbnNcbiAgICAgICBpZihkaXJlY3RvcnlGb2xkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXJlY3RvcnktYWN0aXZlJykpIHtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXIuYXBwZW5kQ2hpbGQoZGlyZWN0b3J5Rm9sZGVySWNvbnMpO1xuICAgICAgIH1cbiAgICB9KVxufTtcblxuLy9jbGVhcnMgdGhlIGRpcmVjdG9yeSBsaXN0IHRvIGJlIHJlLXJlbmRlcmVkIGluIHJlbmRlckxpc3RzXG5jb25zdCBjbGVhckxpc3QgPSAobGlzdCkgPT4ge1xuICAgIHdoaWxlKGxpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3QuZmlyc3RDaGlsZClcbiAgICB9XG59O1xuXG4vL2FkZHMgZXZlbnRsaXN0ZW5lcnMgZm9yIHRoZSBkaXJlY3RvcnlcbmNvbnN0IGNyZWF0ZURpckxpc3RlbmVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWRpci1mb3JtJyk7XG4gICAgY29uc3QgZGlyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeScpO1xuXG4gICAgZGlyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjcmVhdGVEaXJlY3RvcnkpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVEaXIpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdERpcilcbn1cblxuLy9jcmVhdGVzIGEgbmV3IGRpcmVjdG9yeSBmb2xkZXJcbmNvbnN0IGNyZWF0ZURpcmVjdG9yeSA9IChlKSA9PiB7XG4gICAgY29uc3QgZGlyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZGlyLWJ0bi10ZXh0Jyk7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGlyTmFtZSA9IGRpclRleHQudmFsdWU7XG4gICAgaWYoZGlyTmFtZSA9PSBudWxsIHx8IGRpck5hbWUgPT09ICcnKSByZXR1cm47XG4gICAgY29uc3QgZGlyZWN0b3J5ID0gY3JlYXRlTmV3RGlyKGRpck5hbWUpO1xuICAgIGRpclRleHQudmFsdWUgPSBudWxsO1xuICAgIGRpcmVjdG9yeUFyci5wdXNoKGRpcmVjdG9yeSk7XG4gICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbn1cblxuLy9mdW5jdGlvbiBmb3IgdGhlIHNlbGVjdGVkIGRpcmVjdG9yeSBsaXN0ZW5lclxuY29uc3Qgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnbGknKSB7XG4gICAgICAgIHNlbGVjdGVkRm9sZGVyID0gZS50YXJnZXQuZGF0YXNldC5saXN0SWQ7XG4gICAgICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgICAgIHJlbmRlclRhc2tzKCk7XG4gICAgfVxufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgZGVsZXRlZGlyIGxpc3RlbmVyIFxuY29uc3QgZGVsZXRlRGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tdHJhc2gnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi10cmFzaCcpKSB7XG4gICAgICAgIGlmKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlciB8fCBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5saXN0SWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgIGRpcmVjdG9yeUFyciA9IGRpcmVjdG9yeUFyci5maWx0ZXIoZGlyZWN0b3J5ID0+IGRpcmVjdG9yeS5pZCAhPT0gc2VsZWN0ZWRGb2xkZXIpO1xuICAgICAgICBzZWxlY3RlZEZvbGRlciA9IG51bGw7XG4gICAgICAgIHJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy9FZGl0aW5nIHRoZSBkaXJlY3RvcnkgZm9sZGVyIHRpdGxlIGFuZCB1cGRhdGluZyB0aGUgYXJyYXkgKyBET01cbmNvbnN0IGVkaXREaXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWNvbi1lZGl0JykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tZWRpdCcpKSB7XG4gICAgICAgIGlmKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlciB8fCBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5saXN0SWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeS1tb2RhbC1jb250YWluZXInKTtcbiAgICAgICAgZGlyZWN0b3J5TW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IGVkaXREaXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGlyZWN0b3J5LWVkaXQtZm9ybScpO1xuICAgICAgICBjb25zdCBjbG9zZUVkaXREaXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaWNvbi10YWJsZXItc3F1YXJlLXgnKTtcblxuICAgICAgICBjb25zdCBlZGl0RGlyRm9ybSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGV4dC1kaXInKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeVJlTmFtZSA9IGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZTtcbiAgICAgICAgICAgIGlmKGRpcmVjdG9yeVJlTmFtZSA9PSBudWxsIHx8IGRpcmVjdG9yeVJlTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICAgICAgICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpciA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZGlyLmlkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBkaXIubmFtZSA9IGRpcmVjdG9yeVJlTmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbFRleHQudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICAgICAgICAgIHJlbmRlclRhc2tzKCk7XG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGVkaXREaXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZWRpdERpckZvcm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xvc2VFZGl0RGlyID0gKCkgPT4ge1xuICAgICAgICAgICAgZGlyZWN0b3J5TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlZGl0RGlyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKTtcbiAgICAgICAgICAgIGNsb3NlRWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlRWRpdERpcik7XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZUVkaXREaXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXREaXIpO1xuICAgICAgICBlZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKTtcbiAgICB9XG4gICAgfVxuICAgIFxuXG59XG5cbi8vY3JlYXRlcyBhIGRpcmVjdG9yeSBmb2xkZXIgb2JqZWN0IHRvIGJlIHB1c2hlZCBpbnRvIGRpcmVjdG9yeSBhcnJheVxuY29uc3QgY3JlYXRlTmV3RGlyID0gKGRpcikgPT4ge1xuICAgcmV0dXJuIHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogZGlyLCB0YXNrczogW10gfVxufVxuXG5leHBvcnQgeyByZW5kZXJMaXN0cywgY3JlYXRlRGlyTGlzdGVuZXIsIHNhdmVBbmRSZW5kZXJMaXN0LCBkaXJlY3RvcnlBcnIsIHNlbGVjdGVkRm9sZGVyLCBjbGVhckxpc3QsIHNhdmUgfSIsImltcG9ydCB7IGVkaXRUYXNrRGV0YWlscywgc3VibWl0Rm9ybSB9IGZyb20gXCIuL2xpc3QtY3JlYXRvclwiO1xuXG4vLyBCZWxvdyBoZXJlIHVudGlsIG5leHQgY29tbWVudCBkZWFscyB3aXRoIGluaXRpYWwgdGFzayBjcmVhdGlvbiBmb3JtIHZhbGlkYXRpb25cblxuY29uc3QgdmFsaWRhdGVEYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHRhc2tEYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpO1xuICAgIGNvbnN0IHN1Ym1pdFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2snKTtcblxuICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkuc3BsaXQoJy0nKTtcbiAgICBsZXQgZGF0ZUlucHV0ID0gdGFza0RhdGVJbnB1dC52YWx1ZTtcbiAgICBkYXRlSW5wdXQgPSBkYXRlSW5wdXQuc3BsaXQoJy0nKTtcblxuICAgIHRvZGF5ID0gcGFyc2VJbnQodG9kYXkuam9pbignJykpXG4gICAgZGF0ZUlucHV0ID0gcGFyc2VJbnQoZGF0ZUlucHV0LmpvaW4oJycpKVxuXG4gICAgaWYoKHRvZGF5IC0gZGF0ZUlucHV0KSA8PSAxKSB7XG4gICAgICAgIHRhc2tEYXRlSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgICBzdWJtaXRUYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEYXRlSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJ0lucHV0dGVkIGRhdGUgbXVzdCBiZSBlcXVhbCB0byBjdXJyZW50IGRhdGUgb3IgYmV5b25kJyk7XG4gICAgICAgIHRhc2tEYXRlSW5wdXQucmVwb3J0VmFsaWRpdHkoKTtcbiAgICAgICAgc3VibWl0VGFzay5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRGb3JtKTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG59XG5cbmNvbnN0IHZhbGlkYXRlRGF0ZUlucHV0ID0gKCkgPT4ge1xuXG4gICAgY29uc3QgdGFza0RhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJyk7XG5cbiAgICB0YXNrRGF0ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdmFsaWRhdGVEYXRlKTtcbn1cblxuY29uc3QgdmFsaWRhdGVUYXNrRm9ybUlucHV0ID0gKGUpID0+IHtcbiAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrJyk7XG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpO1xuICAgIFxuICAgIGlmKCF0YXNrTmFtZS52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRhc2tOYW1lLnNldEN1c3RvbVZhbGlkaXR5KCdZb3UgbXVzdCBlbnRlciBhIHRhc2sgbmFtZScpXG4gICAgICAgIHRhc2tOYW1lLnJlcG9ydFZhbGlkaXR5KCk7XG4gICAgfVxuICAgIGlmKHRhc2tEYXRlLnZhbHVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGFza0RhdGUucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICBpZih2YWxpZGF0ZURhdGUoKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFsaWRhdGVEYXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrRGF0ZS5yZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuXG5jb25zdCB2YWxpZGF0ZVRhc2tGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IGFkZFRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC10YXNrJyk7XG5cbiAgICBhZGRUYXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB2YWxpZGF0ZVRhc2tGb3JtSW5wdXQpXG59XG5cbi8vIEJlbG93IGhlcmUgZGVhbHMgd2l0aCB0aGUgdGFzayBlZGl0IG1vZGFsIGZvcm0gdmFsaWRhdGlvblxuXG5jb25zdCB2YWxpZGF0ZURhdGVJbnB1dEVkaXQgPSAoKSA9PiB7XG5cbiAgICBjb25zdCB0YXNrRGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtZWRpdCcpO1xuXG4gICAgdGFza0RhdGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHZhbGlkYXRlRGF0ZUVkaXQpO1xufVxuXG5jb25zdCB2YWxpZGF0ZURhdGVFZGl0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRhc2tEYXRlSW5wdXRFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtZWRpdCcpO1xuICAgIGNvbnN0IHN1Ym1pdFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stZWRpdCcpO1xuXG4gICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKS5zcGxpdCgnLScpO1xuICAgIGxldCBkYXRlSW5wdXQgPSB0YXNrRGF0ZUlucHV0RWRpdC52YWx1ZTtcbiAgICBkYXRlSW5wdXQgPSBkYXRlSW5wdXQuc3BsaXQoJy0nKTtcblxuICAgIHRvZGF5ID0gcGFyc2VJbnQodG9kYXkuam9pbignJykpXG4gICAgZGF0ZUlucHV0ID0gcGFyc2VJbnQoZGF0ZUlucHV0LmpvaW4oJycpKVxuXG4gICAgaWYoKHRvZGF5IC0gZGF0ZUlucHV0KSA8PSAxKSB7XG4gICAgICAgIHRhc2tEYXRlSW5wdXRFZGl0LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcbiAgICAgICAgc3VibWl0VGFzay5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0VGFza0RldGFpbHMpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEYXRlSW5wdXRFZGl0LnNldEN1c3RvbVZhbGlkaXR5KCdJbnB1dHRlZCBkYXRlIG11c3QgYmUgZXF1YWwgdG8gY3VycmVudCBkYXRlIG9yIGJleW9uZCcpO1xuICAgICAgICB0YXNrRGF0ZUlucHV0RWRpdC5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICBzdWJtaXRUYXNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXRUYXNrRGV0YWlscyk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufVxuXG5jb25zdCB2YWxpZGF0ZVRhc2tGb3JtSW5wdXRFZGl0ID0gKGUpID0+IHtcbiAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWVkaXQnKTtcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLWVkaXQnKTtcbiAgICBcbiAgICBpZighdGFza05hbWUudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0YXNrTmFtZS5zZXRDdXN0b21WYWxpZGl0eSgnWW91IG11c3QgZW50ZXIgYSB0YXNrIG5hbWUnKVxuICAgICAgICB0YXNrTmFtZS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgIH1cbiAgICBpZih0YXNrRGF0ZS52YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRhc2tEYXRlLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgaWYodmFsaWRhdGVEYXRlRWRpdCgpID09PSB0cnVlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YWxpZGF0ZURhdGVFZGl0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrRGF0ZS5yZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuXG5jb25zdCB2YWxpZGF0ZVRhc2tGb3JtRWRpdCA9ICgpID0+IHtcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtdGFzaycpO1xuXG4gICAgYWRkVGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdmFsaWRhdGVUYXNrRm9ybUlucHV0RWRpdClcbn1cblxuZXhwb3J0IHsgdmFsaWRhdGVEYXRlSW5wdXQsIHZhbGlkYXRlVGFza0Zvcm0sIHZhbGlkYXRlVGFza0Zvcm1FZGl0LCB2YWxpZGF0ZURhdGVJbnB1dEVkaXQgfTsiLCJpbXBvcnQgeyBjcmVhdGVEaXJMaXN0ZW5lciwgc2F2ZUFuZFJlbmRlckxpc3R9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5pbXBvcnQgeyB0b2dnbGVUaGVtZSB9IGZyb20gXCIuL3RvZ2dsZVRoZW1lXCI7XG5pbXBvcnQgeyByZW5kZXJUYXNrcywgbGlzdExpc3RlbmVycyB9IGZyb20gXCIuL2xpc3QtY3JlYXRvclwiXG5pbXBvcnQgeyBkaXNwbGF5RGF0ZSB9IGZyb20gXCIuL2RhdGVcIjtcbmltcG9ydCB7IHZhbGlkYXRlRGF0ZUlucHV0LCB2YWxpZGF0ZURhdGVJbnB1dEVkaXQsIHZhbGlkYXRlVGFza0Zvcm0sIHZhbGlkYXRlVGFza0Zvcm1FZGl0IH0gZnJvbSBcIi4vdmFsaWRhdGlvblwiO1xuXG5mdW5jdGlvbiBjcmVhdGVIVE1MRWxlbWVudCh0eXBlLCBpZCwgY2xhc3NlcywgY29udGVudCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuXG4gICAgaWYoaWQpIGVsZW1lbnQuaWQgPSBpZDtcbiAgICBpZihjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgobXlDbGFzcykgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKG15Q2xhc3MpKTtcbiAgICB9XG4gICAgaWYoY29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbn1cblxuY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgcmVuZGVyVGFza3MoKTtcbn1cblxuY29uc3Qgb25Mb2FkID0gKCkgPT4ge1xuICAgIHRvZ2dsZVRoZW1lKCk7XG4gICAgcmVuZGVyKCk7XG4gICAgY3JlYXRlRGlyTGlzdGVuZXIoKTtcbiAgICBsaXN0TGlzdGVuZXJzKCk7IFxuICAgIGRpc3BsYXlEYXRlKCk7XG4gICAgdmFsaWRhdGVEYXRlSW5wdXQoKTtcbiAgICB2YWxpZGF0ZVRhc2tGb3JtKCk7XG4gICAgdmFsaWRhdGVEYXRlSW5wdXRFZGl0KCk7XG4gICAgdmFsaWRhdGVUYXNrRm9ybUVkaXQoKTtcbiAgICB0aW1lO1xufVxuXG5jb25zdCB0aW1lID0gc2V0SW50ZXJ2YWwoZGlzcGxheURhdGUsIDEwMDApO1xuXG5vbkxvYWQoKTtcblxuZXhwb3J0IHtcbiAgICBjcmVhdGVIVE1MRWxlbWVudCwgcmVuZGVyXG59IiwiY29uc3QgdG9nZ2xlVGhlbWUgPSAoKSA9PiB7XG5cbmNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saWdodC1kYXJrLW1vZGUnKTtcbnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGUpO1xuXG5sZXQgZGFya01vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGFya01vZGUnKTtcbmNvbnN0IGN1cnJlbnRUaGVtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50LXRoZW1lJyk7XG5cbmlmKGRhcmtNb2RlID09PSAnZW5hYmxlZCcpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGFya01vZGUnLCAnZW5hYmxlZCcpXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgY3VycmVudFRoZW1lLnRleHRDb250ZW50ID0gJ0RhcmsgTW9kZSdcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTW9kZSgpIHtcbiAgICBkYXJrTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXJrTW9kZScpXG4gICAgaWYoZGFya01vZGUgIT09ICdlbmFibGVkJykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGFya01vZGUnLCAnZW5hYmxlZCcpXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGFya01vZGUnLCBudWxsKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYodG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsgXG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdEYXJrIE1vZGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdMaWdodCBNb2RlJztcbiAgICB9XG59XG59XG5cbmV4cG9ydCB7IHRvZ2dsZVRoZW1lIH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkaXNwbGF5RGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiZm9ybWF0QU1QTSIsImQiLCJEYXRlIiwibWludXRlcyIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsImxlbmd0aCIsImhvdXJzIiwiZ2V0SG91cnMiLCJhbXBtIiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJmb2xkZXJEaXNwbGF5Q29udGFpbmVyIiwiZm9sZGVyVGl0bGUiLCJ0YXNrQ291bnQiLCJ0YXNrQ29udGFpbmVyIiwidGFza1RlbXBsYXRlIiwicmVuZGVyVGFza051bSIsInNlbGVjdGVkVGFza051bSIsImluY29tcGxldGUiLCJ0YXNrcyIsImZpbHRlciIsInRhc2siLCJjb21wbGV0ZSIsInRhc2tzU3RyaW5nIiwiZWRpdFRhc2tEZXRhaWxzIiwiZSIsInNlbGVjdGVkTGlzdCIsImRpcmVjdG9yeUFyciIsImZpbmQiLCJsaXN0IiwiaWQiLCJzZWxlY3RlZEZvbGRlciIsInNlbGVjdGVkRWxlbWVudCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJzZWxlY3RlZFRhc2siLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImluZGV4T2YiLCJ0YXNrSW5wdXROYW1lIiwidGFza0lucHV0RGVzYyIsInRhc2tJbnB1dERhdGUiLCJpdGVtcyIsInRhc2tFZGl0TW9kYWwiLCJ0YXNrRWRpdEZvcm0iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInZhbHVlIiwibmFtZSIsImRlc2MiLCJkYXRlIiwiYWRkIiwic3VibWl0VGFza0VkaXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW5kZXJUYXNrcyIsInNhdmUiLCJjbG9zZUVkaXRUYXNrIiwiY2xvc2VFZGl0VGFza01vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0eWxlIiwiZGlzcGxheSIsImNsZWFyTGlzdCIsImZvckVhY2giLCJ0YXNrRE9NIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJjaGVja0JveCIsImNoZWNrZWQiLCJ0YXNrRGVzYyIsInRhc2tEYXRlIiwicG9zdGVkIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJzdWJtaXRGb3JtIiwibGlzdE1vZGFsIiwidGFza1Bvc3RlZCIsInRhc2tOYW1lIiwiY3JlYXRlVGFzayIsInB1c2giLCJyZW5kZXIiLCJub3ciLCJMT0NBTF9TVE9SQUdFX0RJUl9LRVkiLCJMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwic2F2ZUFuZFJlbmRlckxpc3QiLCJyZW5kZXJMaXN0cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkaXJlY3RvcnlDb250YWluZXIiLCJkaXJlY3RvcnkiLCJkaXJlY3RvcnlGb2xkZXIiLCJjcmVhdGVIVE1MRWxlbWVudCIsImRhdGFzZXQiLCJsaXN0SWQiLCJkaXJlY3RvcnlGb2xkZXJJY29ucyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNyZWF0ZURpcmVjdG9yeSIsImRpclRleHQiLCJkaXJOYW1lIiwiY3JlYXRlTmV3RGlyIiwic2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lciIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImRlbGV0ZURpciIsInBhcmVudEVsZW1lbnQiLCJlZGl0RGlyIiwiZGlyZWN0b3J5TW9kYWwiLCJ0b2dnbGUiLCJlZGl0RGlyQnRuIiwiY2xvc2VFZGl0RGlyQnRuIiwiZWRpdERpckZvcm0iLCJkaXJlY3RvcnlNb2RhbFRleHQiLCJkaXJlY3RvcnlSZU5hbWUiLCJkaXIiLCJjbG9zZUVkaXREaXIiLCJ2YWxpZGF0ZURhdGUiLCJ0YXNrRGF0ZUlucHV0Iiwic3VibWl0VGFzayIsInRvZGF5IiwidG9JU09TdHJpbmciLCJzbGljZSIsInNwbGl0IiwiZGF0ZUlucHV0IiwicGFyc2VJbnQiLCJqb2luIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJyZXBvcnRWYWxpZGl0eSIsInZhbGlkYXRlRGF0ZUVkaXQiLCJ0YXNrRGF0ZUlucHV0RWRpdCIsInR5cGUiLCJjbGFzc2VzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwic2V0SW50ZXJ2YWwiLCJkYXJrTW9kZSIsImJvZHkiLCJjdXJyZW50VGhlbWUiLCJ0b2dnbGVUaGVtZSIsImRpckZvcm0iLCJkaXJDb250YWluZXIiLCJjcmVhdGVEaXJMaXN0ZW5lciIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXF1aXJlZCJdLCJzb3VyY2VSb290IjoiIn0=