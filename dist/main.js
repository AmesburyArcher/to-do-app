(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=new Date;let t=1==e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),n=1==e.getHours().toString().length?"0"+e.getHours():e.getHours(),o=e.getHours()>=12?"pm":"am";return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()+" "+e.getFullYear()+" "+n+":"+t+o}e.d({},{N:()=>x,s:()=>E});const n=document.querySelector("#to-do-list"),o=document.querySelector(".to-do-title"),r=document.querySelector(".task-count"),s=document.querySelector(".tasks"),c=document.querySelector("#task-template"),a=e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";r.textContent=`${t} ${n} remaining`},l=()=>{const e=v.find((e=>e.id===m));null==e?n.style.display="none":(n.style.display="",o.textContent=e.name,a(e),f(s),e.tasks.forEach((e=>{const t=document.importNode(c.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete,t.querySelector(".task-name").textContent=e.name;const o=t.querySelector(".task-desc");e.desc?o.textContent=` Description: ${e.desc}`:o.textContent="No Description.";const r=t.querySelector(".task-date");e.date?r.textContent=` Complete by: ${e.date}`:r.textContent="No Completion Date.",t.querySelector(".task-posted").textContent=`Posted on: ${e.posted}`,s.appendChild(t)})))},i=(e,t,n,o)=>({id:Date.now().toString(),name:e,desc:t,date:n,posted:o,complete:!1}),d="task.list",u="task.selectedFolder";let m=localStorage.getItem(u),v=JSON.parse(localStorage.getItem(d))||[];const g=()=>{y(),p()},y=()=>{localStorage.setItem(d,JSON.stringify(v)),localStorage.setItem(u,m)},p=()=>{const e=document.querySelector(".directory");f(e),v.forEach((t=>{const n=x("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===m&&n.classList.add("directory-active"),e.appendChild(n);const o=x("span",null,["directory-folder-icons"],null);o.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(o)}))},f=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},h=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const o=q(n);t.value=null,v.push(o),g()},k=e=>{"li"===e.target.tagName.toLowerCase()&&(m=e.target.dataset.listId,g(),l())},S=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.parentElement.dataset.listId===m&&(v=v.filter((e=>e.id!==m)),m=null,E())},L=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.parentElement.dataset.listId===m){const e=document.querySelector(".directory-modal-container");e.classList.toggle("active");const t=document.querySelector("#directory-edit-form"),n=document.querySelector(".icon-tabler-square-x"),o=n=>{n.preventDefault();const r=document.querySelector("#text-dir"),s=r.value;null!=s&&""!==s&&(v.forEach((e=>{e.id===m&&(e.name=s)})),r.value=null,g(),l(),e.classList.remove("active"),t.removeEventListener("submit",o))},r=()=>{e.classList.remove("active"),t.removeEventListener("submit",o),n.removeEventListener("click",r)};n.addEventListener("click",r),t.addEventListener("submit",o)}},q=e=>({id:Date.now().toString(),name:e,tasks:[]});function x(e,t,n,o){const r=document.createElement(e);return t&&(r.id=t),n&&n.forEach((e=>r.classList.add(e))),o&&(r.textContent=o),r}const E=()=>{g(),l()};(()=>{const e=document.querySelector(".light-dark-mode");e.addEventListener("click",(function(){document.body.classList.toggle("active"),e.classList.toggle("active");const t=document.querySelector(".current-theme");e.classList.contains("active")?t.textContent="Dark Mode":t.textContent="Light Mode"}))})(),E(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",h),t.addEventListener("click",k),t.addEventListener("click",S),t.addEventListener("click",L)})(),document.querySelector(".create-task-btn").addEventListener("click",(()=>{document.querySelector(".modal-container").classList.add("active")})),document.querySelector("#add-task").addEventListener("submit",(e=>{e.preventDefault();const n=document.querySelector(".modal-container"),o=document.querySelector("#task"),r=document.querySelector("#description"),s=document.querySelector("#date"),c=t(),a=o.value;if(null==a||""===a)return;const l=r.value,d=s.value,u=i(a,l,d,c);o.value=null,r.value=null,s.value=null,v.find((e=>e.id===m)).tasks.push(u),n.classList.remove("active"),E()})),s.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=v.find((e=>e.id===m));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,y(),a(t)}})),document.querySelector(".delete-tasks").addEventListener("click",(()=>{const e=v.find((e=>e.id===m));e.tasks=e.tasks.filter((e=>!e.complete)),E()})),document.querySelector(".current-date").textContent=t()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjckMsTUFDekIxRCxFQUFPMkIsRUFBV3NFLEVBQVU1RSxFQUFVRSxFQUFVeUUsR0FDdERILEVBQWNuQyxNQUFRLEtBQ3RCb0MsRUFBY3BDLE1BQVEsS0FDdEJxQyxFQUFjckMsTUFBUSxLQUNEcEQsRUFBYUMsTUFBS0MsR0FBUUEsRUFBS0MsS0FBT0MsSUFDOUNaLE1BQU04RCxLQUFLNUQsR0FDeEI0RixFQUFVOUMsVUFBVStCLE9BQU8sVUFDM0JWLE9BakdBMUUsRUFBY3VGLGlCQUFpQixTQWVoQjFCLElBQ2YsR0FBc0MsVUFBbkNBLEVBQUVRLE9BQU9DLFFBQVFDLGNBQTJCLENBQzNDLE1BQU0zRCxFQUFlQyxFQUFhQyxNQUFLQyxHQUFRQSxFQUFLQyxLQUFPQyxJQUN0Q0wsRUFBYVAsTUFBTVMsTUFBS1AsR0FBUUEsRUFBS1MsS0FBTzZDLEVBQUVRLE9BQU9yRCxLQUM3RFIsU0FBV3FELEVBQUVRLE9BQU8xQyxRQUNqQ2dCLElBQ0F6QyxFQUFjVSxPQW5CRWhCLFNBQVNDLGNBQWMsaUJBQy9CMEYsaUJBQWlCLFNBS0wsS0FDeEIsTUFBTTNFLEVBQWVDLEVBQWFDLE1BQUtDLEdBQVFBLEVBQUtDLEtBQU9DLElBQzNETCxFQUFhUCxNQUFRTyxFQUFhUCxNQUFNQyxRQUFPQyxJQUFTQSxFQUFLQyxXQUM3RGtFLE9EN0JnQjlFLFNBQVNDLGNBQWMsaUJBQy9CYSxZQUFjN0IsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9kYXRlLmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9saXN0LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2RpcmVjdG9yeS1jcmVhdG9yLmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvdG9nZ2xlVGhlbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBkaXNwbGF5RGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRlRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtZGF0ZScpO1xuICAgIGRhdGVET00udGV4dENvbnRlbnQgPSBmb3JtYXRBTVBNKClcbn1cblxuZnVuY3Rpb24gZm9ybWF0QU1QTSgpIHtcbiAgICBjb25zdCBkID0gbmV3IERhdGUoKVxuICAgIGxldCBtaW51dGVzID0gZC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5sZW5ndGggPT0gMSA/ICcwJytkLmdldE1pbnV0ZXMoKSA6IGQuZ2V0TWludXRlcygpO1xuICAgIGxldCBob3VycyA9IGQuZ2V0SG91cnMoKS50b1N0cmluZygpLmxlbmd0aCA9PSAxID8gJzAnK2QuZ2V0SG91cnMoKSA6IGQuZ2V0SG91cnMoKTtcbiAgICBsZXQgYW1wbSA9IGQuZ2V0SG91cnMoKSA+PSAxMiA/ICdwbScgOiAnYW0nO1xuICAgIGxldCBtb250aHMgPSBbJ0phbicsJ0ZlYicsJ01hcicsJ0FwcicsJ01heScsJ0p1bicsJ0p1bCcsJ0F1ZycsJ1NlcCcsJ09jdCcsJ05vdicsJ0RlYyddO1xuICAgIGxldCBkYXlzID0gWydTdW4nLCdNb24nLCdUdWUnLCdXZWQnLCdUaHUnLCdGcmknLCdTYXQnXTtcbiAgICByZXR1cm4gZGF5c1tkLmdldERheSgpXSsnICcrbW9udGhzW2QuZ2V0TW9udGgoKV0rJyAnK2QuZ2V0RGF0ZSgpKycgJytkLmdldEZ1bGxZZWFyKCkrJyAnK2hvdXJzKyc6JyttaW51dGVzK2FtcG07XG4gICAgfVxuXG5leHBvcnQgeyBkaXNwbGF5RGF0ZSwgZm9ybWF0QU1QTSB9IiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQsIHJlbmRlciB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyByZW5kZXJMaXN0cywgY3JlYXRlRGlyTGlzdGVuZXIsIHNhdmVBbmRSZW5kZXJMaXN0LCBkaXJlY3RvcnlBcnIsIHNlbGVjdGVkRm9sZGVyLCBjbGVhckxpc3QsIHNhdmUgfSBmcm9tIFwiLi9kaXJlY3RvcnktY3JlYXRvclwiO1xuaW1wb3J0IHsgZm9ybWF0QU1QTSB9IGZyb20gXCIuL2RhdGVcIjtcblxuXG5jb25zdCBmb2xkZXJEaXNwbGF5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvLWRvLWxpc3QnKTtcbmNvbnN0IGZvbGRlclRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvLWRvLXRpdGxlJyk7XG5jb25zdCB0YXNrQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1jb3VudCcpO1xuY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xuY29uc3QgdGFza1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2stdGVtcGxhdGUnKTtcblxuLy8gY3JlYXRlcyBsaXN0ZW5lcnMgZm9yIHRhc2tzXG5jb25zdCBsaXN0TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNyZWF0ZVRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLXRhc2stYnRuJyk7XG4gICAgY3JlYXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVRhc2tNb2RhbClcblxuICAgIGNvbnN0IHN1Ym1pdFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2snKTtcbiAgICBzdWJtaXRUYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm0pO1xuXG4gICAgdGFza0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRhc2tDaGVjayk7XG5cbiAgICBjb25zdCBkZWxldGVUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtdGFza3MnKTtcbiAgICBkZWxldGVUYXNrcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZVNlbGVjdGVkVGFza3MpXG4gICAgXG59XG5cbi8vIGRlbGV0ZXMgc2VsZWN0ZWQgdGFza3NcbmNvbnN0IGRlbGV0ZVNlbGVjdGVkVGFza3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG4gICAgc2VsZWN0ZWRMaXN0LnRhc2tzID0gc2VsZWN0ZWRMaXN0LnRhc2tzLmZpbHRlcih0YXNrID0+ICF0YXNrLmNvbXBsZXRlKTtcbiAgICByZW5kZXIoKTtcbn1cblxuLy8gY2hlY2tzIGlmIHRhc2sgaXMgbWFya2VkIGNvbXBsZXRlXG5jb25zdCB0YXNrQ2hlY2sgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYXNrID0gc2VsZWN0ZWRMaXN0LnRhc2tzLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSBlLnRhcmdldC5pZCkgXG4gICAgICAgIHNlbGVjdGVkVGFzay5jb21wbGV0ZSA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgcmVuZGVyVGFza051bShzZWxlY3RlZExpc3QpO1xuICAgIH1cbn1cblxuLy8gcmVuZGVycyBhbmQgZGlzcGxheXMgdG8gRE9NIG51bWJlciBvZiB0YXNrcyByZW1haW5pbmcgdG8gY29tcGxldGVcbmNvbnN0IHJlbmRlclRhc2tOdW0gPSAoc2VsZWN0ZWRUYXNrTnVtKSA9PiB7XG4gICAgY29uc3QgaW5jb21wbGV0ZSA9IHNlbGVjdGVkVGFza051bS50YXNrcy5maWx0ZXIodGFzayA9PiAhdGFzay5jb21wbGV0ZSkubGVuZ3RoO1xuICAgIGNvbnN0IHRhc2tzU3RyaW5nID0gaW5jb21wbGV0ZSA9PT0gMSA/IFwidGFza1wiIDogXCJ0YXNrc1wiO1xuICAgIHRhc2tDb3VudC50ZXh0Q29udGVudCA9IGAke2luY29tcGxldGV9ICR7dGFza3NTdHJpbmd9IHJlbWFpbmluZ2A7XG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgdG8gY3JlYXRlIHRoZSB0YXNrIGVsZW1lbnQgZm9yIHRoZSBET01cbmNvbnN0IHJlbmRlclRhc2tMaXN0ID0gKHNlbGVjdGVkVGFza0xpc3QpID0+IHtcbiAgICBzZWxlY3RlZFRhc2tMaXN0LnRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tET00gPSBkb2N1bWVudC5pbXBvcnROb2RlKHRhc2tUZW1wbGF0ZS5jb250ZW50LCB0cnVlKVxuICAgICAgICBjb25zdCBjaGVja0JveCA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcbiAgICAgICAgY2hlY2tCb3guaWQgPSB0YXNrLmlkO1xuICAgICAgICBjaGVja0JveC5jaGVja2VkID0gdGFzay5jb21wbGV0ZTtcbiAgICAgICAgY29uc3QgdGFza05hbWUgPSAgdGFza0RPTS5xdWVyeVNlbGVjdG9yKCcudGFzay1uYW1lJyk7XG4gICAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGFzay5uYW1lO1xuXG4gICAgICAgIGNvbnN0IHRhc2tEZXNjID0gdGFza0RPTS5xdWVyeVNlbGVjdG9yKCcudGFzay1kZXNjJylcbiAgICAgICAgdGFzay5kZXNjID8gdGFza0Rlc2MudGV4dENvbnRlbnQgPSBgIERlc2NyaXB0aW9uOiAke3Rhc2suZGVzY31gIDogdGFza0Rlc2MudGV4dENvbnRlbnQgPSAnTm8gRGVzY3JpcHRpb24uJztcbiAgICAgICBcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWRhdGUnKTtcbiAgICAgICAgdGFzay5kYXRlID8gdGFza0RhdGUudGV4dENvbnRlbnQgPSBgIENvbXBsZXRlIGJ5OiAke3Rhc2suZGF0ZX1gIDogdGFza0RhdGUudGV4dENvbnRlbnQgPSAnTm8gQ29tcGxldGlvbiBEYXRlLic7XG5cbiAgICAgICAgY29uc3QgdGFza1Bvc3RlZCA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignLnRhc2stcG9zdGVkJyk7XG4gICAgICAgIHRhc2tQb3N0ZWQudGV4dENvbnRlbnQgPSBgUG9zdGVkIG9uOiAke3Rhc2sucG9zdGVkfWA7XG5cbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRE9NKTtcbiAgICB9KVxuICAgIFxufVxuXG4vLyByZW5kZXJzIHRoZSB0YXNrcyBmcm9tIHRoZSBzZWxlY3RlZCBmb2xkZXIgb24gdGhlIHNjcmVlblxuY29uc3QgcmVuZGVyVGFza3MgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gZGlyZWN0b3J5QXJyLmZpbmQobGlzdCA9PiBsaXN0LmlkID09PSBzZWxlY3RlZEZvbGRlcik7XG5cbiAgICBpZihzZWxlY3RlZExpc3QgPT0gbnVsbCkge1xuICAgICAgICBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9sZGVyRGlzcGxheUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGZvbGRlclRpdGxlLnRleHRDb250ZW50ID0gc2VsZWN0ZWRMaXN0Lm5hbWU7XG4gICAgICAgIHJlbmRlclRhc2tOdW0oc2VsZWN0ZWRMaXN0KTtcbiAgICAgICAgY2xlYXJMaXN0KHRhc2tDb250YWluZXIpO1xuICAgICAgICByZW5kZXJUYXNrTGlzdChzZWxlY3RlZExpc3QpO1xuICAgIH1cbn1cblxuLy8gZnVuY3Rpb24gdGhhdCBkaXNwbGF5cyBtb2RhbCB0byBhZGQgbmV3IHRhc2tcbmNvbnN0IGNyZWF0ZVRhc2tNb2RhbCA9ICgpID0+IHtcbiAgICBjb25zdCBsaXN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyJylcbiAgICBsaXN0TW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG59XG5cbi8vIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIHRoZSBpbnB1dCBmcm9tIHRoZSBjcmVhdGUgdGFzayBtb2RhbCBhbmQgc3VibWl0cyBpdCBmb3Igc3RvcmFnZSBhbmQgZGlzcGxheVxuY29uc3Qgc3VibWl0Rm9ybSA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGxpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXInKVxuICAgIGNvbnN0IHRhc2tJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzaycpO1xuICAgIGNvbnN0IHRhc2tJbnB1dERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbiAgICBjb25zdCB0YXNrSW5wdXREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKTtcbiAgICBjb25zdCB0YXNrUG9zdGVkID0gZm9ybWF0QU1QTSgpO1xuICAgIFxuICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza0lucHV0TmFtZS52YWx1ZTtcbiAgICBpZih0YXNrTmFtZSA9PSBudWxsIHx8IHRhc2tOYW1lID09PSAnJykgcmV0dXJuO1xuICAgIGNvbnN0IHRhc2tEZXNjID0gdGFza0lucHV0RGVzYy52YWx1ZTtcbiAgICBjb25zdCB0YXNrRGF0ZSA9IHRhc2tJbnB1dERhdGUudmFsdWVcbiAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayh0YXNrTmFtZSwgdGFza0Rlc2MsIHRhc2tEYXRlLCB0YXNrUG9zdGVkKTtcbiAgICB0YXNrSW5wdXROYW1lLnZhbHVlID0gbnVsbDtcbiAgICB0YXNrSW5wdXREZXNjLnZhbHVlID0gbnVsbDtcbiAgICB0YXNrSW5wdXREYXRlLnZhbHVlID0gbnVsbDtcbiAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICBzZWxlY3RlZExpc3QudGFza3MucHVzaCh0YXNrKTtcbiAgICBsaXN0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgcmVuZGVyKCk7XG59XG5cbi8vIHRoaXMgZnVuY3Rpb24gY3JlYXRlcyB0aGUgdGFzayBvYmplY3QgdG8gYmUgcHVzaGVkIGludG8gdGhlIGRpcmVjdG9yeUFyci50YXNrcyBhcnJheVxuY29uc3QgY3JlYXRlVGFzayA9ICh0YXNrLCBkZXNjLCBkYXRlLCBwb3N0ZWQpID0+IHtcbiAgICByZXR1cm4geyAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogdGFzaywgZGVzYzogZGVzYywgZGF0ZTogZGF0ZSwgcG9zdGVkOiBwb3N0ZWQsIGNvbXBsZXRlOiBmYWxzZSwgIH1cbn1cblxuXG5leHBvcnQgeyByZW5kZXJUYXNrcywgbGlzdExpc3RlbmVycyB9IiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQsIHJlbmRlciB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyByZW5kZXJUYXNrcyB9IGZyb20gXCIuL2xpc3QtY3JlYXRvclwiO1xuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0RJUl9LRVkgPSAndGFzay5saXN0JztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSA9ICd0YXNrLnNlbGVjdGVkRm9sZGVyJztcblxuLy9sb2NhbCBzdG9yYWdlIGtleXMgKyBhcnJheVxubGV0IHNlbGVjdGVkRm9sZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZKVxubGV0IGRpcmVjdG9yeUFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZKSkgfHwgW107IFxuXG5jb25zdCBzYXZlQW5kUmVuZGVyTGlzdCA9ICgpID0+IHtcbiAgICBzYXZlKCk7XG4gICAgcmVuZGVyTGlzdHMoKTtcbn1cblxuLy9zYXZlcyB0byBsb2NhbCBzdG9yYWdlXG5jb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5QXJyKSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZLCBzZWxlY3RlZEZvbGRlcik7XG59XG5cbi8vcmVuZGVycyB0aGUgZGlyZWN0b3J5IGxpc3RcbmNvbnN0IHJlbmRlckxpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdG9yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGNsZWFyTGlzdChkaXJlY3RvcnlDb250YWluZXIpO1xuICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpcmVjdG9yeSA9PiB7XG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVyID0gY3JlYXRlSFRNTEVsZW1lbnQoJ2xpJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyJ10sIGRpcmVjdG9yeS5uYW1lKVxuICAgICAgIGRpcmVjdG9yeUZvbGRlci5kYXRhc2V0Lmxpc3RJZCA9IGRpcmVjdG9yeS5pZDtcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIG1ha2UgaXQgYWN0aXZlIGZvbGRlclxuICAgICAgIGlmKGRpcmVjdG9yeS5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdG9yeS1hY3RpdmUnKTtcbiAgICAgICB9O1xuICAgICAgIGRpcmVjdG9yeUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXIpOyBcblxuICAgICAgIGNvbnN0IGRpcmVjdG9yeUZvbGRlckljb25zID0gY3JlYXRlSFRNTEVsZW1lbnQoJ3NwYW4nLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXItaWNvbnMnXSwgbnVsbCk7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVySWNvbnMuaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9XCJidXR0b24tZWRpdFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLWVkaXRcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk00IDIwaDRsMTAuNSAtMTAuNWExLjUgMS41IDAgMCAwIC00IC00bC0xMC41IDEwLjV2NFwiIC8+PGxpbmUgeDE9XCIxMy41XCIgeTE9XCI2LjVcIiB4Mj1cIjE3LjVcIiB5Mj1cIjEwLjVcIiAvPjwvc3ZnPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJidXR0b24tdHJhc2hcIj48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi10cmFzaFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48bGluZSB4MT1cIjRcIiB5MT1cIjdcIiB4Mj1cIjIwXCIgeTI9XCI3XCIgLz48bGluZSB4MT1cIjEwXCIgeTE9XCIxMVwiIHgyPVwiMTBcIiB5Mj1cIjE3XCIgLz48bGluZSB4MT1cIjE0XCIgeTE9XCIxMVwiIHgyPVwiMTRcIiB5Mj1cIjE3XCIgLz48cGF0aCBkPVwiTTUgN2wxIDEyYTIgMiAwIDAgMCAyIDJoOGEyIDIgMCAwIDAgMiAtMmwxIC0xMlwiIC8+PHBhdGggZD1cIk05IDd2LTNhMSAxIDAgMCAxIDEgLTFoNGExIDEgMCAwIDEgMSAxdjNcIiAvPjwvc3ZnPjwvYnV0dG9uPic7XG4gICAgICAgLy9pZiB0aGUgZm9sZGVyIGlzIHNlbGVjdGVkLCBhZGQgdGhlIGljb25zXG4gICAgICAgaWYoZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5jb250YWlucygnZGlyZWN0b3J5LWFjdGl2ZScpKSB7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlckljb25zKTtcbiAgICAgICB9O1xuICAgIH0pXG59O1xuXG4vL2NsZWFycyB0aGUgZGlyZWN0b3J5IGxpc3QgdG8gYmUgcmUtcmVuZGVyZWQgaW4gcmVuZGVyTGlzdHNcbmNvbnN0IGNsZWFyTGlzdCA9IChsaXN0KSA9PiB7XG4gICAgd2hpbGUobGlzdC5maXJzdENoaWxkKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKVxuICAgIH1cbn07XG5cbi8vYWRkcyBldmVudGxpc3RlbmVycyBmb3IgdGhlIGRpcmVjdG9yeVxuY29uc3QgY3JlYXRlRGlyTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZGlyLWZvcm0nKTtcbiAgICBjb25zdCBkaXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5Jyk7XG5cbiAgICBkaXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGNyZWF0ZURpcmVjdG9yeSlcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyKVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZURpcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0RGlyKVxufVxuXG4vL2NyZWF0ZXMgYSBuZXcgZGlyZWN0b3J5IGZvbGRlclxuY29uc3QgY3JlYXRlRGlyZWN0b3J5ID0gKGUpID0+IHtcbiAgICBjb25zdCBkaXJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1kaXItYnRuLXRleHQnKTtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBkaXJOYW1lID0gZGlyVGV4dC52YWx1ZTtcbiAgICBpZihkaXJOYW1lID09IG51bGwgfHwgZGlyTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICBjb25zdCBkaXJlY3RvcnkgPSBjcmVhdGVOZXdEaXIoZGlyTmFtZSk7XG4gICAgZGlyVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgZGlyZWN0b3J5QXJyLnB1c2goZGlyZWN0b3J5KTtcbiAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgc2VsZWN0ZWQgZGlyZWN0b3J5IGxpc3RlbmVyXG5jb25zdCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdsaScpIHtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBlLnRhcmdldC5kYXRhc2V0Lmxpc3RJZDtcbiAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICAgICAgcmVuZGVyVGFza3MoKTtcbiAgICB9XG59XG5cbi8vZnVuY3Rpb24gZm9yIHRoZSBkZWxldGVkaXIgbGlzdGVuZXIgXG5jb25zdCBkZWxldGVEaXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWNvbi10cmFzaCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBkaXJlY3RvcnlBcnIgPSBkaXJlY3RvcnlBcnIuZmlsdGVyKGRpcmVjdG9yeSA9PiBkaXJlY3RvcnkuaWQgIT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBudWxsO1xuICAgICAgICAvLyBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAvLyByZW5kZXJUYXNrcygpO1xuICAgICAgICByZW5kZXIoKTtcbiAgICB9XG59XG4vL0VkaXRpbmcgdGhlIGRpcmVjdG9yeSBmb2xkZXIgdGl0bGUgYW5kIHVwZGF0aW5nIHRoZSBhcnJheSArIERPTVxuY29uc3QgZWRpdERpciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLWVkaXQnKSAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICBkaXJlY3RvcnlNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgY29uc3QgZWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXJlY3RvcnktZWRpdC1mb3JtJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLXRhYmxlci1zcXVhcmUteCcpO1xuXG4gICAgICAgIGNvbnN0IGVkaXREaXJGb3JtID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZXh0LWRpcicpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5UmVOYW1lID0gZGlyZWN0b3J5TW9kYWxUZXh0LnZhbHVlO1xuICAgICAgICAgICAgaWYoZGlyZWN0b3J5UmVOYW1lID09IG51bGwgfHwgZGlyZWN0b3J5UmVOYW1lID09PSAnJykgcmV0dXJuO1xuICAgICAgICAgICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyID0+IHtcbiAgICAgICAgICAgICAgICBpZihkaXIuaWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpci5uYW1lID0gZGlyZWN0b3J5UmVOYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAgICAgcmVuZGVyVGFza3MoKTtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbG9zZUVkaXREaXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGVkaXREaXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZWRpdERpckZvcm0pO1xuICAgICAgICAgICAgY2xvc2VFZGl0RGlyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VFZGl0RGlyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlRWRpdERpckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlRWRpdERpcik7XG4gICAgICAgIGVkaXREaXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZWRpdERpckZvcm0pO1xuICAgIH1cbiAgICBcblxufVxuXG4vL2NyZWF0ZXMgYSBkaXJlY3RvcnkgZm9sZGVyIG9iamVjdCB0byBiZSBwdXNoZWQgaW50byBkaXJlY3RvcnkgYXJyYXlcbmNvbnN0IGNyZWF0ZU5ld0RpciA9IChkaXIpID0+IHtcbiAgIHJldHVybiB7IGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IGRpciwgdGFza3M6IFtdIH1cbn1cblxuZXhwb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCwgZGlyZWN0b3J5QXJyLCBzZWxlY3RlZEZvbGRlciwgY2xlYXJMaXN0LCBzYXZlIH0iLCJpbXBvcnQgeyBjcmVhdGVEaXJMaXN0ZW5lciwgc2F2ZUFuZFJlbmRlckxpc3QsIHJlbmRlckxpc3RzLCBkaXJlY3RvcnlBcnIsIHNlbGVjdGVkRm9sZGVyIH0gZnJvbSBcIi4vZGlyZWN0b3J5LWNyZWF0b3JcIjtcbmltcG9ydCB7IHRvZ2dsZVRoZW1lIH0gZnJvbSBcIi4vdG9nZ2xlVGhlbWVcIjtcbmltcG9ydCB7IHJlbmRlclRhc2tzLCBsaXN0TGlzdGVuZXJzIH0gZnJvbSBcIi4vbGlzdC1jcmVhdG9yXCJcbmltcG9ydCB7IGRpc3BsYXlEYXRlIH0gZnJvbSBcIi4vZGF0ZVwiO1xuXG5mdW5jdGlvbiBjcmVhdGVIVE1MRWxlbWVudCh0eXBlLCBpZCwgY2xhc3NlcywgY29udGVudCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuXG4gICAgaWYoaWQpIGVsZW1lbnQuaWQgPSBpZDtcbiAgICBpZihjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgobXlDbGFzcykgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKG15Q2xhc3MpKTtcbiAgICB9O1xuICAgIGlmKGNvbnRlbnQpIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5jb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICByZW5kZXJUYXNrcygpO1xufVxuXG5jb25zdCBvbkxvYWQgPSAoKSA9PiB7XG4gICAgdG9nZ2xlVGhlbWUoKTtcbiAgICByZW5kZXIoKTtcbiAgICBjcmVhdGVEaXJMaXN0ZW5lcigpO1xuICAgIGxpc3RMaXN0ZW5lcnMoKTsgXG4gICAgZGlzcGxheURhdGUoKTtcbn1cblxub25Mb2FkKCk7XG5cbmV4cG9ydCB7XG4gICAgY3JlYXRlSFRNTEVsZW1lbnQsIHJlbmRlclxufSIsImNvbnN0IHRvZ2dsZVRoZW1lID0gKCkgPT4ge1xuXG5jb25zdCB0b2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlnaHQtZGFyay1tb2RlJyk7XG50b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNb2RlKTtcblxuZnVuY3Rpb24gdG9nZ2xlTW9kZSgpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgIHRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblxuICAgIGNvbnN0IGN1cnJlbnRUaGVtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50LXRoZW1lJyk7XG5cbiAgICBpZih0b2dnbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgeyBcbiAgICAgICAgY3VycmVudFRoZW1lLnRleHRDb250ZW50ID0gJ0RhcmsgTW9kZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFRoZW1lLnRleHRDb250ZW50ID0gJ0xpZ2h0IE1vZGUnO1xuICAgIH07XG59XG59XG5cbmV4cG9ydCB7IHRvZ2dsZVRoZW1lIH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJmb3JtYXRBTVBNIiwiZCIsIkRhdGUiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwibGVuZ3RoIiwiaG91cnMiLCJnZXRIb3VycyIsImFtcG0iLCJnZXREYXkiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsImZvbGRlckRpc3BsYXlDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmb2xkZXJUaXRsZSIsInRhc2tDb3VudCIsInRhc2tDb250YWluZXIiLCJ0YXNrVGVtcGxhdGUiLCJyZW5kZXJUYXNrTnVtIiwic2VsZWN0ZWRUYXNrTnVtIiwiaW5jb21wbGV0ZSIsInRhc2tzIiwiZmlsdGVyIiwidGFzayIsImNvbXBsZXRlIiwidGFza3NTdHJpbmciLCJ0ZXh0Q29udGVudCIsInJlbmRlclRhc2tzIiwic2VsZWN0ZWRMaXN0IiwiZGlyZWN0b3J5QXJyIiwiZmluZCIsImxpc3QiLCJpZCIsInNlbGVjdGVkRm9sZGVyIiwic3R5bGUiLCJkaXNwbGF5IiwibmFtZSIsImNsZWFyTGlzdCIsImZvckVhY2giLCJ0YXNrRE9NIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJjaGVja0JveCIsImNoZWNrZWQiLCJ0YXNrRGVzYyIsImRlc2MiLCJ0YXNrRGF0ZSIsImRhdGUiLCJwb3N0ZWQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRhc2siLCJub3ciLCJMT0NBTF9TVE9SQUdFX0RJUl9LRVkiLCJMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwic2F2ZUFuZFJlbmRlckxpc3QiLCJzYXZlIiwicmVuZGVyTGlzdHMiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZGlyZWN0b3J5Q29udGFpbmVyIiwiZGlyZWN0b3J5IiwiZGlyZWN0b3J5Rm9sZGVyIiwiY3JlYXRlSFRNTEVsZW1lbnQiLCJkYXRhc2V0IiwibGlzdElkIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlyZWN0b3J5Rm9sZGVySWNvbnMiLCJpbm5lckhUTUwiLCJjb250YWlucyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImNyZWF0ZURpcmVjdG9yeSIsImUiLCJkaXJUZXh0IiwicHJldmVudERlZmF1bHQiLCJkaXJOYW1lIiwidmFsdWUiLCJjcmVhdGVOZXdEaXIiLCJwdXNoIiwic2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lciIsInRhcmdldCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImRlbGV0ZURpciIsInBhcmVudEVsZW1lbnQiLCJyZW5kZXIiLCJlZGl0RGlyIiwiZGlyZWN0b3J5TW9kYWwiLCJ0b2dnbGUiLCJlZGl0RGlyQnRuIiwiY2xvc2VFZGl0RGlyQnRuIiwiZWRpdERpckZvcm0iLCJkaXJlY3RvcnlNb2RhbFRleHQiLCJkaXJlY3RvcnlSZU5hbWUiLCJkaXIiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VFZGl0RGlyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInR5cGUiLCJjbGFzc2VzIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwiYm9keSIsImN1cnJlbnRUaGVtZSIsInRvZ2dsZVRoZW1lIiwiZGlyRm9ybSIsImRpckNvbnRhaW5lciIsImNyZWF0ZURpckxpc3RlbmVyIiwibGlzdE1vZGFsIiwidGFza0lucHV0TmFtZSIsInRhc2tJbnB1dERlc2MiLCJ0YXNrSW5wdXREYXRlIiwidGFza1Bvc3RlZCIsInRhc2tOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==