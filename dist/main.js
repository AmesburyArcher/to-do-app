(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{N:()=>g});const e="task.list",n="task.selectedFolder";let o=localStorage.getItem(n),r=JSON.parse(localStorage.getItem(e))||[];const i=()=>{s(),l()},s=()=>{localStorage.setItem(e,JSON.stringify(r)),localStorage.setItem(n,o)},l=()=>{const t=document.querySelector(".directory");a(t),r.forEach((e=>{const n=g("li",null,["directory-folder"],e.name);n.dataset.listId=e.id,e.id===o&&n.classList.add("directory-active"),t.appendChild(n);const r=g("span",null,["directory-folder-icons"],null);r.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(r)}))},a=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},c=t=>{const e=document.querySelector(".add-dir-btn-text");t.preventDefault();const n=e.value;if(null==n||""===n)return;const o=v(n);e.value=null,r.push(o),i()},d=t=>{"li"===t.target.tagName.toLowerCase()&&(o=t.target.dataset.listId,i())},u=t=>{t.target.classList.contains("icon-trash")&&t.target.parentElement.parentElement.parentElement.dataset.listId===o&&(r=r.filter((t=>t.id!==o)),o=null,i())},m=t=>{if(t.target.classList.contains("icon-edit")&&t.target.parentElement.parentElement.parentElement.dataset.listId===o){const t=document.querySelector(".directory-modal-container");t.classList.toggle("active");const e=document.querySelector("#directory-edit-form"),n=document.querySelector(".icon-tabler-square-x"),s=n=>{n.preventDefault();const l=document.querySelector("#text-dir"),a=l.value;null!=a&&""!==a&&(r.forEach((t=>{t.id===o&&(t.name=a)})),l.value=null,i(),t.classList.toggle("active"),e.removeEventListener("submit",s))},l=()=>{t.classList.toggle("active"),e.removeEventListener("submit",s),n.removeEventListener("click",l)};n.addEventListener("click",l),e.addEventListener("submit",s)}},v=t=>({id:Date.now().toString(),name:t,tasks:[]});function g(t,e,n,o){const r=document.createElement(t);return e&&(r.id=e),n&&n.forEach((t=>r.classList.add(t))),o&&(r.textContent=o),r}(()=>{const t=document.querySelector(".light-dark-mode");t.addEventListener("click",(function(){document.body.classList.toggle("active"),t.classList.toggle("active");const e=document.querySelector(".current-theme");t.classList.contains("active")?e.textContent="Dark Mode":e.textContent="Light Mode"}))})(),i(),(()=>{const t=document.querySelector("#add-dir-form"),e=document.querySelector(".directory");t.addEventListener("submit",c),e.addEventListener("click",d),e.addEventListener("click",u),e.addEventListener("click",m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvZGlyZWN0b3J5LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy90b2dnbGVUaGVtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IGNyZWF0ZUhUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuY29uc3QgTE9DQUxfU1RPUkFHRV9ESVJfS0VZID0gJ3Rhc2subGlzdCc7XG5jb25zdCBMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVkgPSAndGFzay5zZWxlY3RlZEZvbGRlcic7XG5cbi8vbG9jYWwgc3RvcmFnZSBrZXlzICsgYXJyYXlcbmxldCBzZWxlY3RlZEZvbGRlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSlcbmxldCBkaXJlY3RvcnlBcnIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSkpIHx8IFtdOyBcblxuY29uc3Qgc2F2ZUFuZFJlbmRlckxpc3QgPSAoKSA9PiB7XG4gICAgc2F2ZSgpO1xuICAgIHJlbmRlckxpc3RzKCk7XG59XG5cbi8vc2F2ZXMgdG8gbG9jYWwgc3RvcmFnZVxuY29uc3Qgc2F2ZSA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0RJUl9LRVksIEpTT04uc3RyaW5naWZ5KGRpcmVjdG9yeUFycikpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSwgc2VsZWN0ZWRGb2xkZXIpO1xufVxuXG4vL3JlbmRlcnMgdGhlIGRpcmVjdG9yeSBsaXN0XG5jb25zdCByZW5kZXJMaXN0cyA9ICgpID0+IHtcbiAgICBjb25zdCBkaXJlY3RvcnlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5Jyk7XG5cbiAgICBjbGVhckxpc3QoZGlyZWN0b3J5Q29udGFpbmVyKTtcbiAgICBkaXJlY3RvcnlBcnIuZm9yRWFjaChkaXJlY3RvcnkgPT4ge1xuICAgICAgIGNvbnN0IGRpcmVjdG9yeUZvbGRlciA9IGNyZWF0ZUhUTUxFbGVtZW50KCdsaScsIG51bGwsIFsnZGlyZWN0b3J5LWZvbGRlciddLCBkaXJlY3RvcnkubmFtZSlcbiAgICAgICBkaXJlY3RvcnlGb2xkZXIuZGF0YXNldC5saXN0SWQgPSBkaXJlY3RvcnkuaWQ7XG4gICAgICAgLy9pZiB0aGUgZm9sZGVyIGlzIHNlbGVjdGVkLCBtYWtlIGl0IGFjdGl2ZSBmb2xkZXJcbiAgICAgICBpZihkaXJlY3RvcnkuaWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgIGRpcmVjdG9yeUZvbGRlci5jbGFzc0xpc3QuYWRkKCdkaXJlY3RvcnktYWN0aXZlJyk7XG4gICAgICAgfTtcbiAgICAgICBkaXJlY3RvcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoZGlyZWN0b3J5Rm9sZGVyKTsgXG5cbiAgICAgICBjb25zdCBkaXJlY3RvcnlGb2xkZXJJY29ucyA9IGNyZWF0ZUhUTUxFbGVtZW50KCdzcGFuJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyLWljb25zJ10sIG51bGwpO1xuICAgICAgIGRpcmVjdG9yeUZvbGRlckljb25zLmlubmVySFRNTCA9ICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uLWVkaXRcIj48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi1lZGl0XCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiNmZmZmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNCAyMGg0bDEwLjUgLTEwLjVhMS41IDEuNSAwIDAgMCAtNCAtNGwtMTAuNSAxMC41djRcIiAvPjxsaW5lIHgxPVwiMTMuNVwiIHkxPVwiNi41XCIgeDI9XCIxNy41XCIgeTI9XCIxMC41XCIgLz48L3N2Zz48L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwiYnV0dG9uLXRyYXNoXCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tdHJhc2hcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PGxpbmUgeDE9XCI0XCIgeTE9XCI3XCIgeDI9XCIyMFwiIHkyPVwiN1wiIC8+PGxpbmUgeDE9XCIxMFwiIHkxPVwiMTFcIiB4Mj1cIjEwXCIgeTI9XCIxN1wiIC8+PGxpbmUgeDE9XCIxNFwiIHkxPVwiMTFcIiB4Mj1cIjE0XCIgeTI9XCIxN1wiIC8+PHBhdGggZD1cIk01IDdsMSAxMmEyIDIgMCAwIDAgMiAyaDhhMiAyIDAgMCAwIDIgLTJsMSAtMTJcIiAvPjxwYXRoIGQ9XCJNOSA3di0zYTEgMSAwIDAgMSAxIC0xaDRhMSAxIDAgMCAxIDEgMXYzXCIgLz48L3N2Zz48L2J1dHRvbj4nO1xuICAgICAgIC8vaWYgdGhlIGZvbGRlciBpcyBzZWxlY3RlZCwgYWRkIHRoZSBpY29uc1xuICAgICAgIGlmKGRpcmVjdG9yeUZvbGRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2RpcmVjdG9yeS1hY3RpdmUnKSkge1xuICAgICAgIGRpcmVjdG9yeUZvbGRlci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXJJY29ucyk7XG4gICAgICAgfTtcbiAgICB9KVxufTtcblxuLy9jbGVhcnMgdGhlIGRpcmVjdG9yeSBsaXN0IHRvIGJlIHJlLXJlbmRlcmVkIGluIHJlbmRlckxpc3RzXG5jb25zdCBjbGVhckxpc3QgPSAobGlzdCkgPT4ge1xuICAgIHdoaWxlKGxpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3QuZmlyc3RDaGlsZClcbiAgICB9XG59O1xuXG4vL2FkZHMgZXZlbnRsaXN0ZW5lcnMgZm9yIHRoZSBkaXJlY3RvcnlcbmNvbnN0IGNyZWF0ZURpckxpc3RlbmVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWRpci1mb3JtJyk7XG4gICAgY29uc3QgZGlyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeScpO1xuXG4gICAgZGlyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjcmVhdGVEaXJlY3RvcnkpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVEaXIpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdERpcilcbn1cblxuLy9jcmVhdGVzIGEgbmV3IGRpcmVjdG9yeSBmb2xkZXJcbmNvbnN0IGNyZWF0ZURpcmVjdG9yeSA9IChlKSA9PiB7XG4gICAgY29uc3QgZGlyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZGlyLWJ0bi10ZXh0Jyk7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGlyTmFtZSA9IGRpclRleHQudmFsdWU7XG4gICAgaWYoZGlyTmFtZSA9PSBudWxsIHx8IGRpck5hbWUgPT09ICcnKSByZXR1cm47XG4gICAgY29uc3QgZGlyZWN0b3J5ID0gY3JlYXRlTmV3RGlyKGRpck5hbWUpO1xuICAgIGRpclRleHQudmFsdWUgPSBudWxsO1xuICAgIGRpcmVjdG9yeUFyci5wdXNoKGRpcmVjdG9yeSk7XG4gICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbn1cblxuLy9mdW5jdGlvbiBmb3IgdGhlIHNlbGVjdGVkIGRpcmVjdG9yeSBsaXN0ZW5lclxuY29uc3Qgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnbGknKSB7XG4gICAgICAgIHNlbGVjdGVkRm9sZGVyID0gZS50YXJnZXQuZGF0YXNldC5saXN0SWQ7XG4gICAgICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgfVxufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgZGVsZXRlZGlyIGxpc3RlbmVyIFxuY29uc3QgZGVsZXRlRGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tdHJhc2gnKSAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgZGlyZWN0b3J5QXJyID0gZGlyZWN0b3J5QXJyLmZpbHRlcihkaXJlY3RvcnkgPT4gZGlyZWN0b3J5LmlkICE9PSBzZWxlY3RlZEZvbGRlcik7XG4gICAgICAgIHNlbGVjdGVkRm9sZGVyID0gbnVsbDtcbiAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICB9XG59XG4vL0VkaXRpbmcgdGhlIGRpcmVjdG9yeSBmb2xkZXIgdGl0bGUgYW5kIHVwZGF0aW5nIHRoZSBhcnJheSArIERPTVxuY29uc3QgZWRpdERpciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLWVkaXQnKSAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICBkaXJlY3RvcnlNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgY29uc3QgZWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXJlY3RvcnktZWRpdC1mb3JtJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLXRhYmxlci1zcXVhcmUteCcpO1xuXG4gICAgICAgIGNvbnN0IGVkaXREaXJGb3JtID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZXh0LWRpcicpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5UmVOYW1lID0gZGlyZWN0b3J5TW9kYWxUZXh0LnZhbHVlO1xuICAgICAgICAgICAgaWYoZGlyZWN0b3J5UmVOYW1lID09IG51bGwgfHwgZGlyZWN0b3J5UmVOYW1lID09PSAnJykgcmV0dXJuO1xuICAgICAgICAgICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyID0+IHtcbiAgICAgICAgICAgICAgICBpZihkaXIuaWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpci5uYW1lID0gZGlyZWN0b3J5UmVOYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAgICAgLy8gY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgZGlyZWN0b3J5TW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlZGl0RGlyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpciA9ICgpID0+IHtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgICAgICBjbG9zZUVkaXREaXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXREaXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VFZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VFZGl0RGlyKTtcbiAgICAgICAgZWRpdERpckJ0bi5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgfVxuICAgIFxuXG59XG5cbi8vY3JlYXRlcyBhIGRpcmVjdG9yeSBmb2xkZXIgb2JqZWN0IHRvIGJlIHB1c2hlZCBpbnRvIGRpcmVjdG9yeSBhcnJheVxuY29uc3QgY3JlYXRlTmV3RGlyID0gKGRpcikgPT4ge1xuICAgcmV0dXJuIHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogZGlyLCB0YXNrczogW10gfVxufVxuXG5leHBvcnQgeyByZW5kZXJMaXN0cywgY3JlYXRlRGlyTGlzdGVuZXIsIHNhdmVBbmRSZW5kZXJMaXN0IH0iLCJpbXBvcnQgeyBjcmVhdGVEaXJMaXN0ZW5lciwgc2F2ZUFuZFJlbmRlckxpc3QgfSBmcm9tIFwiLi9kaXJlY3RvcnktY3JlYXRvclwiO1xuaW1wb3J0IHsgdG9nZ2xlVGhlbWUgfSBmcm9tIFwiLi90b2dnbGVUaGVtZVwiO1xuXG5mdW5jdGlvbiBjcmVhdGVIVE1MRWxlbWVudCh0eXBlLCBpZCwgY2xhc3NlcywgY29udGVudCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuXG4gICAgaWYoaWQpIGVsZW1lbnQuaWQgPSBpZDtcbiAgICBpZihjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgobXlDbGFzcykgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKG15Q2xhc3MpKTtcbiAgICB9O1xuICAgIGlmKGNvbnRlbnQpIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG50b2dnbGVUaGVtZSgpO1xuc2F2ZUFuZFJlbmRlckxpc3QoKTtcbmNyZWF0ZURpckxpc3RlbmVyKCk7XG5cbmV4cG9ydCB7XG4gICAgY3JlYXRlSFRNTEVsZW1lbnRcbn0iLCJjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHtcblxuY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpZ2h0LWRhcmstbW9kZScpO1xudG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTW9kZSk7XG5cbmZ1bmN0aW9uIHRvZ2dsZU1vZGUoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG5cbiAgICBjb25zdCBjdXJyZW50VGhlbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC10aGVtZScpO1xuXG4gICAgaWYodG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsgXG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdEYXJrIE1vZGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRUaGVtZS50ZXh0Q29udGVudCA9ICdMaWdodCBNb2RlJztcbiAgICB9O1xufVxufVxuXG5leHBvcnQgeyB0b2dnbGVUaGVtZSB9Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiTE9DQUxfU1RPUkFHRV9ESVJfS0VZIiwiTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZIiwic2VsZWN0ZWRGb2xkZXIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZGlyZWN0b3J5QXJyIiwiSlNPTiIsInBhcnNlIiwic2F2ZUFuZFJlbmRlckxpc3QiLCJzYXZlIiwicmVuZGVyTGlzdHMiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZGlyZWN0b3J5Q29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXJMaXN0IiwiZm9yRWFjaCIsImRpcmVjdG9yeSIsImRpcmVjdG9yeUZvbGRlciIsImNyZWF0ZUhUTUxFbGVtZW50IiwibmFtZSIsImRhdGFzZXQiLCJsaXN0SWQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiZGlyZWN0b3J5Rm9sZGVySWNvbnMiLCJpbm5lckhUTUwiLCJjb250YWlucyIsImxpc3QiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVEaXJlY3RvcnkiLCJlIiwiZGlyVGV4dCIsInByZXZlbnREZWZhdWx0IiwiZGlyTmFtZSIsInZhbHVlIiwiY3JlYXRlTmV3RGlyIiwicHVzaCIsInNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJkZWxldGVEaXIiLCJwYXJlbnRFbGVtZW50IiwiZmlsdGVyIiwiZWRpdERpciIsImRpcmVjdG9yeU1vZGFsIiwidG9nZ2xlIiwiZWRpdERpckJ0biIsImNsb3NlRWRpdERpckJ0biIsImVkaXREaXJGb3JtIiwiZGlyZWN0b3J5TW9kYWxUZXh0IiwiZGlyZWN0b3J5UmVOYW1lIiwiZGlyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlRWRpdERpciIsImFkZEV2ZW50TGlzdGVuZXIiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ0YXNrcyIsInR5cGUiLCJjbGFzc2VzIiwiY29udGVudCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibXlDbGFzcyIsInRleHRDb250ZW50IiwiYm9keSIsImN1cnJlbnRUaGVtZSIsInRvZ2dsZVRoZW1lIiwiZGlyRm9ybSIsImRpckNvbnRhaW5lciIsImNyZWF0ZURpckxpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==