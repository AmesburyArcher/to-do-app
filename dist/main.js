(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>y});const t="task.list",n="task.selectedFolder";let r=localStorage.getItem(n),o=JSON.parse(localStorage.getItem(t))||[];const l=()=>{i(),a()},i=()=>{localStorage.setItem(t,JSON.stringify(o)),localStorage.setItem(n,r)},a=()=>{const e=document.querySelector(".directory");s(e),o.forEach((t=>{const n=y("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===r&&n.classList.add("directory-active"),e.appendChild(n);const o=y("span",null,["directory-folder-icons"],null);o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>',n.classList.contains("directory-active")&&n.appendChild(o)}))},s=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},d=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const r=f(n);t.value=null,o.push(r),l()},c=e=>{"li"===e.target.tagName.toLowerCase()&&(r=e.target.dataset.listId,l())},u=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.dataset.listId===r&&(o=o.filter((e=>e.id!==r)),r=null,l())},m=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.dataset.listId===r){document.querySelector(".directory-modal-container").style.display="block";let t=e.target.parentElement.parentElement.dataset.listId,n=o.map((e=>e.id)).indexOf(t);const r=document.querySelector("#directory-edit-form"),i=e=>{e.preventDefault();const t=document.querySelector("#text-dir"),a=t.value;if(null==a||""===a)return;const s=f(a);t.value=null,o.splice(n,1,s),l(),console.log(n),document.querySelector(".directory-modal-container").style.display="none",r.removeEventListener("submit",i)};r.addEventListener("submit",i)}},f=e=>({id:Date.now().toString(),name:e,tasks:[]});function y(e,t,n,r){const o=document.createElement(e);return t&&(o.id=t),n&&n.forEach((e=>o.classList.add(e))),r&&(o.textContent=r),o}document.querySelector("#header"),document.querySelector("#sidebar"),document.querySelector("#main"),document.querySelector("#footer"),l(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",d),t.addEventListener("click",c),t.addEventListener("click",u),t.addEventListener("click",m)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFSCxFQUF3QixDQUFDUyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxJLGtCQ0VsRixNQUFNSSxFQUF3QixZQUN4QkMsRUFBMkIsc0JBR2pDLElBQUlDLEVBQWlCQyxhQUFhQyxRQUFRSCxHQUN0Q0ksRUFBZUMsS0FBS0MsTUFBTUosYUFBYUMsUUFBUUosS0FBMkIsR0FFOUUsTUFBTVEsRUFBb0IsS0FDdEJDLElBQ0FDLEtBSUVELEVBQU8sS0FDVE4sYUFBYVEsUUFBUVgsRUFBdUJNLEtBQUtNLFVBQVVQLElBQzNERixhQUFhUSxRQUFRVixFQUEwQkMsSUFJN0NRLEVBQWMsS0FDaEIsTUFBTUcsRUFBcUJDLFNBQVNDLGNBQWMsY0FFbERDLEVBQVVILEdBQ1ZSLEVBQWFZLFNBQVFDLElBQ2xCLE1BQU1DLEVBQWtCQyxFQUFrQixLQUFNLEtBQU0sQ0FBQyxvQkFBcUJGLEVBQVVHLE1BQ3RGRixFQUFnQkcsUUFBUUMsT0FBU0wsRUFBVU0sR0FFeENOLEVBQVVNLEtBQU90QixHQUNoQmlCLEVBQWdCTSxVQUFVQyxJQUFJLG9CQUVsQ2IsRUFBbUJjLFlBQVlSLEdBRS9CLE1BQU1TLEVBQXVCUixFQUFrQixPQUFRLEtBQU0sQ0FBQywwQkFBMkIsTUFDekZRLEVBQXFCQyxVQUFZLDQxQkFFOUJWLEVBQWdCTSxVQUFVSyxTQUFTLHFCQUN0Q1gsRUFBZ0JRLFlBQVlDLE9BTTdCWixFQUFhZSxJQUNmLEtBQU1BLEVBQUtDLFlBQ1BELEVBQUtFLFlBQVlGLEVBQUtDLGFBZ0J4QkUsRUFBbUJDLElBQ3JCLE1BQU1DLEVBQVV0QixTQUFTQyxjQUFjLHFCQUV2Q29CLEVBQUVFLGlCQUNGLE1BQU1DLEVBQVVGLEVBQVFHLE1BQ3hCLEdBQWMsTUFBWEQsR0FBK0IsS0FBWkEsRUFBZ0IsT0FDdEMsTUFBTXBCLEVBQVlzQixFQUFhRixHQUMvQkYsRUFBUUcsTUFBUSxLQUNoQmxDLEVBQWFvQyxLQUFLdkIsR0FDbEJWLEtBSUVrQyxFQUE2QlAsSUFDTyxPQUFuQ0EsRUFBRVEsT0FBT0MsUUFBUUMsZ0JBQ2hCM0MsRUFBaUJpQyxFQUFFUSxPQUFPckIsUUFBUUMsT0FDbENmLE1BS0ZzQyxFQUFhWCxJQUNaQSxFQUFFUSxPQUFPbEIsVUFBVUssU0FBUyxlQUFpQkssRUFBRVEsT0FBT0ksY0FBY0EsY0FBY3pCLFFBQVFDLFNBQVdyQixJQUNwR0csRUFBZUEsRUFBYTJDLFFBQU85QixHQUFhQSxFQUFVTSxLQUFPdEIsSUFDakVBLEVBQWlCLEtBQ2pCTSxNQUlGeUMsRUFBV2QsSUFDYixHQUFHQSxFQUFFUSxPQUFPbEIsVUFBVUssU0FBUyxjQUFnQkssRUFBRVEsT0FBT0ksY0FBY0EsY0FBY3pCLFFBQVFDLFNBQVdyQixFQUFnQixDQUM1RlksU0FBU0MsY0FBYyw4QkFDL0JtQyxNQUFNQyxRQUFVLFFBQy9CLElBQUlDLEVBQWNqQixFQUFFUSxPQUFPSSxjQUFjQSxjQUFjekIsUUFBUUMsT0FDM0Q4QixFQUFJaEQsRUFBYWlELEtBQUlDLEdBQUtBLEVBQUUvQixLQUFJZ0MsUUFBUUosR0FDNUMsTUFBTUssRUFBYTNDLFNBQVNDLGNBQWMsd0JBRXBDMkMsRUFBZXZCLElBQ2pCQSxFQUFFRSxpQkFDRixNQUFNc0IsRUFBcUI3QyxTQUFTQyxjQUFjLGFBQzVDNkMsRUFBa0JELEVBQW1CcEIsTUFDM0MsR0FBc0IsTUFBbkJxQixHQUErQyxLQUFwQkEsRUFBd0IsT0FDdEQsTUFBTUMsRUFBcUJyQixFQUFhb0IsR0FDeENELEVBQW1CcEIsTUFBUSxLQUUzQmxDLEVBQWF5RCxPQUFPVCxFQUFHLEVBQUdRLEdBQzFCckQsSUFDQXVELFFBQVFDLElBQUlYLEdBQ1d2QyxTQUFTQyxjQUFjLDhCQUMvQm1DLE1BQU1DLFFBQVUsT0FDL0JNLEVBQVdRLG9CQUFvQixTQUFVUCxJQUc3Q0QsRUFBV1MsaUJBQWlCLFNBQVVSLEtBTXhDbEIsRUFBZ0IyQixJQUNaLENBQUUzQyxHQUFJNEMsS0FBS0MsTUFBTUMsV0FBWWpELEtBQU04QyxFQUFLSSxNQUFPLEtDbEh6RCxTQUFTbkQsRUFBa0JvRCxFQUFNaEQsRUFBSWlELEVBQVNDLEdBQzFDLE1BQU1DLEVBQVU3RCxTQUFTOEQsY0FBY0osR0FRdkMsT0FOR2hELElBQUltRCxFQUFRbkQsR0FBS0EsR0FDakJpRCxHQUNDQSxFQUFReEQsU0FBUzRELEdBQVlGLEVBQVFsRCxVQUFVQyxJQUFJbUQsS0FFcERILElBQVNDLEVBQVFHLFlBQWNKLEdBRTNCQyxFQWRJN0QsU0FBU0MsY0FBYyxXQUN0QkQsU0FBU0MsY0FBYyxZQUMxQkQsU0FBU0MsY0FBYyxTQUNyQkQsU0FBU0MsY0FBYyxXQWV0Q1AsSUQ4QjBCLE1BQ3RCLE1BQU11RSxFQUFVakUsU0FBU0MsY0FBYyxpQkFDakNpRSxFQUFlbEUsU0FBU0MsY0FBYyxjQUU1Q2dFLEVBQVFiLGlCQUFpQixTQUFVaEMsR0FDbkM4QyxFQUFhZCxpQkFBaUIsUUFBU3hCLEdBQ3ZDc0MsRUFBYWQsaUJBQWlCLFFBQVNwQixHQUN2Q2tDLEVBQWFkLGlCQUFpQixRQUFTakIsSUNwQzNDZ0MsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9kaXJlY3RvcnktY3JlYXRvci5qcyIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBjcmVhdGVIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luZGV4XCI7XG5cbmNvbnN0IExPQ0FMX1NUT1JBR0VfRElSX0tFWSA9ICd0YXNrLmxpc3QnO1xuY29uc3QgTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZID0gJ3Rhc2suc2VsZWN0ZWRGb2xkZXInO1xuXG4vL2xvY2FsIHN0b3JhZ2Uga2V5cyArIGFycmF5XG5sZXQgc2VsZWN0ZWRGb2xkZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVkpXG5sZXQgZGlyZWN0b3J5QXJyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0RJUl9LRVkpKSB8fCBbXTsgXG5cbmNvbnN0IHNhdmVBbmRSZW5kZXJMaXN0ID0gKCkgPT4ge1xuICAgIHNhdmUoKTtcbiAgICByZW5kZXJMaXN0cygpO1xufVxuXG4vL3NhdmVzIHRvIGxvY2FsIHN0b3JhZ2VcbmNvbnN0IHNhdmUgPSAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZLCBKU09OLnN0cmluZ2lmeShkaXJlY3RvcnlBcnIpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0ZPTERFUl9LRVksIHNlbGVjdGVkRm9sZGVyKTtcbn1cblxuLy9yZW5kZXJzIHRoZSBkaXJlY3RvcnkgbGlzdFxuY29uc3QgcmVuZGVyTGlzdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0b3J5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeScpO1xuXG4gICAgY2xlYXJMaXN0KGRpcmVjdG9yeUNvbnRhaW5lcik7XG4gICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyZWN0b3J5ID0+IHtcbiAgICAgICBjb25zdCBkaXJlY3RvcnlGb2xkZXIgPSBjcmVhdGVIVE1MRWxlbWVudCgnbGknLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXInXSwgZGlyZWN0b3J5Lm5hbWUpXG4gICAgICAgZGlyZWN0b3J5Rm9sZGVyLmRhdGFzZXQubGlzdElkID0gZGlyZWN0b3J5LmlkO1xuICAgICAgIC8vaWYgdGhlIGZvbGRlciBpcyBzZWxlY3RlZCwgbWFrZSBpdCBhY3RpdmUgZm9sZGVyXG4gICAgICAgaWYoZGlyZWN0b3J5LmlkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICAgICBkaXJlY3RvcnlGb2xkZXIuY2xhc3NMaXN0LmFkZCgnZGlyZWN0b3J5LWFjdGl2ZScpO1xuICAgICAgIH07XG4gICAgICAgZGlyZWN0b3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlcik7IFxuXG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVySWNvbnMgPSBjcmVhdGVIVE1MRWxlbWVudCgnc3BhbicsIG51bGwsIFsnZGlyZWN0b3J5LWZvbGRlci1pY29ucyddLCBudWxsKTtcbiAgICAgICBkaXJlY3RvcnlGb2xkZXJJY29ucy5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tZWRpdFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTQgMjBoNGwxMC41IC0xMC41YTEuNSAxLjUgMCAwIDAgLTQgLTRsLTEwLjUgMTAuNXY0XCIgLz48bGluZSB4MT1cIjEzLjVcIiB5MT1cIjYuNVwiIHgyPVwiMTcuNVwiIHkyPVwiMTAuNVwiIC8+PC9zdmc+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tdHJhc2hcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PGxpbmUgeDE9XCI0XCIgeTE9XCI3XCIgeDI9XCIyMFwiIHkyPVwiN1wiIC8+PGxpbmUgeDE9XCIxMFwiIHkxPVwiMTFcIiB4Mj1cIjEwXCIgeTI9XCIxN1wiIC8+PGxpbmUgeDE9XCIxNFwiIHkxPVwiMTFcIiB4Mj1cIjE0XCIgeTI9XCIxN1wiIC8+PHBhdGggZD1cIk01IDdsMSAxMmEyIDIgMCAwIDAgMiAyaDhhMiAyIDAgMCAwIDIgLTJsMSAtMTJcIiAvPjxwYXRoIGQ9XCJNOSA3di0zYTEgMSAwIDAgMSAxIC0xaDRhMSAxIDAgMCAxIDEgMXYzXCIgLz48L3N2Zz4nO1xuICAgICAgIC8vaWYgdGhlIGZvbGRlciBpcyBzZWxlY3RlZCwgYWRkIHRoZSBpY29uc1xuICAgICAgIGlmKGRpcmVjdG9yeUZvbGRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2RpcmVjdG9yeS1hY3RpdmUnKSkge1xuICAgICAgIGRpcmVjdG9yeUZvbGRlci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXJJY29ucyk7XG4gICAgICAgfTtcbiAgICB9KVxufTtcblxuLy9jbGVhcnMgdGhlIGRpcmVjdG9yeSBsaXN0IHRvIGJlIHJlLXJlbmRlcmVkIGluIHJlbmRlckxpc3RzXG5jb25zdCBjbGVhckxpc3QgPSAobGlzdCkgPT4ge1xuICAgIHdoaWxlKGxpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3QuZmlyc3RDaGlsZClcbiAgICB9XG59O1xuXG4vL2FkZHMgZXZlbnRsaXN0ZW5lcnMgZm9yIHRoZSBkaXJlY3RvcnlcbmNvbnN0IGNyZWF0ZURpckxpc3RlbmVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWRpci1mb3JtJyk7XG4gICAgY29uc3QgZGlyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRpcmVjdG9yeScpO1xuXG4gICAgZGlyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjcmVhdGVEaXJlY3RvcnkpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVEaXIpXG4gICAgZGlyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdERpcilcbn1cblxuLy9jcmVhdGVzIGEgbmV3IGRpcmVjdG9yeSBmb2xkZXJcbmNvbnN0IGNyZWF0ZURpcmVjdG9yeSA9IChlKSA9PiB7XG4gICAgY29uc3QgZGlyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZGlyLWJ0bi10ZXh0Jyk7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGlyTmFtZSA9IGRpclRleHQudmFsdWU7XG4gICAgaWYoZGlyTmFtZSA9PSBudWxsIHx8IGRpck5hbWUgPT09ICcnKSByZXR1cm47XG4gICAgY29uc3QgZGlyZWN0b3J5ID0gY3JlYXRlTmV3RGlyKGRpck5hbWUpO1xuICAgIGRpclRleHQudmFsdWUgPSBudWxsO1xuICAgIGRpcmVjdG9yeUFyci5wdXNoKGRpcmVjdG9yeSk7XG4gICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbn1cblxuLy9mdW5jdGlvbiBmb3IgdGhlIHNlbGVjdGVkIGRpcmVjdG9yeSBsaXN0ZW5lclxuY29uc3Qgc2VsZWN0ZWREaXJlY3RvcnlMaXN0ZW5lciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnbGknKSB7XG4gICAgICAgIHNlbGVjdGVkRm9sZGVyID0gZS50YXJnZXQuZGF0YXNldC5saXN0SWQ7XG4gICAgICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgfVxufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgZGVsZXRlZGlyIGxpc3RlbmVyIFxuY29uc3QgZGVsZXRlRGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tdHJhc2gnKSAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5saXN0SWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgIGRpcmVjdG9yeUFyciA9IGRpcmVjdG9yeUFyci5maWx0ZXIoZGlyZWN0b3J5ID0+IGRpcmVjdG9yeS5pZCAhPT0gc2VsZWN0ZWRGb2xkZXIpO1xuICAgICAgICBzZWxlY3RlZEZvbGRlciA9IG51bGw7XG4gICAgICAgIHNhdmVBbmRSZW5kZXJMaXN0KCk7XG4gICAgfVxufVxuLy9USElTIE5FRURTIFRPIEJFIFdPUktFRCBPTioqKioqKioqXG5jb25zdCBlZGl0RGlyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tZWRpdCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICBkaXJlY3RvcnlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgbGV0IGRpcmVjdG9yeUlEID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkO1xuICAgICAgICBsZXQgaSA9IGRpcmVjdG9yeUFyci5tYXAoYSA9PiBhLmlkKS5pbmRleE9mKGRpcmVjdG9yeUlEKTtcbiAgICAgICAgY29uc3QgZWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXJlY3RvcnktZWRpdC1mb3JtJyk7XG5cbiAgICAgICAgY29uc3QgZWRpdERpckZvcm0gPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RleHQtZGlyJyk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlSZU5hbWUgPSBkaXJlY3RvcnlNb2RhbFRleHQudmFsdWU7XG4gICAgICAgICAgICBpZihkaXJlY3RvcnlSZU5hbWUgPT0gbnVsbCB8fCBkaXJlY3RvcnlSZU5hbWUgPT09ICcnKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBuZXdEaXJlY3RvcnlGb2xkZXIgPSBjcmVhdGVOZXdEaXIoZGlyZWN0b3J5UmVOYW1lKTtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICBkaXJlY3RvcnlBcnIuc3BsaWNlKGksIDEsIG5ld0RpcmVjdG9yeUZvbGRlcik7XG4gICAgICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coaSk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RvcnlNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnktbW9kYWwtY29udGFpbmVyJyk7XG4gICAgICAgICAgICBkaXJlY3RvcnlNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBlZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKVxuICAgIH1cblxufVxuXG4vL2NyZWF0ZXMgYSBkaXJlY3RvcnkgZm9sZGVyIG9iamVjdCB0byBiZSBwdXNoZWQgaW50byBkaXJlY3RvcnkgYXJyYXlcbmNvbnN0IGNyZWF0ZU5ld0RpciA9IChkaXIpID0+IHtcbiAgIHJldHVybiB7IGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IGRpciwgdGFza3M6IFtdIH1cbn1cblxuZXhwb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IiwiaW1wb3J0IHsgcmVuZGVyTGlzdHMsIGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5cblxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlcicpO1xuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyJyk7XG5jb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4nKTtcbmNvbnN0IGZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb290ZXInKTtcblxuZnVuY3Rpb24gY3JlYXRlSFRNTEVsZW1lbnQodHlwZSwgaWQsIGNsYXNzZXMsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcblxuICAgIGlmKGlkKSBlbGVtZW50LmlkID0gaWQ7XG4gICAgaWYoY2xhc3Nlcykge1xuICAgICAgICBjbGFzc2VzLmZvckVhY2goKG15Q2xhc3MpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChteUNsYXNzKSk7XG4gICAgfTtcbiAgICBpZihjb250ZW50KSBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcblxuICAgIHJldHVybiBlbGVtZW50O1xufTtcblxuXG5zYXZlQW5kUmVuZGVyTGlzdCgpO1xuY3JlYXRlRGlyTGlzdGVuZXIoKTtcblxuZXhwb3J0IHtcbiAgICBjcmVhdGVIVE1MRWxlbWVudFxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkxPQ0FMX1NUT1JBR0VfRElSX0tFWSIsIkxPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSIsInNlbGVjdGVkRm9sZGVyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRpcmVjdG9yeUFyciIsIkpTT04iLCJwYXJzZSIsInNhdmVBbmRSZW5kZXJMaXN0Iiwic2F2ZSIsInJlbmRlckxpc3RzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRpcmVjdG9yeUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFyTGlzdCIsImZvckVhY2giLCJkaXJlY3RvcnkiLCJkaXJlY3RvcnlGb2xkZXIiLCJjcmVhdGVIVE1MRWxlbWVudCIsIm5hbWUiLCJkYXRhc2V0IiwibGlzdElkIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImRpcmVjdG9yeUZvbGRlckljb25zIiwiaW5uZXJIVE1MIiwiY29udGFpbnMiLCJsaXN0IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY3JlYXRlRGlyZWN0b3J5IiwiZSIsImRpclRleHQiLCJwcmV2ZW50RGVmYXVsdCIsImRpck5hbWUiLCJ2YWx1ZSIsImNyZWF0ZU5ld0RpciIsInB1c2giLCJzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiZGVsZXRlRGlyIiwicGFyZW50RWxlbWVudCIsImZpbHRlciIsImVkaXREaXIiLCJzdHlsZSIsImRpc3BsYXkiLCJkaXJlY3RvcnlJRCIsImkiLCJtYXAiLCJhIiwiaW5kZXhPZiIsImVkaXREaXJCdG4iLCJlZGl0RGlyRm9ybSIsImRpcmVjdG9yeU1vZGFsVGV4dCIsImRpcmVjdG9yeVJlTmFtZSIsIm5ld0RpcmVjdG9yeUZvbGRlciIsInNwbGljZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpciIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRhc2tzIiwidHlwZSIsImNsYXNzZXMiLCJjb250ZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJteUNsYXNzIiwidGV4dENvbnRlbnQiLCJkaXJGb3JtIiwiZGlyQ29udGFpbmVyIiwiY3JlYXRlRGlyTGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9