(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{N:()=>q,s:()=>x});const t=document.querySelector("#to-do-list"),n=document.querySelector(".to-do-title"),o=document.querySelector(".task-count"),r=document.querySelector(".tasks"),s=document.querySelector("#task-template"),c=e=>{const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";o.textContent=`${t} ${n} remaining`},a=()=>{const e=m.find((e=>e.id===u));null==e?t.style.display="none":(t.style.display="",n.textContent=e.name,c(e),p(r),e.tasks.forEach((e=>{const t=document.importNode(s.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete,t.querySelector(".task-name").textContent=e.name;const o=t.querySelector(".task-desc");e.desc?o.textContent=` Description: ${e.desc}`:o.textContent="No Description.";const c=t.querySelector(".task-date");e.date?c.textContent=` Complete by: ${e.date}`:c.textContent="No Completion Date.",r.appendChild(t)})))},l=(e,t,n)=>({id:Date.now().toString(),name:e,desc:t,date:n,complete:!1}),i="task.list",d="task.selectedFolder";let u=localStorage.getItem(d),m=JSON.parse(localStorage.getItem(i))||[];const v=()=>{g(),y()},g=()=>{localStorage.setItem(i,JSON.stringify(m)),localStorage.setItem(d,u)},y=()=>{const e=document.querySelector(".directory");p(e),m.forEach((t=>{const n=q("li",null,["directory-folder"],t.name);n.dataset.listId=t.id,t.id===u&&n.classList.add("directory-active"),e.appendChild(n);const o=q("span",null,["directory-folder-icons"],null);o.innerHTML='<button class="button-edit"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-edit" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" /><line x1="13.5" y1="6.5" x2="17.5" y2="10.5" /></svg></button><button class="button-trash"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-trash" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="7" x2="20" y2="7" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg></button>',n.classList.contains("directory-active")&&n.appendChild(o)}))},p=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},f=e=>{const t=document.querySelector(".add-dir-btn-text");e.preventDefault();const n=t.value;if(null==n||""===n)return;const o=L(n);t.value=null,m.push(o),v()},h=e=>{"li"===e.target.tagName.toLowerCase()&&(u=e.target.dataset.listId,v(),a())},k=e=>{e.target.classList.contains("icon-trash")&&e.target.parentElement.parentElement.parentElement.dataset.listId===u&&(m=m.filter((e=>e.id!==u)),u=null,x())},S=e=>{if(e.target.classList.contains("icon-edit")&&e.target.parentElement.parentElement.parentElement.dataset.listId===u){const e=document.querySelector(".directory-modal-container");e.classList.toggle("active");const t=document.querySelector("#directory-edit-form"),n=document.querySelector(".icon-tabler-square-x"),o=n=>{n.preventDefault();const r=document.querySelector("#text-dir"),s=r.value;null!=s&&""!==s&&(m.forEach((e=>{e.id===u&&(e.name=s)})),r.value=null,v(),e.classList.remove("active"),t.removeEventListener("submit",o))},r=()=>{e.classList.remove("active"),t.removeEventListener("submit",o),n.removeEventListener("click",r)};n.addEventListener("click",r),t.addEventListener("submit",o)}},L=e=>({id:Date.now().toString(),name:e,tasks:[]});function q(e,t,n,o){const r=document.createElement(e);return t&&(r.id=t),n&&n.forEach((e=>r.classList.add(e))),o&&(r.textContent=o),r}const x=()=>{v(),a()};(()=>{const e=document.querySelector(".light-dark-mode");e.addEventListener("click",(function(){document.body.classList.toggle("active"),e.classList.toggle("active");const t=document.querySelector(".current-theme");e.classList.contains("active")?t.textContent="Dark Mode":t.textContent="Light Mode"}))})(),x(),(()=>{const e=document.querySelector("#add-dir-form"),t=document.querySelector(".directory");e.addEventListener("submit",f),t.addEventListener("click",h),t.addEventListener("click",k),t.addEventListener("click",S)})(),document.querySelector(".create-task-btn").addEventListener("click",(()=>{document.querySelector(".modal-container").classList.add("active")})),document.querySelector("#add-task").addEventListener("submit",(e=>{e.preventDefault();const t=document.querySelector(".modal-container"),n=document.querySelector("#task"),o=document.querySelector("#description"),r=document.querySelector("#date"),s=n.value;if(null==s||""===s)return;const c=o.value,a=r.value,i=l(s,c,a);n.value=null,o.value=null,r.value=null,m.find((e=>e.id===u)).tasks.push(i),t.classList.remove("active"),x()})),r.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=m.find((e=>e.id===u));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,g(),c(t)}})),document.querySelector(".delete-tasks").addEventListener("click",(()=>{const e=m.find((e=>e.id===u));e.tasks=e.tasks.filter((e=>!e.complete)),x()})),document.querySelector(".current-date").textContent=function(){const e=new Date;let t=1==e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),n=1==e.getHours().toString().length?"0"+e.getHours():e.getHours(),o=e.getHours()>=12?"pm":"am";return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getDate()+" "+e.getFullYear()+" "+n+":"+t+o}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0MsS0FBT0MsSUFDM0RMLEVBQWFSLE1BQVFRLEVBQWFSLE1BQU1DLFFBQU9DLElBQVNBLEVBQUtDLFdBQzdEb0UsT0kzQmdCaEYsU0FBU0MsY0FBYyxpQkFDL0JjLFlBR1osV0FDSSxNQUFNK0YsRUFBSSxJQUFJdkUsS0FDZCxJQUFJd0UsRUFBOEMsR0FBcENELEVBQUVFLGFBQWF2RSxXQUFXNUIsT0FBYyxJQUFJaUcsRUFBRUUsYUFBZUYsRUFBRUUsYUFDekVDLEVBQTBDLEdBQWxDSCxFQUFFSSxXQUFXekUsV0FBVzVCLE9BQWMsSUFBSWlHLEVBQUVJLFdBQWFKLEVBQUVJLFdBQ25FQyxFQUFPTCxFQUFFSSxZQUFjLEdBQUssS0FBTyxLQUd2QyxNQURXLENBQUMsTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FDcENKLEVBQUVNLFVBQVUsSUFGWCxDQUFDLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUU3Q04sRUFBRU8sWUFBWSxJQUFJUCxFQUFFUSxVQUFVLElBQUlSLEVBQUVTLGNBQWMsSUFBSU4sRUFBTSxJQUFJRixFQUFRSSxFQVZyRkssSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby1hcHAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvLWFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9saXN0LWNyZWF0b3IuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2RpcmVjdG9yeS1jcmVhdG9yLmpzIiwid2VicGFjazovL3RvLWRvLWFwcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1hcHAvLi9zcmMvdG9nZ2xlVGhlbWUuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tYXBwLy4vc3JjL2RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBjcmVhdGVIVE1MRWxlbWVudCwgcmVuZGVyIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IHJlbmRlckxpc3RzLCBjcmVhdGVEaXJMaXN0ZW5lciwgc2F2ZUFuZFJlbmRlckxpc3QsIGRpcmVjdG9yeUFyciwgc2VsZWN0ZWRGb2xkZXIsIGNsZWFyTGlzdCwgc2F2ZSB9IGZyb20gXCIuL2RpcmVjdG9yeS1jcmVhdG9yXCI7XG5cbmNvbnN0IGZvbGRlckRpc3BsYXlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG8tZG8tbGlzdCcpO1xuY29uc3QgZm9sZGVyVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG8tZG8tdGl0bGUnKTtcbmNvbnN0IHRhc2tDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNvdW50Jyk7XG5jb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG5jb25zdCB0YXNrVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFzay10ZW1wbGF0ZScpO1xuXG4vLyBjcmVhdGVzIGxpc3RlbmVycyBmb3IgdGFza3NcbmNvbnN0IGxpc3RMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGUtdGFzay1idG4nKTtcbiAgICBjcmVhdGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVGFza01vZGFsKVxuXG4gICAgY29uc3Qgc3VibWl0VGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtdGFzaycpO1xuICAgIHN1Ym1pdFRhc2suYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybSk7XG5cbiAgICB0YXNrQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGFza0NoZWNrKTtcblxuICAgIGNvbnN0IGRlbGV0ZVRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlbGV0ZS10YXNrcycpO1xuICAgIGRlbGV0ZVRhc2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlU2VsZWN0ZWRUYXNrcylcbiAgICBcbn1cblxuLy8gZGVsZXRlcyBzZWxlY3RlZCB0YXNrc1xuY29uc3QgZGVsZXRlU2VsZWN0ZWRUYXNrcyA9ICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICBzZWxlY3RlZExpc3QudGFza3MgPSBzZWxlY3RlZExpc3QudGFza3MuZmlsdGVyKHRhc2sgPT4gIXRhc2suY29tcGxldGUpO1xuICAgIHJlbmRlcigpO1xufVxuXG4vLyBjaGVja3MgaWYgdGFzayBpcyBtYXJrZWQgY29tcGxldGVcbmNvbnN0IHRhc2tDaGVjayA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGRpcmVjdG9yeUFyci5maW5kKGxpc3QgPT4gbGlzdC5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFRhc2sgPSBzZWxlY3RlZExpc3QudGFza3MuZmluZCh0YXNrID0+IHRhc2suaWQgPT09IGUudGFyZ2V0LmlkKSBcbiAgICAgICAgc2VsZWN0ZWRUYXNrLmNvbXBsZXRlID0gZS50YXJnZXQuY2hlY2tlZDtcbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICByZW5kZXJUYXNrTnVtKHNlbGVjdGVkTGlzdCk7XG4gICAgfVxufVxuXG4vLyByZW5kZXJzIGFuZCBkaXNwbGF5cyB0byBET00gbnVtYmVyIG9mIHRhc2tzIHJlbWFpbmluZyB0byBjb21wbGV0ZVxuY29uc3QgcmVuZGVyVGFza051bSA9IChzZWxlY3RlZFRhc2tOdW0pID0+IHtcbiAgICBjb25zdCBpbmNvbXBsZXRlID0gc2VsZWN0ZWRUYXNrTnVtLnRhc2tzLmZpbHRlcih0YXNrID0+ICF0YXNrLmNvbXBsZXRlKS5sZW5ndGg7XG4gICAgY29uc3QgdGFza3NTdHJpbmcgPSBpbmNvbXBsZXRlID09PSAxID8gXCJ0YXNrXCIgOiBcInRhc2tzXCI7XG4gICAgdGFza0NvdW50LnRleHRDb250ZW50ID0gYCR7aW5jb21wbGV0ZX0gJHt0YXNrc1N0cmluZ30gcmVtYWluaW5nYDtcbn1cblxuLy8gZnVuY3Rpb24gdXNlZCB0byBjcmVhdGUgdGhlIHRhc2sgZWxlbWVudCBmb3IgdGhlIERPTVxuY29uc3QgcmVuZGVyVGFza0xpc3QgPSAoc2VsZWN0ZWRUYXNrTGlzdCkgPT4ge1xuICAgIHNlbGVjdGVkVGFza0xpc3QudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgY29uc3QgdGFza0RPTSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGFza1RlbXBsYXRlLmNvbnRlbnQsIHRydWUpXG4gICAgICAgIGNvbnN0IGNoZWNrQm94ID0gdGFza0RPTS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICBjaGVja0JveC5pZCA9IHRhc2suaWQ7XG4gICAgICAgIGNoZWNrQm94LmNoZWNrZWQgPSB0YXNrLmNvbXBsZXRlO1xuICAgICAgICBjb25zdCB0YXNrTmFtZSA9ICB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLW5hbWUnKTtcbiAgICAgICAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0YXNrLm5hbWU7XG5cbiAgICAgICAgY29uc3QgdGFza0Rlc2MgPSB0YXNrRE9NLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWRlc2MnKVxuICAgICAgICB0YXNrLmRlc2MgPyB0YXNrRGVzYy50ZXh0Q29udGVudCA9IGAgRGVzY3JpcHRpb246ICR7dGFzay5kZXNjfWAgOiB0YXNrRGVzYy50ZXh0Q29udGVudCA9ICdObyBEZXNjcmlwdGlvbi4nO1xuICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IHRhc2tET00ucXVlcnlTZWxlY3RvcignLnRhc2stZGF0ZScpO1xuICAgICAgICB0YXNrLmRhdGUgPyB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGAgQ29tcGxldGUgYnk6ICR7dGFzay5kYXRlfWAgOiB0YXNrRGF0ZS50ZXh0Q29udGVudCA9ICdObyBDb21wbGV0aW9uIERhdGUuJztcblxuICAgICAgICB0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tET00pO1xuICAgIH0pXG4gICAgXG59XG5cbi8vIHJlbmRlcnMgdGhlIHRhc2tzIGZyb20gdGhlIHNlbGVjdGVkIGZvbGRlciBvbiB0aGUgc2NyZWVuXG5jb25zdCByZW5kZXJUYXNrcyA9ICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcblxuICAgIGlmKHNlbGVjdGVkTGlzdCA9PSBudWxsKSB7XG4gICAgICAgIGZvbGRlckRpc3BsYXlDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgZm9sZGVyVGl0bGUudGV4dENvbnRlbnQgPSBzZWxlY3RlZExpc3QubmFtZTtcbiAgICAgICAgcmVuZGVyVGFza051bShzZWxlY3RlZExpc3QpO1xuICAgICAgICBjbGVhckxpc3QodGFza0NvbnRhaW5lcik7XG4gICAgICAgIHJlbmRlclRhc2tMaXN0KHNlbGVjdGVkTGlzdCk7XG4gICAgfVxufVxuXG4vLyBmdW5jdGlvbiB0aGF0IGRpc3BsYXlzIG1vZGFsIHRvIGFkZCBuZXcgdGFza1xuY29uc3QgY3JlYXRlVGFza01vZGFsID0gKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250YWluZXInKVxuICAgIGxpc3RNb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbn1cblxuLy8gZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgdGhlIGlucHV0IGZyb20gdGhlIGNyZWF0ZSB0YXNrIG1vZGFsIGFuZCBzdWJtaXRzIGl0IGZvciBzdG9yYWdlIGFuZCBkaXNwbGF5XG5jb25zdCBzdWJtaXRGb3JtID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgbGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRhaW5lcicpXG4gICAgY29uc3QgdGFza0lucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXNrJyk7XG4gICAgY29uc3QgdGFza0lucHV0RGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpO1xuICAgIGNvbnN0IHRhc2tJbnB1dERhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpO1xuICAgIFxuICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza0lucHV0TmFtZS52YWx1ZTtcbiAgICBpZih0YXNrTmFtZSA9PSBudWxsIHx8IHRhc2tOYW1lID09PSAnJykgcmV0dXJuO1xuICAgIGNvbnN0IHRhc2tEZXNjID0gdGFza0lucHV0RGVzYy52YWx1ZTtcbiAgICBjb25zdCB0YXNrRGF0ZSA9IHRhc2tJbnB1dERhdGUudmFsdWVcbiAgICBjb25zdCB0YXNrID0gY3JlYXRlVGFzayh0YXNrTmFtZSwgdGFza0Rlc2MsIHRhc2tEYXRlKTtcbiAgICB0YXNrSW5wdXROYW1lLnZhbHVlID0gbnVsbDtcbiAgICB0YXNrSW5wdXREZXNjLnZhbHVlID0gbnVsbDtcbiAgICB0YXNrSW5wdXREYXRlLnZhbHVlID0gbnVsbDtcbiAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBkaXJlY3RvcnlBcnIuZmluZChsaXN0ID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICBzZWxlY3RlZExpc3QudGFza3MucHVzaCh0YXNrKTtcbiAgICBsaXN0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgcmVuZGVyKCk7XG59XG5cbi8vIHRoaXMgZnVuY3Rpb24gY3JlYXRlcyB0aGUgdGFzayBvYmplY3QgdG8gYmUgcHVzaGVkIGludG8gdGhlIGRpcmVjdG9yeUFyci50YXNrcyBhcnJheVxuY29uc3QgY3JlYXRlVGFzayA9ICh0YXNrLCBkZXNjLCBkYXRlKSA9PiB7XG4gICAgcmV0dXJuIHsgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIG5hbWU6IHRhc2ssIGRlc2M6IGRlc2MsIGRhdGU6IGRhdGUsIGNvbXBsZXRlOiBmYWxzZSwgIH1cbn1cblxuXG5leHBvcnQgeyByZW5kZXJUYXNrcywgbGlzdExpc3RlbmVycyB9IiwiaW1wb3J0IHsgY3JlYXRlSFRNTEVsZW1lbnQsIHJlbmRlciB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyByZW5kZXJUYXNrcyB9IGZyb20gXCIuL2xpc3QtY3JlYXRvclwiO1xuXG5jb25zdCBMT0NBTF9TVE9SQUdFX0RJUl9LRVkgPSAndGFzay5saXN0JztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfRk9MREVSX0tFWSA9ICd0YXNrLnNlbGVjdGVkRm9sZGVyJztcblxuLy9sb2NhbCBzdG9yYWdlIGtleXMgKyBhcnJheVxubGV0IHNlbGVjdGVkRm9sZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZKVxubGV0IGRpcmVjdG9yeUFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9ESVJfS0VZKSkgfHwgW107IFxuXG5jb25zdCBzYXZlQW5kUmVuZGVyTGlzdCA9ICgpID0+IHtcbiAgICBzYXZlKCk7XG4gICAgcmVuZGVyTGlzdHMoKTtcbn1cblxuLy9zYXZlcyB0byBsb2NhbCBzdG9yYWdlXG5jb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfRElSX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5QXJyKSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZLCBzZWxlY3RlZEZvbGRlcik7XG59XG5cbi8vcmVuZGVycyB0aGUgZGlyZWN0b3J5IGxpc3RcbmNvbnN0IHJlbmRlckxpc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRpcmVjdG9yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXJlY3RvcnknKTtcblxuICAgIGNsZWFyTGlzdChkaXJlY3RvcnlDb250YWluZXIpO1xuICAgIGRpcmVjdG9yeUFyci5mb3JFYWNoKGRpcmVjdG9yeSA9PiB7XG4gICAgICAgY29uc3QgZGlyZWN0b3J5Rm9sZGVyID0gY3JlYXRlSFRNTEVsZW1lbnQoJ2xpJywgbnVsbCwgWydkaXJlY3RvcnktZm9sZGVyJ10sIGRpcmVjdG9yeS5uYW1lKVxuICAgICAgIGRpcmVjdG9yeUZvbGRlci5kYXRhc2V0Lmxpc3RJZCA9IGRpcmVjdG9yeS5pZDtcbiAgICAgICAvL2lmIHRoZSBmb2xkZXIgaXMgc2VsZWN0ZWQsIG1ha2UgaXQgYWN0aXZlIGZvbGRlclxuICAgICAgIGlmKGRpcmVjdG9yeS5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgICAgZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RpcmVjdG9yeS1hY3RpdmUnKTtcbiAgICAgICB9O1xuICAgICAgIGRpcmVjdG9yeUNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXJlY3RvcnlGb2xkZXIpOyBcblxuICAgICAgIGNvbnN0IGRpcmVjdG9yeUZvbGRlckljb25zID0gY3JlYXRlSFRNTEVsZW1lbnQoJ3NwYW4nLCBudWxsLCBbJ2RpcmVjdG9yeS1mb2xkZXItaWNvbnMnXSwgbnVsbCk7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVySWNvbnMuaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9XCJidXR0b24tZWRpdFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLWVkaXRcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2ZmZmZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk00IDIwaDRsMTAuNSAtMTAuNWExLjUgMS41IDAgMCAwIC00IC00bC0xMC41IDEwLjV2NFwiIC8+PGxpbmUgeDE9XCIxMy41XCIgeTE9XCI2LjVcIiB4Mj1cIjE3LjVcIiB5Mj1cIjEwLjVcIiAvPjwvc3ZnPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJidXR0b24tdHJhc2hcIj48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi10cmFzaFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjZmZmZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48bGluZSB4MT1cIjRcIiB5MT1cIjdcIiB4Mj1cIjIwXCIgeTI9XCI3XCIgLz48bGluZSB4MT1cIjEwXCIgeTE9XCIxMVwiIHgyPVwiMTBcIiB5Mj1cIjE3XCIgLz48bGluZSB4MT1cIjE0XCIgeTE9XCIxMVwiIHgyPVwiMTRcIiB5Mj1cIjE3XCIgLz48cGF0aCBkPVwiTTUgN2wxIDEyYTIgMiAwIDAgMCAyIDJoOGEyIDIgMCAwIDAgMiAtMmwxIC0xMlwiIC8+PHBhdGggZD1cIk05IDd2LTNhMSAxIDAgMCAxIDEgLTFoNGExIDEgMCAwIDEgMSAxdjNcIiAvPjwvc3ZnPjwvYnV0dG9uPic7XG4gICAgICAgLy9pZiB0aGUgZm9sZGVyIGlzIHNlbGVjdGVkLCBhZGQgdGhlIGljb25zXG4gICAgICAgaWYoZGlyZWN0b3J5Rm9sZGVyLmNsYXNzTGlzdC5jb250YWlucygnZGlyZWN0b3J5LWFjdGl2ZScpKSB7XG4gICAgICAgZGlyZWN0b3J5Rm9sZGVyLmFwcGVuZENoaWxkKGRpcmVjdG9yeUZvbGRlckljb25zKTtcbiAgICAgICB9O1xuICAgIH0pXG59O1xuXG4vL2NsZWFycyB0aGUgZGlyZWN0b3J5IGxpc3QgdG8gYmUgcmUtcmVuZGVyZWQgaW4gcmVuZGVyTGlzdHNcbmNvbnN0IGNsZWFyTGlzdCA9IChsaXN0KSA9PiB7XG4gICAgd2hpbGUobGlzdC5maXJzdENoaWxkKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKVxuICAgIH1cbn07XG5cbi8vYWRkcyBldmVudGxpc3RlbmVycyBmb3IgdGhlIGRpcmVjdG9yeVxuY29uc3QgY3JlYXRlRGlyTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZGlyLWZvcm0nKTtcbiAgICBjb25zdCBkaXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5Jyk7XG5cbiAgICBkaXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGNyZWF0ZURpcmVjdG9yeSlcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyKVxuICAgIGRpckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZURpcilcbiAgICBkaXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0RGlyKVxufVxuXG4vL2NyZWF0ZXMgYSBuZXcgZGlyZWN0b3J5IGZvbGRlclxuY29uc3QgY3JlYXRlRGlyZWN0b3J5ID0gKGUpID0+IHtcbiAgICBjb25zdCBkaXJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1kaXItYnRuLXRleHQnKTtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBkaXJOYW1lID0gZGlyVGV4dC52YWx1ZTtcbiAgICBpZihkaXJOYW1lID09IG51bGwgfHwgZGlyTmFtZSA9PT0gJycpIHJldHVybjtcbiAgICBjb25zdCBkaXJlY3RvcnkgPSBjcmVhdGVOZXdEaXIoZGlyTmFtZSk7XG4gICAgZGlyVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgZGlyZWN0b3J5QXJyLnB1c2goZGlyZWN0b3J5KTtcbiAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xufVxuXG4vL2Z1bmN0aW9uIGZvciB0aGUgc2VsZWN0ZWQgZGlyZWN0b3J5IGxpc3RlbmVyXG5jb25zdCBzZWxlY3RlZERpcmVjdG9yeUxpc3RlbmVyID0gKGUpID0+IHtcbiAgICBpZihlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdsaScpIHtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBlLnRhcmdldC5kYXRhc2V0Lmxpc3RJZDtcbiAgICAgICAgc2F2ZUFuZFJlbmRlckxpc3QoKTtcbiAgICAgICAgcmVuZGVyVGFza3MoKTtcbiAgICB9XG59XG5cbi8vZnVuY3Rpb24gZm9yIHRoZSBkZWxldGVkaXIgbGlzdGVuZXIgXG5jb25zdCBkZWxldGVEaXIgPSAoZSkgPT4ge1xuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaWNvbi10cmFzaCcpICYmIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQubGlzdElkID09PSBzZWxlY3RlZEZvbGRlcikge1xuICAgICAgICBkaXJlY3RvcnlBcnIgPSBkaXJlY3RvcnlBcnIuZmlsdGVyKGRpcmVjdG9yeSA9PiBkaXJlY3RvcnkuaWQgIT09IHNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgc2VsZWN0ZWRGb2xkZXIgPSBudWxsO1xuICAgICAgICAvLyBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAvLyByZW5kZXJUYXNrcygpO1xuICAgICAgICByZW5kZXIoKTtcbiAgICB9XG59XG4vL0VkaXRpbmcgdGhlIGRpcmVjdG9yeSBmb2xkZXIgdGl0bGUgYW5kIHVwZGF0aW5nIHRoZSBhcnJheSArIERPTVxuY29uc3QgZWRpdERpciA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLWVkaXQnKSAmJiBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9PT0gc2VsZWN0ZWRGb2xkZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0b3J5TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGlyZWN0b3J5LW1vZGFsLWNvbnRhaW5lcicpO1xuICAgICAgICBkaXJlY3RvcnlNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgY29uc3QgZWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkaXJlY3RvcnktZWRpdC1mb3JtJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLXRhYmxlci1zcXVhcmUteCcpO1xuXG4gICAgICAgIGNvbnN0IGVkaXREaXJGb3JtID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdG9yeU1vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZXh0LWRpcicpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0b3J5UmVOYW1lID0gZGlyZWN0b3J5TW9kYWxUZXh0LnZhbHVlO1xuICAgICAgICAgICAgaWYoZGlyZWN0b3J5UmVOYW1lID09IG51bGwgfHwgZGlyZWN0b3J5UmVOYW1lID09PSAnJykgcmV0dXJuO1xuICAgICAgICAgICAgZGlyZWN0b3J5QXJyLmZvckVhY2goZGlyID0+IHtcbiAgICAgICAgICAgICAgICBpZihkaXIuaWQgPT09IHNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpci5uYW1lID0gZGlyZWN0b3J5UmVOYW1lXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsVGV4dC52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgICAgICAgICAgZGlyZWN0b3J5TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlZGl0RGlyQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVkaXREaXJGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsb3NlRWRpdERpciA9ICgpID0+IHtcbiAgICAgICAgICAgIGRpcmVjdG9yeU1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWRpdERpckJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgICAgICAgICBjbG9zZUVkaXREaXJCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXREaXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VFZGl0RGlyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VFZGl0RGlyKTtcbiAgICAgICAgZWRpdERpckJ0bi5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlZGl0RGlyRm9ybSk7XG4gICAgfVxuICAgIFxuXG59XG5cbi8vY3JlYXRlcyBhIGRpcmVjdG9yeSBmb2xkZXIgb2JqZWN0IHRvIGJlIHB1c2hlZCBpbnRvIGRpcmVjdG9yeSBhcnJheVxuY29uc3QgY3JlYXRlTmV3RGlyID0gKGRpcikgPT4ge1xuICAgcmV0dXJuIHsgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgbmFtZTogZGlyLCB0YXNrczogW10gfVxufVxuXG5leHBvcnQgeyByZW5kZXJMaXN0cywgY3JlYXRlRGlyTGlzdGVuZXIsIHNhdmVBbmRSZW5kZXJMaXN0LCBkaXJlY3RvcnlBcnIsIHNlbGVjdGVkRm9sZGVyLCBjbGVhckxpc3QsIHNhdmUgfSIsImltcG9ydCB7IGNyZWF0ZURpckxpc3RlbmVyLCBzYXZlQW5kUmVuZGVyTGlzdCwgcmVuZGVyTGlzdHMsIGRpcmVjdG9yeUFyciwgc2VsZWN0ZWRGb2xkZXIgfSBmcm9tIFwiLi9kaXJlY3RvcnktY3JlYXRvclwiO1xuaW1wb3J0IHsgdG9nZ2xlVGhlbWUgfSBmcm9tIFwiLi90b2dnbGVUaGVtZVwiO1xuaW1wb3J0IHsgcmVuZGVyVGFza3MsIGxpc3RMaXN0ZW5lcnMgfSBmcm9tIFwiLi9saXN0LWNyZWF0b3JcIlxuaW1wb3J0IHsgZGlzcGxheURhdGUgfSBmcm9tIFwiLi9kYXRlXCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhUTUxFbGVtZW50KHR5cGUsIGlkLCBjbGFzc2VzLCBjb250ZW50KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG5cbiAgICBpZihpZCkgZWxlbWVudC5pZCA9IGlkO1xuICAgIGlmKGNsYXNzZXMpIHtcbiAgICAgICAgY2xhc3Nlcy5mb3JFYWNoKChteUNsYXNzKSA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQobXlDbGFzcykpO1xuICAgIH07XG4gICAgaWYoY29udGVudCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbn07XG5cbmNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICBzYXZlQW5kUmVuZGVyTGlzdCgpO1xuICAgIHJlbmRlclRhc2tzKCk7XG59XG5cbmNvbnN0IG9uTG9hZCA9ICgpID0+IHtcbiAgICB0b2dnbGVUaGVtZSgpO1xuICAgIHJlbmRlcigpO1xuICAgIGNyZWF0ZURpckxpc3RlbmVyKCk7XG4gICAgbGlzdExpc3RlbmVycygpOyBcbiAgICBkaXNwbGF5RGF0ZSgpO1xufVxuXG5vbkxvYWQoKTtcblxuZXhwb3J0IHtcbiAgICBjcmVhdGVIVE1MRWxlbWVudCwgcmVuZGVyXG59IiwiY29uc3QgdG9nZ2xlVGhlbWUgPSAoKSA9PiB7XG5cbmNvbnN0IHRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saWdodC1kYXJrLW1vZGUnKTtcbnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGUpO1xuXG5mdW5jdGlvbiB0b2dnbGVNb2RlKCkge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgdG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuXG4gICAgY29uc3QgY3VycmVudFRoZW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdGhlbWUnKTtcblxuICAgIGlmKHRvZ2dsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7IFxuICAgICAgICBjdXJyZW50VGhlbWUudGV4dENvbnRlbnQgPSAnRGFyayBNb2RlJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50VGhlbWUudGV4dENvbnRlbnQgPSAnTGlnaHQgTW9kZSc7XG4gICAgfTtcbn1cbn1cblxuZXhwb3J0IHsgdG9nZ2xlVGhlbWUgfSIsImNvbnN0IGRpc3BsYXlEYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGRhdGVET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC1kYXRlJyk7XG4gICAgZGF0ZURPTS50ZXh0Q29udGVudCA9IGZvcm1hdEFNUE0oKVxufVxuXG5mdW5jdGlvbiBmb3JtYXRBTVBNKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpXG4gICAgbGV0IG1pbnV0ZXMgPSBkLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLmxlbmd0aCA9PSAxID8gJzAnK2QuZ2V0TWludXRlcygpIDogZC5nZXRNaW51dGVzKCk7XG4gICAgbGV0IGhvdXJzID0gZC5nZXRIb3VycygpLnRvU3RyaW5nKCkubGVuZ3RoID09IDEgPyAnMCcrZC5nZXRIb3VycygpIDogZC5nZXRIb3VycygpO1xuICAgIGxldCBhbXBtID0gZC5nZXRIb3VycygpID49IDEyID8gJ3BtJyA6ICdhbSc7XG4gICAgbGV0IG1vbnRocyA9IFsnSmFuJywnRmViJywnTWFyJywnQXByJywnTWF5JywnSnVuJywnSnVsJywnQXVnJywnU2VwJywnT2N0JywnTm92JywnRGVjJ107XG4gICAgbGV0IGRheXMgPSBbJ1N1bicsJ01vbicsJ1R1ZScsJ1dlZCcsJ1RodScsJ0ZyaScsJ1NhdCddO1xuICAgIHJldHVybiBkYXlzW2QuZ2V0RGF5KCldKycgJyttb250aHNbZC5nZXRNb250aCgpXSsnICcrZC5nZXREYXRlKCkrJyAnK2QuZ2V0RnVsbFllYXIoKSsnICcraG91cnMrJzonK21pbnV0ZXMrYW1wbTtcbiAgICB9XG5cbmV4cG9ydCB7IGRpc3BsYXlEYXRlLCBmb3JtYXRBTVBNIH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJmb2xkZXJEaXNwbGF5Q29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9sZGVyVGl0bGUiLCJ0YXNrQ291bnQiLCJ0YXNrQ29udGFpbmVyIiwidGFza1RlbXBsYXRlIiwicmVuZGVyVGFza051bSIsInNlbGVjdGVkVGFza051bSIsImluY29tcGxldGUiLCJ0YXNrcyIsImZpbHRlciIsInRhc2siLCJjb21wbGV0ZSIsImxlbmd0aCIsInRhc2tzU3RyaW5nIiwidGV4dENvbnRlbnQiLCJyZW5kZXJUYXNrcyIsInNlbGVjdGVkTGlzdCIsImRpcmVjdG9yeUFyciIsImZpbmQiLCJsaXN0IiwiaWQiLCJzZWxlY3RlZEZvbGRlciIsInN0eWxlIiwiZGlzcGxheSIsIm5hbWUiLCJjbGVhckxpc3QiLCJmb3JFYWNoIiwidGFza0RPTSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiY2hlY2tCb3giLCJjaGVja2VkIiwidGFza0Rlc2MiLCJkZXNjIiwidGFza0RhdGUiLCJkYXRlIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUYXNrIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiTE9DQUxfU1RPUkFHRV9ESVJfS0VZIiwiTE9DQUxfU1RPUkFHRV9GT0xERVJfS0VZIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInNhdmVBbmRSZW5kZXJMaXN0Iiwic2F2ZSIsInJlbmRlckxpc3RzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRpcmVjdG9yeUNvbnRhaW5lciIsImRpcmVjdG9yeSIsImRpcmVjdG9yeUZvbGRlciIsImNyZWF0ZUhUTUxFbGVtZW50IiwiZGF0YXNldCIsImxpc3RJZCIsImNsYXNzTGlzdCIsImFkZCIsImRpcmVjdG9yeUZvbGRlckljb25zIiwiaW5uZXJIVE1MIiwiY29udGFpbnMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVEaXJlY3RvcnkiLCJlIiwiZGlyVGV4dCIsInByZXZlbnREZWZhdWx0IiwiZGlyTmFtZSIsInZhbHVlIiwiY3JlYXRlTmV3RGlyIiwicHVzaCIsInNlbGVjdGVkRGlyZWN0b3J5TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJkZWxldGVEaXIiLCJwYXJlbnRFbGVtZW50IiwicmVuZGVyIiwiZWRpdERpciIsImRpcmVjdG9yeU1vZGFsIiwidG9nZ2xlIiwiZWRpdERpckJ0biIsImNsb3NlRWRpdERpckJ0biIsImVkaXREaXJGb3JtIiwiZGlyZWN0b3J5TW9kYWxUZXh0IiwiZGlyZWN0b3J5UmVOYW1lIiwiZGlyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlRWRpdERpciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwiY2xhc3NlcyIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibXlDbGFzcyIsImJvZHkiLCJjdXJyZW50VGhlbWUiLCJ0b2dnbGVUaGVtZSIsImRpckZvcm0iLCJkaXJDb250YWluZXIiLCJjcmVhdGVEaXJMaXN0ZW5lciIsImxpc3RNb2RhbCIsInRhc2tJbnB1dE5hbWUiLCJ0YXNrSW5wdXREZXNjIiwidGFza0lucHV0RGF0ZSIsInRhc2tOYW1lIiwiZCIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiaG91cnMiLCJnZXRIb3VycyIsImFtcG0iLCJnZXREYXkiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsImZvcm1hdEFNUE0iXSwic291cmNlUm9vdCI6IiJ9